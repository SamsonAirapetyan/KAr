(()=>{"use strict";var t,e,i,a,r={23460:(t,e,i)=>{i(40851),i(91181),i(56997),i(96253),i(66108);var a=i(61540),r=(0,i(19331).partConfigEnabled)("rlottie")&&!(0,a.isMvk)(),n=function(){var t,e,i,a,o=!1,s=!1,l={},c={},d={},u={},f={};function v(t,e){var i=r&&!e,a=g(t),n=1;if(a){hide(geByClass1("sticker_img",t)),addClass(t,"animation_play"),a.play();var o=attr(t,"data-loop-count");if(o=parseInt(o),isNaN(o)&&(o=3),-1!==o){var s,l,c=i?null==a||null==(s=a.listeners)?void 0:s.loopComplete:null==a||null==(l=a._cbs)?void 0:l.loopComplete;(!c||0===(null==c?void 0:c.length))&&a.addEventListener("loopComplete",(function e(){n++;var r=!0;o>=n&&(r=!1),r&&(p(t,!1),a.removeEventListener("loopComplete",e),a[i?"pause":"stop"]())}))}}}function m(t){var e=attr(t,"data-uid");return e||(e=attr(t,"data-uid",Math.random().toString(32).substr(2))),e}function p(t,e){f[m(t)]=e}function g(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return!1;var i=d[e];return i||!1}function k(t,e,o){var s=r&&!e,u=g(t);if(u)"function"==typeof o&&o(u);else{var v=attr(t,"data-uniq-id"),k=attr(t,"data-uid");if(!f[m(t)])if(!s||!hasClass(t,"animation_play")){p(t,!0);var h=attr(t,"data-animation-path"),b=attr(t,"data-sticker-id"),_=!1,w=s?c[b]:l[b];if(b&&(_=(w||h)&&y(t)),_){var S=attr(t,"data-animation-class")||"",A=s?{container:t,loop:!0,autoplay:!0,name:k,group:"sticker",className:`svg_sticker_animation ${S}`}:{container:t,renderer:"svg",loop:!0,autoplay:!1,name:v,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:`svg_sticker_animation ${S}`}};w?A.animationData=w:A[s?"animationUrl":"path"]=h;var j=geByClass1("svg_sticker_animation",t);if(j&&re(j),u=(s?a:i).loadAnimation(A),!l[b]||s)return u instanceof Promise||(u=Promise.resolve(u)),void u.then((i=>{var a=s?"firstFrame":"data_ready";i.addEventListener(a,(()=>{var t=i.animationData;s?c[b]=t:l[b]=t,d[v]=i,"function"==typeof o&&o(i)})),s&&i.addEventListener("destroy",(()=>{n.stopAnimation(t,e)}))}))}"function"==typeof o&&(d[v]=u,o(u))}}}function h(t){return e(r&&!t).then((t=>{if(Array.isArray(t)){var e=t[0],r=t[1];a=e,i=r}else i=t;return i}))}return{init(t){e=t.animatorLoader},checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),i=geByClass1("sticker_animation",e);n.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(t){if(StickersSettings.getAutoplay()){var e=$(`.msg_id_${t} .sticker_animation`);n.loadAndPlaySticker(e)}},loadStickerInMvkIMAndPlay:function(t,e){var i="_msg"+t;e&&(i="msg_id_"+t);var a=geByClass1("sticker_animation",geByClass1(i));n.loadAndPlayStickerWithTimer(a,500)},loadAutoplayAnimationStickers:function(t){if(i){if(t){if(s)return;s=!0}if(!o){o=!0;var e=geByClass("sticker_animation_autoplay");e&&each(e,(function(t,e){k(e,!1,(function(){v(e,!1)}))})),o=!1}}else h().then((()=>{n.loadAutoplayAnimationStickers(t)}))},loadAndPlaySticker:function(t,e){t&&(i?requestAnimationFrame((()=>{k(t,e,(function(){v(t,e)}))})):h(e).then((()=>{n.loadAndPlaySticker(t,e)})))},loadAndPlayStickerWithTimer:function(t,e){if(t&&!u[t]){e||(e=1e3);var i=ge(t);hasClass(i,"sticker_animation_disabled_timer")||(u[t]=setTimeout((function(){!i&&(i=ge(t),hasClass(i,"sticker_animation_disabled_timer"))||(n.loadAndPlaySticker(i),clearTimeout(u[t]),u[t]=!1)}),e))}},reloadStickers:function(){d={}},touchStartSticker:function(e){e.addEventListener("contextmenu",n.preventContextMenu,!1),t=setTimeout((function(){n.loadAndPlaySticker(e)}),500)},touchEndSticker:function(){t&&clearTimeout(t)},preventContextMenu:function(t){t.preventDefault(),t.stopPropagation()},stopAnimation(t,e){var i=r&&!e,a=g(t);if(a&&a[i?"pause":"stop"](),i){var n=attr(t,"data-uniq-id");removeClass(t,"animation_play"),show(geByClass1("sticker_img",t)),p(t,!1),delete d[n]}}};function y(t){var e=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;return e<window.innerHeight&&i>=0&&isVisible(t)}}();n.init({animatorLoader:()=>Promise.all([Promise.all([i.e(75514),i.e(68592),i.e(93417)]).then(i.bind(i,79845)).then((t=>t.LottieManager)),i.e(55489).then(i.bind(i,9499)).then((t=>t.lottie))])});var o={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return!!o.autoplay&&!o.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return!!window.Calls&&window.Calls.isInActiveCall}},s=(i(59357),i(11417)),l=i(70162),c={},d=(t,e,i,a)=>{delete c[e],1===a?Emoji.favorite.addFavoriteSticker(t,e,i):-1===a&&Emoji.favorite.deleteFavoriteSticker(t,e,i)};var u={toggleFavorite:function(t,e,i){if(e&&e.stopPropagation(),!t.classList.contains("on")&&((a=Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers)&&!(a.length<Emoji.favoriteLimit)))return function(){if(!Emoji.favoriteLimitNoticed){var t=(0,l.langStr)(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);setTimeout(window.showFastBox(getLang("global_error"),t).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0}}(),!1;var a,r=t.getAttribute("data-sticker-id"),n=t.getAttribute("data-hash");return!(!r||!n)&&(!c[r]&&(c[r]=1,t.classList.toggle("on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:r,hash:n},{onDone:d.pbind(i,r,t)})))},getStickerUrl:function(t,e){var i=String(e);if(s.colorScheme.isDarkScheme()&&(i=i.replace(/b$/,"")+"b"),window.Emoji){var r,n,o,l=null==(r=Emoji.stickersById)||null==(n=r[t])||null==(o=n.sticker[Emoji.STICKER_FIELD_IMAGES])?void 0:o[i];if(l)return l}var c={id:t,size:i};if((0,a.isMvk)()){if(window.stickers_cache){var d=window.stickers_cache.getStickerImage(t,i);if(d)return d}return window.store.stickers&&window.rs(window.store.stickers.url_template,{id:t,size:i})}return window.getTemplate("stickers_sticker_url",c)}};window.StickersAnimation=n,window.StickersSettings=o,window.Stickers=u;try{window.stManager.done(window.jsc("web/stickers.js"))}catch(t){}}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return r[t].call(i.exports,i,i.exports,o),i.exports}o.m=r,t=[],o.O=(e,i,a,r)=>{if(!i){var n=1/0;for(d=0;d<t.length;d++){for(var[i,a,r]=t[d],s=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((t=>o.O[t](i[l])))?i.splice(l--,1):(s=!1,r<n&&(n=r));if(s){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[i,a,r]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(t,a){if(1&a&&(t=this(t)),8&a)return t;if("object"==typeof t&&t){if(4&a&&t.__esModule)return t;if(16&a&&"function"==typeof t.then)return t}var r=Object.create(null);o.r(r);var n={};e=e||[null,i({}),i([]),i(i)];for(var s=2&a&&t;"object"==typeof s&&!~e.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((e=>n[e]=()=>t[e]));return n.default=()=>t,o.d(r,n),r},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,i)=>(o.f[i](t,e),e)),[])),o.u=t=>75514===t?"react.aa0593255e5f9d5c3793.js":93417===t?"758783f2384baa77b901b7efcc9e55b5.3ca812b474740638d292.js":55489===t?"lottie-light.d9398c3d9d22795c887a.js":26156===t?t+".f24734aa586c3996e4f6.js":void 0,o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a={},o.l=(t,e,i,r)=>{if(a[t])a[t].push(e);else{var n,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")=="vk:"+i){n=d;break}}n||(s=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack","vk:"+i),n.src=t),a[t]=[e];var u=(e,i)=>{n.onerror=n.onload=null,clearTimeout(f);var r=a[t];if(delete a[t],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((t=>t(i))),e)return e(i)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),s&&document.head.appendChild(n)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.p="/dist/",(()=>{o.b=document.baseURI||self.location.href;var t={54346:0};o.f.j=(e,i)=>{var a=o.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise(((i,r)=>a=t[e]=[i,r]));i.push(a[2]=r);var n=o.p+o.u(e),s=new Error;o.l(n,(i=>{if(o.o(t,e)&&(0!==(a=t[e])&&(t[e]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",s.name="ChunkLoadError",s.type=r,s.request=n,a[1](s)}}),"chunk-"+e,e)}},o.O.j=e=>0===t[e];var e=(e,i)=>{var a,r,[n,s,l]=i,c=0;for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(l)var d=l(o);for(e&&e(i);c<n.length;c++)r=n[c],o.o(t,r)&&t[r]&&t[r][0](),t[n[c]]=0;return o.O(d)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=o.O(void 0,[76429,68592],(()=>o(23460)));s=o.O(s)})();