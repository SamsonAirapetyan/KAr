(()=>{"use strict";var __webpack_modules__={35703:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="add_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#add_circle_fill_blue_20__a)"/><path d="M10 4.5a1 1 0 0 1 1 1V9h3.5a1 1 0 1 1 0 2H11v3.5a1 1 0 1 1-2 0V11H5.5a1 1 0 1 1 0-2H9V5.5a1 1 0 0 1 1-1z" fill="#fff"/></svg>',name:"add_circle_fill_blue_20"}}i.d(t,{getIcon20AddCircleFillBlue:()=>_})},69224:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#add_circle_fill_green_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" d="M10 4.5a1 1 0 0 1 1 1V9h3.5a1 1 0 1 1 0 2H11v3.5a1 1 0 1 1-2 0V11H5.5a1 1 0 1 1 0-2H9V5.5a1 1 0 0 1 1-1Z"/><defs><linearGradient id="add_circle_fill_green_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#50C750"/><stop offset="1" stop-color="#32B332"/></linearGradient></defs></svg>',name:"add_circle_fill_green_20"}}i.d(t,{getIcon20AddCircleFillGreen:()=>_})},69945:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#advertising_circle_fill_red_20__a)" d="M10 20a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"/><path fill="#fff" d="M14.87 14a.75.75 0 0 1-.41-.12l-2.28-1.8-.12-.12a.3.3 0 0 1-.05-.1.46.46 0 0 1-.01-.12V7.31a.6.6 0 0 1 .02-.17.3.3 0 0 1 .04-.1l.12-.13 2.28-1.78a.8.8 0 0 1 .41-.13c.35 0 .63.3.63.67v7.66c0 .37-.28.67-.63.67zm-4.6-7c.12 0 .23.11.23.25v4.5c0 .14-.1.25-.24.25H8.71c0 .5.26 1.23.46 1.5.33.44.3.96-.07 1.3-.37.34-1.1.23-1.43-.2a4.7 4.7 0 0 1-.92-2.6h-.4C5.06 12 4 10.88 4 9.5S5.05 7 6.36 7h3.9z"/><defs><linearGradient id="advertising_circle_fill_red_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#FF5263"/><stop offset="1" stop-color="#FF3347"/></linearGradient></defs></svg>',name:"advertising_circle_fill_red_20"}}i.d(t,{getIcon20AdvertisingCircleFillRed:()=>_})},76181:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="box_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#box_circle_fill_blue_20__a)"/><path d="M5.2 8.6a.2.2 0 0 1 .07.01l4.58 1.83c.1.04.2.04.3 0l4.58-1.83a.2.2 0 0 1 .27.19v4.43a.4.4 0 0 1-.25.37l-4.6 1.84a.4.4 0 0 1-.3 0l-4.6-1.84a.4.4 0 0 1-.25-.37V8.8c0-.12.09-.2.2-.2zm4.65-4.04a.4.4 0 0 1 .3 0l4.39 1.75a.2.2 0 0 1 0 .38l-4.4 1.75a.4.4 0 0 1-.29 0L5.46 6.7a.2.2 0 0 1 0-.38z" fill="#fff"/></svg>',name:"box_circle_fill_blue_20"}}i.d(t,{getIcon20BoxCircleFillBlue:()=>_})},66688:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="cake_circle_fill_purple_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#937ff5"/><stop offset="1" stop-color="#735ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#cake_circle_fill_purple_20__a)"/><g fill="#fff"><path d="M15 12.88c-1 .25-2.1.12-3-.37-1.2.66-2.8.66-4 0-.9.5-2 .62-3 .37V14a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1zM4 9.5a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1c0 1.5-1 2-2 2-1.5 0-2-1-2-1s-.5 1-2 1-2-1-2-1-.5 1-2 1c-1 0-2-.5-2-2zm9.4-5.45a.1.1 0 0 1 .2 0c.46.85.9 1.22.9 1.95a1 1 0 1 1-2 0c0-.73.44-1.1.9-1.95zm-7 0a.1.1 0 0 1 .2 0c.46.85.9 1.22.9 1.95a1 1 0 0 1-2 0c0-.73.44-1.1.9-1.95zm3.5 0a.1.1 0 0 1 .2 0c.46.85.9 1.22.9 1.95a1 1 0 1 1-2 0c0-.73.44-1.1.9-1.95z"/></g></svg>',name:"cake_circle_fill_purple_20"}}i.d(t,{getIcon20CakeCircleFillPurple:()=>_})},56543:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="calendar_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#calendar_circle_fill_red_20__a)"/><path clip-rule="evenodd" d="M7.17 4.09a.82.82 0 0 0-.4-.09h-.04a.82.82 0 0 0-.4.09.6.6 0 0 0-.24.24.82.82 0 0 0-.09.4v.35a2.33 2.33 0 0 0-1.67 1.2c-.21.4-.33.81-.33 1.92v4.1c0 1.1.12 1.51.33 1.92.22.4.54.73.95.95.4.21.81.33 1.92.33h5.6c1.1 0 1.51-.12 1.92-.33.4-.22.73-.54.95-.95.21-.4.33-.81.33-1.92V8.2c0-1.11-.12-1.51-.33-1.92-.22-.4-.54-.73-.95-.95-.2-.1-.42-.2-.72-.25v-.35a.82.82 0 0 0-.09-.4.6.6 0 0 0-.24-.24.82.82 0 0 0-.4-.09h-.04a.82.82 0 0 0-.4.09.6.6 0 0 0-.24.24.82.82 0 0 0-.09.4V5h-5v-.27a.82.82 0 0 0-.09-.4.6.6 0 0 0-.24-.24zM6.33 8h7.34c.29 0 .4.03.5.09.1.05.19.14.24.24.06.1.09.21.09.5v4.04c-.01.33-.06.48-.13.62a.9.9 0 0 1-.38.38c-.16.08-.33.13-.77.13H6.63a1.24 1.24 0 0 1-.62-.13.9.9 0 0 1-.38-.38c-.08-.16-.13-.33-.13-.77v-4c0-.2.04-.3.09-.39a.6.6 0 0 1 .24-.24c.1-.06.21-.09.5-.09zm5.78 1.5h-.22a1 1 0 0 0-.5.1.68.68 0 0 0-.29.28 1 1 0 0 0-.1.51v.22a1 1 0 0 0 .1.5c.07.13.16.22.28.29a1 1 0 0 0 .51.1h.22a1 1 0 0 0 .5-.1.68.68 0 0 0 .29-.28 1 1 0 0 0 .1-.51v-.22a1 1 0 0 0-.1-.5.68.68 0 0 0-.28-.29 1 1 0 0 0-.51-.1z" fill="#fff" fill-rule="evenodd"/></svg>',name:"calendar_circle_fill_red_20"}}i.d(t,{getIcon20CalendarCircleFillRed:()=>_})},9165:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="camera_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#camera_circle_fill_green_20__a)"/><path d="M7 6.5c.75 0 .75-1 1.5-1h3c.75 0 .75 1 1.5 1h-.24c.78 0 1.06.08 1.34.23.29.16.51.38.67.67.15.28.23.56.23 1.34v3.02c0 .78-.08 1.06-.23 1.34-.16.29-.38.51-.67.67-.28.15-.56.23-1.34.23H7.24c-.78 0-1.06-.08-1.34-.23a1.6 1.6 0 0 1-.67-.67c-.15-.28-.23-.56-.23-1.34V8.74c0-.78.08-1.06.23-1.34s.38-.51.67-.67.56-.23 1.34-.23zm3 .75a2.75 2.75 0 1 0 0 5.5 2.75 2.75 0 0 0 0-5.5zm0 1.25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" fill="#fff"/></svg>',name:"camera_circle_fill_green_20"}}i.d(t,{getIcon20CameraCircleFillGreen:()=>_})},6962:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="cancel_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#cancel_circle_fill_red_20__a)"/><path d="M5.8 5.8a1 1 0 0 1 1.4 0L10 8.58l2.8-2.8a1 1 0 1 1 1.4 1.42L11.42 10l2.8 2.8a1 1 0 0 1 .08 1.31l-.08.1a1 1 0 0 1-1.42 0L10 11.4l-2.8 2.8a1 1 0 0 1-1.4-1.42L8.58 10l-2.8-2.8a1 1 0 0 1-.08-1.31z" fill="#fff"/></svg>',name:"cancel_circle_fill_red_20"}}i.d(t,{getIcon20CancelCircleFillRed:()=>_})},11803:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="check_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#check_circle_fill_green_20__a)"/><path d="M6.7 9.3a1 1 0 0 0-1.4 1.4l3 3a1 1 0 0 0 1.4 0l5.5-5.5a1 1 0 0 0-1.4-1.4L9 11.58z" fill="#fff"/></svg>',name:"check_circle_fill_green_20"}}i.d(t,{getIcon20CheckCircleFillGreen:()=>_})},9754:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#check_circle_fill_turquoise_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" d="M6.7 9.3a1 1 0 0 0-1.4 1.4l3 3a1 1 0 0 0 1.4 0l5.5-5.5a1 1 0 0 0-1.4-1.4L9 11.58l-2.3-2.3Z"/><defs><linearGradient id="check_circle_fill_turquoise_20__a" x1="30" x2="10" y1="10" y2="-10" gradientUnits="userSpaceOnUse"><stop stop-color="#65C2C2"/><stop offset="1" stop-color="#86D1D1"/></linearGradient></defs></svg>',name:"check_circle_fill_turquoise_20"}}i.d(t,{getIcon20CheckCircleFillTurquoise:()=>_})},91451:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="check_circle_fill_yellow_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ffb73d"/><stop offset="1" stop-color="#ffa000"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#check_circle_fill_yellow_20__a)"/><path d="M6.7 9.3a1 1 0 0 0-1.4 1.4l3 3a1 1 0 0 0 1.4 0l5.5-5.5a1 1 0 0 0-1.4-1.4L9 11.58z" fill="#fff"/></svg>',name:"check_circle_fill_yellow_20"}}i.d(t,{getIcon20CheckCircleFillYellow:()=>_})},57663:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#clip_circle_fill_violet_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" fill-rule="evenodd" d="M7.81 3a.85.85 0 0 1 .89.81l.15 3.3a.85.85 0 1 1-1.7.08L7 3.89A.85.85 0 0 1 7.81 3Zm4.54.52a.85.85 0 0 1 .63 1.03l-.8 3.3a.85.85 0 0 1-1.66-.4l.8-3.3a.85.85 0 0 1 1.03-.63Zm1.92 5.69a.75.75 0 1 0-1.04 1.08 2.31 2.31 0 0 1 .77 1.96c0 1.4-1.32 3.25-4 3.25-1 0-2.02-.34-2.78-.94A2.9 2.9 0 0 1 6 12.25c0-.28.12-.75.4-1.13a1.5 1.5 0 0 1 1.28-.62c.16 0 .62.07.9.6a.75.75 0 1 0 1.33-.7A2.56 2.56 0 0 0 7.68 9a3 3 0 0 0-2.48 1.22c-.49.65-.7 1.44-.7 2.03a4.4 4.4 0 0 0 1.8 3.5A6.14 6.14 0 0 0 10 17c3.45 0 5.5-2.47 5.5-4.75a3.8 3.8 0 0 0-1.23-3.04Z"/><defs><linearGradient id="clip_circle_fill_violet_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#C48AFF"/><stop offset="1" stop-color="#AA65F0"/></linearGradient></defs></svg>',name:"clip_circle_fill_violet_20"}}i.d(t,{getIcon20ClipCircleFillViolet:()=>_})},93534:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="comment_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#comment_circle_fill_green_20__a)"/><path d="m11 13.5-2.06 2.06a.55.55 0 0 1-.94-.39V13.5zM13.08 6c.67 0 .9.07 1.15.2.25.13.44.32.57.57.13.24.2.48.2 1.15v3.66c0 .67-.07.9-.2 1.15-.13.25-.32.44-.57.57-.24.13-.48.2-1.15.2H6.92c-.67 0-.9-.07-1.15-.2a1.36 1.36 0 0 1-.57-.57c-.13-.24-.2-.48-.2-1.15V7.92c0-.67.07-.9.2-1.15.13-.25.32-.44.57-.57.24-.13.48-.2 1.15-.2z" fill="#fff"/></svg>',name:"comment_circle_fill_green_20"}}i.d(t,{getIcon20CommentCircleFillGreen:()=>_})},93965:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="discussions_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#discussions_circle_fill_blue_20__a)"/><path d="M12.73 12.65c.16-.16.3-.35.4-.56.24-.45.37-.89.37-2.12V7h.9c.55 0 .76.06.96.17s.36.27.47.47c.11.2.17.4.17.96v6.05a.35.35 0 0 1-.6.25L13.5 13h-.76a.15.15 0 0 1-.1-.26l.09-.09zM6.5 12l-1.9 1.9a.35.35 0 0 1-.6-.25V7.6c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17h4.8c.55 0 .76.06.96.17s.36.27.47.47c.11.2.17.4.17.96v2.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17z" fill="#fff"/></svg>',name:"discussions_circle_fill_blue_20"}}i.d(t,{getIcon20DiscussionsCircleFillBlue:()=>_})},82251:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="donate_circle_fill_yellow_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ffb73d"/><stop offset="1" stop-color="#ffa000"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#donate_circle_fill_yellow_20__a)"/><path clip-rule="evenodd" d="M10 4a6 6 0 1 1 0 12 6 6 0 0 1 0-12zm.11 2.6a.25.25 0 0 0-.33.1l-.96 1.93-2.12.31a.25.25 0 0 0-.14.43l1.54 1.5-.37 2.12a.25.25 0 0 0 .37.26l1.9-1 1.9 1a.25.25 0 0 0 .37-.26l-.37-2.12 1.54-1.5a.25.25 0 0 0-.14-.43l-2.12-.3-.96-1.94a.25.25 0 0 0-.1-.1z" fill="#fff" fill-rule="evenodd"/></svg>',name:"donate_circle_fill_yellow_20"}}i.d(t,{getIcon20DonateCircleFillYellow:()=>_})},98100:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="edit_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#edit_circle_fill_blue_20__a)"/><path clip-rule="evenodd" d="m12.99 9.52-4.47 4.47a4.6 4.6 0 0 1-.49.45c-.11.08-.22.15-.35.2s-.25.1-.63.21l-2.23.64a.25.25 0 0 1-.31-.31l.64-2.23c.1-.38.15-.5.2-.63s.13-.24.21-.35.17-.21.45-.49l4.47-4.47a.2.2 0 0 1 .28 0L13 9.24a.2.2 0 0 1 0 .28zm-.49-4.53c.32-.31.46-.4.64-.45a.91.91 0 0 1 .54 0c.18.05.32.14.64.45l.69.7c.31.3.4.45.45.63.05.18.05.36 0 .54-.05.18-.14.32-.45.64l-.68.67a.2.2 0 0 1-.28 0l-2.22-2.22a.2.2 0 0 1 0-.28z" fill="#fff" fill-rule="evenodd"/></svg>',name:"edit_circle_fill_blue_20"}}i.d(t,{getIcon20EditCircleFillBlue:()=>_})},29009:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="fire_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#fire_circle_fill_red_20__a)"/><path d="M7.5 6.84a4.2 4.2 0 0 0 2-3.31 5 5 0 0 1 2.47 6.11 2.5 2.5 0 0 0 1.71-1.82A4.49 4.49 0 0 1 12 15.24a4.5 4.5 0 0 1-3-4.39 3.98 3.98 0 0 0-.76 4.03 4.25 4.25 0 0 1-1.06-7.84z" fill="#fff"/></svg>',name:"fire_circle_fill_red_20"}}i.d(t,{getIcon20FireCircleFillRed:()=>_})},62039:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="game_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#game_circle_fill_blue_20__a)"/><path d="M12.5 6c3 0 3.5 4 3.5 5.7 0 1.3-.5 2.3-1.3 2.3-1.2 0-1.2-2.5-3.2-2.5h-3c-2 0-2 2.5-3.2 2.5-.8 0-1.3-1-1.3-2.3C4 10 4.5 6 7.5 6zm-5 1.5c-.1 0-.2.02-.27.06a.4.4 0 0 0-.17.17A.56.56 0 0 0 7 8v.5h-.5c-.07 0-.14 0-.2.03l-.07.03a.4.4 0 0 0-.17.17A.57.57 0 0 0 6 9c0 .1.02.2.06.27.04.07.1.13.17.17.07.04.16.06.27.06H7v.5c0 .07 0 .14.03.2l.03.07c.04.07.1.13.17.17s.16.06.27.06c.1 0 .2-.02.27-.06s.13-.1.17-.17A.56.56 0 0 0 8 10v-.5h.5c.07 0 .14 0 .2-.03l.07-.03a.4.4 0 0 0 .17-.17A.57.57 0 0 0 9 9c0-.1-.02-.2-.06-.27a.4.4 0 0 0-.17-.17.56.56 0 0 0-.27-.06H8V8c0-.07 0-.14-.03-.2l-.03-.07a.4.4 0 0 0-.17-.17.57.57 0 0 0-.27-.06zm6 1h-1c-.1 0-.2.02-.27.06-.07.04-.13.1-.17.17S12 8.89 12 9c0 .1.02.2.06.27s.1.13.17.17c.07.04.16.06.27.06h1c.1 0 .2-.02.27-.06.07-.04.13-.1.17-.17S14 9.11 14 9c0-.1-.02-.2-.06-.27s-.1-.13-.17-.17a.56.56 0 0 0-.27-.06z" fill="#fff"/></svg>',name:"game_circle_fill_blue_20"}}i.d(t,{getIcon20GameCircleFillBlue:()=>_})},73853:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="gift_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#gift_circle_fill_red_20__a)"/><path d="M8.7 12.3c.23 0 .31.02.4.07s.14.1.18.19c.05.08.07.16.07.38v2.42c0 .22-.02.3-.07.38a.45.45 0 0 1-.19.2c-.08.04-.16.06-.38.06H7.28c-.44 0-.6-.05-.77-.13a.9.9 0 0 1-.38-.38c-.08-.16-.13-.33-.13-.77v-1.78c0-.22.02-.3.07-.38.04-.09.1-.15.19-.2s.16-.06.38-.06zm4.66 0c.22 0 .3.02.38.07s.15.1.2.19.06.16.06.38v1.78c0 .44-.05.6-.13.77a.9.9 0 0 1-.38.38c-.16.08-.33.13-.77.13h-1.43c-.22 0-.3-.02-.38-.07a.45.45 0 0 1-.2-.19c-.04-.08-.06-.16-.06-.38v-2.42c0-.22.02-.3.07-.38s.1-.15.19-.2.16-.06.38-.06zM8.7 8c.22 0 .3.02.38.07s.15.1.2.19c.04.08.06.16.06.38v1.72c0 .22-.02.3-.07.38a.45.45 0 0 1-.19.2c-.08.04-.16.06-.38.06H5.64c-.22 0-.3-.02-.38-.07a.45.45 0 0 1-.2-.19c-.04-.08-.06-.16-.06-.38v-1.1c0-.42.05-.59.13-.75a.9.9 0 0 1 .38-.38c.16-.08.33-.13.74-.13zm5.04 0c.4 0 .58.05.74.13.16.1.29.22.38.38.08.16.13.33.13.74v1.1c0 .23-.02.31-.07.4a.45.45 0 0 1-.19.18c-.08.05-.16.07-.38.07h-3.07c-.22 0-.3-.02-.38-.07a.45.45 0 0 1-.2-.19c-.04-.08-.06-.16-.06-.38V8.64c0-.22.02-.3.07-.38s.1-.15.19-.2.16-.06.38-.06zM10 7C6.5 7 6.2 4.8 7 4s3-.5 3 3zm3-3c.8.8.5 3-3 3 0-3.5 2.2-3.8 3-3z" fill="#fff"/></svg>',name:"gift_circle_fill_red_20"}}i.d(t,{getIcon20GiftCircleFillRed:()=>_})},87759:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="gift_circle_fill_yellow_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ffb73d"/><stop offset="1" stop-color="#ffa000"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#gift_circle_fill_yellow_20__a)"/><path d="M8.7 12.3c.23 0 .31.02.4.07s.14.1.18.19c.05.08.07.16.07.38v2.42c0 .22-.02.3-.07.38a.45.45 0 0 1-.19.2c-.08.04-.16.06-.38.06H7.28c-.44 0-.6-.05-.77-.13a.9.9 0 0 1-.38-.38c-.08-.16-.13-.33-.13-.77v-1.78c0-.22.02-.3.07-.38.04-.09.1-.15.19-.2s.16-.06.38-.06zm4.66 0c.22 0 .3.02.38.07s.15.1.2.19.06.16.06.38v1.78c0 .44-.05.6-.13.77a.9.9 0 0 1-.38.38c-.16.08-.33.13-.77.13h-1.43c-.22 0-.3-.02-.38-.07a.45.45 0 0 1-.2-.19c-.04-.08-.06-.16-.06-.38v-2.42c0-.22.02-.3.07-.38s.1-.15.19-.2.16-.06.38-.06zM8.7 8c.22 0 .3.02.38.07s.15.1.2.19c.04.08.06.16.06.38v1.72c0 .22-.02.3-.07.38a.45.45 0 0 1-.19.2c-.08.04-.16.06-.38.06H5.64c-.22 0-.3-.02-.38-.07a.45.45 0 0 1-.2-.19c-.04-.08-.06-.16-.06-.38v-1.1c0-.42.05-.59.13-.75a.9.9 0 0 1 .38-.38c.16-.08.33-.13.74-.13zm5.04 0c.4 0 .58.05.74.13.16.1.29.22.38.38.08.16.13.33.13.74v1.1c0 .23-.02.31-.07.4a.45.45 0 0 1-.19.18c-.08.05-.16.07-.38.07h-3.07c-.22 0-.3-.02-.38-.07a.45.45 0 0 1-.2-.19c-.04-.08-.06-.16-.06-.38V8.64c0-.22.02-.3.07-.38s.1-.15.19-.2.16-.06.38-.06zM10 7C6.5 7 6.2 4.8 7 4s3-.5 3 3zm3-3c.8.8.5 3-3 3 0-3.5 2.2-3.8 3-3z" fill="#fff"/></svg>',name:"gift_circle_fill_yellow_20"}}i.d(t,{getIcon20GiftCircleFillYellow:()=>_})},36817:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="lightbulb_circle_fill_yellow_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ffb73d"/><stop offset="1" stop-color="#ffa000"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#lightbulb_circle_fill_yellow_20__a)"/><g fill="#fff"><path d="M10 14.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM6 8a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/><path d="M8.5 10.5h3v2a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1z"/></g></svg>',name:"lightbulb_circle_fill_yellow_20"}}i.d(t,{getIcon20LightbulbCircleFillYellow:()=>_})},40884:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="like_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#like_circle_fill_red_20__a)"/><path d="M12.2 6.5c1.55 0 2.8 1.2 2.8 2.7 0 1.5-.63 2.24-3.28 4.23l-1.2.9a.86.86 0 0 1-1.03 0l-1.21-.9C5.63 11.44 5 10.69 5 9.19 5 7.7 6.25 6.5 7.8 6.5c.83 0 1.55.4 2.2 1.15.65-.75 1.37-1.15 2.2-1.15z" fill="#fff"/></svg>',name:"like_circle_fill_red_20"}}i.d(t,{getIcon20LikeCircleFillRed:()=>_})},26642:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="mail_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#mail_circle_fill_blue_20__a)"/><path d="M15 8.13v3.95c0 .67-.07.9-.2 1.15-.13.25-.32.44-.57.57-.24.13-.48.2-1.15.2H6.92c-.67 0-.9-.07-1.15-.2a1.36 1.36 0 0 1-.57-.57c-.13-.24-.2-.48-.2-1.15V8.13L10 10zM13.08 5c.67 0 .9.07 1.15.2.25.13.44.32.57.57.1.19.16.37.19.76L10 8.4 5.01 6.53c.03-.39.09-.57.19-.76.13-.25.32-.44.57-.57.24-.13.48-.2 1.15-.2z" fill="#fff"/></svg>',name:"mail_circle_fill_blue_20"}}i.d(t,{getIcon20MailCircleFillBlue:()=>_})},34402:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="mention_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#mention_circle_fill_blue_20__a)"/><path d="M9.9 16c-1.2 0-2.23-.23-3.12-.7s-1.57-1.14-2.05-2.01A6.16 6.16 0 0 1 4 10.24v-.36c0-1.16.26-2.18.77-3.07S6 5.23 6.92 4.74c.93-.5 2-.74 3.2-.74h.06c1.12 0 2.13.22 3 .66A4.94 4.94 0 0 1 16 9.2v.37c.01.7-.1 1.3-.33 1.82-.23.53-.55.93-.97 1.22-.42.29-.9.43-1.45.43-.5 0-.94-.1-1.3-.3-.37-.2-.6-.47-.7-.8h-.07c-.1.33-.3.6-.63.8-.32.2-.7.3-1.15.3-.45 0-.85-.1-1.18-.3-.33-.2-.59-.48-.76-.85-.18-.37-.27-.8-.27-1.31v-.92c0-.48.09-.9.27-1.27s.44-.63.77-.83.72-.3 1.17-.3c.42 0 .78.1 1.07.3.3.19.5.45.6.78h.05V8.2c0-.24.08-.43.23-.58a.8.8 0 0 1 .59-.23c.23 0 .42.08.57.23a.8.8 0 0 1 .22.58v2.93c0 .21.06.38.19.52.13.13.3.2.5.2.23 0 .43-.1.6-.3.17-.2.3-.47.4-.83.1-.36.14-.78.14-1.25v-.2a3.85 3.85 0 0 0-2.11-3.48 4.85 4.85 0 0 0-2.25-.51h-.07c-.92 0-1.74.19-2.43.57s-1.24.93-1.63 1.64c-.38.7-.57 1.53-.57 2.46v.26c0 .92.18 1.72.55 2.4s.9 1.22 1.57 1.59c.68.37 1.47.56 2.38.56h.08c.34 0 .75-.04 1.21-.1.24-.04.38-.05.44-.05.18 0 .33.05.44.16.12.11.18.25.18.42 0 .3-.17.5-.5.6-.44.15-1.07.22-1.87.22zm-.94-5.69c0 .91.3 1.37.97 1.37.32 0 .57-.11.73-.32.17-.22.28-.53.28-.95v-.63c0-.38-.12-.68-.3-.9a.9.9 0 0 0-.72-.32c-.33 0-.58.12-.75.35s-.21.57-.21 1.01z" fill="#fff"/></svg>',name:"mention_circle_fill_blue_20"}}i.d(t,{getIcon20MentionCircleFillBlue:()=>_})},92090:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="message_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#message_circle_fill_blue_20__a)"/><path clip-rule="evenodd" d="M10 5c2.76 0 5 2.01 5 4.5S12.76 14 10 14c-.5 0-1-.07-1.45-.2a9.89 9.89 0 0 1-1.84 1.27l-.17.08a.5.5 0 0 1-.69-.63l.2-.52c.13-.45.25-.92.32-1.4A4.25 4.25 0 0 1 5 9.5C5 7.01 7.24 5 10 5z" fill="#fff" fill-rule="evenodd"/></svg>',name:"message_circle_fill_blue_20"}}i.d(t,{getIcon20MessageCircleFillBlue:()=>_})},27180:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#message_unread_circle_fill_red_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z"/><path fill="#fff" fill-rule="evenodd" d="M14.93 8.75a2.57 2.57 0 0 1-3.52-3.57A5.52 5.52 0 0 0 10 5C7.24 5 5 7.01 5 9.5c0 1.2.52 2.29 1.37 3.1a9.94 9.94 0 0 1-.33 1.4c-.04.15-.1.32-.19.52a.5.5 0 0 0 .69.64l.17-.1.3-.15a9.89 9.89 0 0 0 1.54-1.1c.46.12.94.19 1.45.19 2.76 0 5-2.02 5-4.5 0-.25-.02-.5-.07-.75z" clip-rule="evenodd"/><circle cx="13.57" cy="6.57" r="1.29" fill="#fff"/><defs><linearGradient id="message_unread_circle_fill_red_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#FF5263"/><stop offset="1" stop-color="#FF3347"/></linearGradient></defs></svg>',name:"message_unread_circle_fill_red_20"}}i.d(t,{getIcon20MessageUnreadCircleFillRed:()=>_})},61315:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="money_request_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#money_request_circle_fill_blue_20__a)"/><path d="M12.52 11.5c.1 0 .22.03.3.1l2.88 2.07a.71.71 0 0 1 0 1.16l-2.88 2.07a.52.52 0 0 1-.82-.42v-4.46c0-.29.23-.52.52-.52zM12.8 5c1.1 0 1.51.12 1.92.33.4.22.73.54.95.95.21.4.33.81.33 1.92v2.05a.75.75 0 0 1-1.5 0V9.5h-9v2.72c0 .44.05.6.13.77.1.16.22.29.38.38.14.07.29.12.62.13H12V15H7.2c-1.11 0-1.51-.12-1.92-.33-.4-.22-.73-.54-.95-.95-.21-.4-.33-.81-.33-1.92V8.2c0-1.11.12-1.51.33-1.92.22-.4.54-.73.95-.95.4-.21.81-.33 1.92-.33zm.42 1.5H6.78c-.44 0-.6.05-.77.13a.9.9 0 0 0-.38.38c-.07.14-.12.29-.13.62V8h9v-.22c0-.44-.05-.6-.13-.77a.9.9 0 0 0-.38-.38 1.24 1.24 0 0 0-.62-.13z" fill="#fff"/></svg>',name:"money_request_circle_fill_blue_20"}}i.d(t,{getIcon20MoneyRequestCircleFillBlue:()=>_})},13803:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="money_transfer_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#money_transfer_circle_fill_red_20__a)"/><path d="M12.52 11.5c.1 0 .22.03.3.1l2.88 2.07a.71.71 0 0 1 0 1.16l-2.88 2.07a.52.52 0 0 1-.82-.42v-4.46c0-.29.23-.52.52-.52zM12.8 5c1.1 0 1.51.12 1.92.33.4.22.73.54.95.95.21.4.33.81.33 1.92v2.05a.75.75 0 0 1-1.5 0V9.5h-9v2.72c0 .44.05.6.13.77.1.16.22.29.38.38.14.07.29.12.62.13H12V15H7.2c-1.11 0-1.51-.12-1.92-.33-.4-.22-.73-.54-.95-.95-.21-.4-.33-.81-.33-1.92V8.2c0-1.11.12-1.51.33-1.92.22-.4.54-.73.95-.95.4-.21.81-.33 1.92-.33zm.42 1.5H6.78c-.44 0-.6.05-.77.13a.9.9 0 0 0-.38.38c-.07.14-.12.29-.13.62V8h9v-.22c0-.44-.05-.6-.13-.77a.9.9 0 0 0-.38-.38 1.24 1.24 0 0 0-.62-.13z" fill="#fff"/></svg>',name:"money_transfer_circle_fill_red_20"}}i.d(t,{getIcon20MoneyTransferCircleFillRed:()=>_})},70039:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="money_transfer_circle_fill_turquoise_20__a" gradientUnits="userSpaceOnUse" x1="30" x2="10" y1="10" y2="-10"><stop offset="0" stop-color="#65c2c2"/><stop offset="1" stop-color="#86d1d1"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#money_transfer_circle_fill_turquoise_20__a)"/><path d="M12.52 11.5c.1 0 .22.03.3.1l2.88 2.07a.71.71 0 0 1 0 1.16l-2.88 2.07a.52.52 0 0 1-.82-.42v-4.46c0-.29.23-.52.52-.52zM12.8 5c1.1 0 1.51.12 1.92.33.4.22.73.54.95.95.21.4.33.81.33 1.92v2.05a.75.75 0 0 1-1.5 0V9.5h-9v2.72c0 .44.05.6.13.77.1.16.22.29.38.38.14.07.29.12.62.13H12V15H7.2c-1.11 0-1.51-.12-1.92-.33-.4-.22-.73-.54-.95-.95-.21-.4-.33-.81-.33-1.92V8.2c0-1.11.12-1.51.33-1.92.22-.4.54-.73.95-.95.4-.21.81-.33 1.92-.33zm.42 1.5H6.78c-.44 0-.6.05-.77.13a.9.9 0 0 0-.38.38c-.07.14-.12.29-.13.62V8h9v-.22c0-.44-.05-.6-.13-.77a.9.9 0 0 0-.38-.38 1.24 1.24 0 0 0-.62-.13z" fill="#fff"/></svg>',name:"money_transfer_circle_fill_turquoise_20"}}i.d(t,{getIcon20MoneyTransferCircleFillTurquoise:()=>_})},96710:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="podcast_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#podcast_circle_fill_red_20__a)"/><path clip-rule="evenodd" d="M16 9A6 6 0 0 0 4 9c-.24.03-.37.07-.49.13a.9.9 0 0 0-.38.38c-.08.16-.13.33-.13.77v1.56c0 .3.05.49.13.65.1.16.22.29.38.38.16.08.35.13.65.13h.18c.3 0 .49-.05.65-.13a.9.9 0 0 0 .38-.38c.08-.16.13-.35.13-.65V8.8a4.5 4.5 0 0 1 9 .21v2.84c0 .3.05.49.13.65.1.16.22.29.38.38.16.08.35.13.65.13h.18c.3 0 .49-.05.65-.13a.9.9 0 0 0 .38-.38c.08-.16.13-.35.13-.65v-1.56c0-.44-.05-.6-.13-.77a.9.9 0 0 0-.38-.38A1.2 1.2 0 0 0 16 9zm-6-3a3 3 0 0 0-3 3v3a3 3 0 0 0 2.25 2.9v.87c0 .17.03.3.09.4.05.1.14.19.24.24.1.06.23.09.4.09h.04c.17 0 .3-.03.4-.09a.6.6 0 0 0 .24-.24c.06-.1.09-.23.09-.4v-.86A3 3 0 0 0 13 12V9a3 3 0 0 0-3-3zm-.6 5.4h-.9v.6a1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 10 7.5 1.5 1.5 0 0 0 8.5 9v1h.9c.18 0 .26.02.34.07s.15.1.2.19c.04.08.06.16.06.35v.18c0 .19-.02.27-.07.35-.04.09-.1.15-.19.2s-.16.06-.35.06z" fill="#fff" fill-rule="evenodd"/></svg>',name:"podcast_circle_fill_red_20"}}i.d(t,{getIcon20PodcastCircleFillRed:()=>_})},27031:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="poll_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#poll_circle_fill_green_20__a)"/><path clip-rule="evenodd" d="M10 5a1 1 0 0 1 1 1v8a1 1 0 1 1-2 0V6a1 1 0 0 1 1-1zm4 5a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1zM6 7.5a1 1 0 0 1 1 1V14a1 1 0 1 1-2 0V8.5a1 1 0 0 1 1-1z" fill="#fff" fill-rule="evenodd"/></svg>',name:"poll_circle_fill_green_20"}}i.d(t,{getIcon20PollCircleFillGreen:()=>_})},75387:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="question_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#question_circle_fill_green_20__a)"/><path d="M8.86 11.69c0-.41.1-.77.28-1.08.2-.3.52-.65.98-1.03.27-.23.48-.4.61-.54.13-.13.24-.27.33-.44s.13-.34.13-.54c0-.23-.06-.43-.18-.6-.11-.17-.27-.3-.47-.39a1.5 1.5 0 0 0-.64-.14c-.55 0-.99.24-1.32.7-.13.16-.25.27-.36.33-.1.07-.24.1-.4.1-.26 0-.46-.09-.6-.26S7 7.42 7 7.17c0-.24.06-.48.17-.71.12-.24.27-.45.47-.64.27-.26.62-.46 1.04-.6.42-.15.9-.22 1.45-.22.66 0 1.24.12 1.75.35.52.23.91.56 1.2 1 .28.44.42.96.42 1.56a2.7 2.7 0 0 1-.75 1.9c-.22.23-.5.48-.85.74-.31.25-.55.47-.7.64-.15.18-.28.4-.38.66-.1.2-.2.35-.27.46a.84.84 0 0 1-.75.37c-.3 0-.54-.1-.7-.28a1.04 1.04 0 0 1-.24-.71zm-.33 3.08c0-.25.06-.46.17-.65.11-.19.26-.33.45-.43.2-.1.4-.16.63-.16.23 0 .44.06.63.16.2.1.34.24.45.43.1.19.16.4.16.65 0 .24-.05.46-.16.64s-.26.34-.45.44c-.19.1-.4.15-.63.15-.23 0-.43-.05-.63-.15-.19-.1-.34-.25-.45-.44s-.17-.4-.17-.64z" fill="#fff"/></svg>',name:"question_circle_fill_green_20"}}i.d(t,{getIcon20QuestionCircleFillGreen:()=>_})},12939:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="question_circle_fill_violet_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#c48aff"/><stop offset="1" stop-color="#aa65f0"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#question_circle_fill_violet_20__a)"/><path d="M8.86 11.69c0-.41.1-.77.28-1.08.2-.3.52-.65.98-1.03.27-.23.48-.4.61-.54.13-.13.24-.27.33-.44s.13-.34.13-.54c0-.23-.06-.43-.18-.6-.11-.17-.27-.3-.47-.39a1.5 1.5 0 0 0-.64-.14c-.55 0-.99.24-1.32.7-.13.16-.25.27-.36.33-.1.07-.24.1-.4.1-.26 0-.46-.09-.6-.26S7 7.42 7 7.17c0-.24.06-.48.17-.71.12-.24.27-.45.47-.64.27-.26.62-.46 1.04-.6.42-.15.9-.22 1.45-.22.66 0 1.24.12 1.75.35.52.23.91.56 1.2 1 .28.44.42.96.42 1.56a2.7 2.7 0 0 1-.75 1.9c-.22.23-.5.48-.85.74-.31.25-.55.47-.7.64-.15.18-.28.4-.38.66-.1.2-.2.35-.27.46a.84.84 0 0 1-.75.37c-.3 0-.54-.1-.7-.28a1.04 1.04 0 0 1-.24-.71zm-.33 3.08c0-.25.06-.46.17-.65.11-.19.26-.33.45-.43.2-.1.4-.16.63-.16.23 0 .44.06.63.16.2.1.34.24.45.43.1.19.16.4.16.65 0 .24-.05.46-.16.64s-.26.34-.45.44c-.19.1-.4.15-.63.15-.23 0-.43-.05-.63-.15-.19-.1-.34-.25-.45-.44s-.17-.4-.17-.64z" fill="#fff"/></svg>',name:"question_circle_fill_violet_20"}}i.d(t,{getIcon20QuestionCircleFillViolet:()=>_})},78574:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="recent_circle_fill_yellow_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ffb73d"/><stop offset="1" stop-color="#ffa000"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#recent_circle_fill_yellow_20__a)"/><path clip-rule="evenodd" d="M10 4a1 1 0 0 1 1 1v4.59l2.7 2.7a1 1 0 0 1-1.4 1.42l-3-3A1 1 0 0 1 9 10V5a1 1 0 0 1 1-1z" fill="#fff" fill-rule="evenodd"/></svg>',name:"recent_circle_fill_yellow_20"}}i.d(t,{getIcon20RecentCircleFillYellow:()=>_})},9473:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="reply_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#reply_circle_fill_green_20__a)"/><path clip-rule="evenodd" d="M10 13.61a.65.65 0 0 1-1.07.5l-4.15-3.46a.85.85 0 0 1 0-1.3l4.15-3.46a.65.65 0 0 1 1.07.5v1.86a5.5 5.5 0 0 1 5.5 5.5v.02a8.47 8.47 0 0 0-5.5-2.02z" fill="#fff" fill-rule="evenodd"/></svg>',name:"reply_circle_fill_green_20"}}i.d(t,{getIcon20ReplyCircleFillGreen:()=>_})},97453:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="repost_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#repost_circle_fill_green_20__a)"/><path d="M12.52 4.25c.1 0 .22.03.3.1l2.88 2.07a.71.71 0 0 1 0 1.16l-2.88 2.07a.52.52 0 0 1-.82-.42V8H8.09c-.38 0-.52.04-.66.11s-.24.19-.32.32c-.06.13-.1.25-.1.53L7 9.09v2.82c0 .38.04.52.11.66s.19.24.32.32c.13.06.25.1.53.1l.13.01H12a1 1 0 0 1 .02 2H13 8.53c-1.23 0-1.68-.13-2.12-.37a2.5 2.5 0 0 1-1.04-1.04c-.24-.45-.37-.89-.37-2.12V9.53c0-1.23.13-1.68.37-2.12s.59-.8 1.04-1.04C6.85 6.13 7.3 6 8.53 6H12V4.77c0-.29.23-.52.52-.52z" fill="#fff"/></svg>',name:"repost_circle_fill_green_20"}}i.d(t,{getIcon20RepostCircleFillGreen:()=>_})},70953:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="rss_circle_fill_black_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#626466"/><stop offset="1" stop-color="#444647"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#rss_circle_fill_black_20__a)"/><path d="m5.58 5 .43.03a10.02 10.02 0 0 1 8.99 9.4.55.55 0 0 1-.55.57h-.9a.55.55 0 0 1-.56-.52A8.02 8.02 0 0 0 5.52 7 .55.55 0 0 1 5 6.45v-.9A.55.55 0 0 1 5.58 5zm0 3.36L6 8.4a6.69 6.69 0 0 1 5.65 6.02.55.55 0 0 1-.54.59h-.81a.55.55 0 0 1-.55-.5c0-.1-.02-.19-.03-.26a4.77 4.77 0 0 0-4.2-3.97.55.55 0 0 1-.51-.55v-.81a.55.55 0 0 1 .59-.55zM7.74 15H5.55a.55.55 0 0 1-.55-.55v-2.19a.55.55 0 0 1 .66-.54 3.34 3.34 0 0 1 2.62 2.64.55.55 0 0 1-.55.64z" fill="#fff"/></svg>',name:"rss_circle_fill_black_20"}}i.d(t,{getIcon20RssCircleFillBlack:()=>_})},49203:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="rss_circle_fill_yellow_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ffb73d"/><stop offset="1" stop-color="#ffa000"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#rss_circle_fill_yellow_20__a)"/><path d="m5.58 5 .43.03a10.02 10.02 0 0 1 8.99 9.4.55.55 0 0 1-.55.57h-.9a.55.55 0 0 1-.56-.52A8.02 8.02 0 0 0 5.52 7 .55.55 0 0 1 5 6.45v-.9A.55.55 0 0 1 5.58 5zm0 3.36L6 8.4a6.69 6.69 0 0 1 5.65 6.02.55.55 0 0 1-.54.59h-.81a.55.55 0 0 1-.55-.5c0-.1-.02-.19-.03-.26a4.77 4.77 0 0 0-4.2-3.97.55.55 0 0 1-.51-.55v-.81a.55.55 0 0 1 .59-.55zM7.74 15H5.55a.55.55 0 0 1-.55-.55v-2.19a.55.55 0 0 1 .66-.54 3.34 3.34 0 0 1 2.62 2.64.55.55 0 0 1-.55.64z" fill="#fff"/></svg>',name:"rss_circle_fill_yellow_20"}}i.d(t,{getIcon20RssCircleFillYellow:()=>_})},94635:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="services_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#services_circle_fill_blue_20__a)"/><path d="M7.65 10.75c.55 0 .76.06.96.17.2.1.36.27.47.47s.17.4.17.96v1.05c0 .55-.06.76-.17.96s-.27.36-.47.47c-.2.11-.4.17-.96.17H6.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S5 13.96 5 13.4v-1.05c0-.55.06-.76.17-.96s.27-.36.47-.47c.2-.11.4-.17.96-.17zm5.75 0c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.05c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17h-1.05c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47-.11-.2-.17-.4-.17-.96v-1.05c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17zm-.2-6.06c.23.07.41.17.8.56l.75.74c.4.4.5.58.56.8s.07.45 0 .67c-.07.22-.17.4-.56.8L14 9c-.4.4-.58.5-.8.56s-.45.07-.67 0-.4-.17-.8-.56L11 8.26c-.4-.4-.5-.58-.56-.8-.07-.22-.07-.45 0-.67s.17-.4.56-.8l.74-.74c.4-.4.58-.5.8-.56.22-.07.45-.07.67 0zM7.66 5c.55 0 .76.06.96.17.2.1.36.27.47.47s.17.4.17.96v1.05c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47s-.4.17-.96.17H6.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47-.11-.2-.17-.4-.17-.96V6.6c0-.55.06-.76.17-.96s.27-.36.47-.47c.2-.11.4-.17.96-.17z" fill="#fff"/></svg>',name:"services_circle_fill_blue_20"}}i.d(t,{getIcon20ServicesCircleFillBlue:()=>_})},91240:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#services_circle_fill_yellow_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" d="M7.65 10.75c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.05c0 .55-.06.76-.17.96a1.14 1.14 0 0 1-.47.47c-.2.11-.4.17-.96.17H6.6c-.55 0-.76-.06-.96-.17a1.14 1.14 0 0 1-.47-.47c-.11-.2-.17-.4-.17-.96v-1.05c0-.55.06-.76.17-.96a1.14 1.14 0 0 1 .47-.47c.2-.11.4-.17.96-.17h1.05Zm5.75 0c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.05c0 .55-.06.76-.17.96a1.14 1.14 0 0 1-.47.47c-.2.11-.4.17-.96.17h-1.05c-.55 0-.76-.06-.96-.17a1.14 1.14 0 0 1-.47-.47c-.11-.2-.17-.4-.17-.96v-1.05c0-.55.06-.76.17-.96a1.14 1.14 0 0 1 .47-.47c.2-.11.4-.17.96-.17h1.05Zm-.2-6.06c.23.07.41.17.8.56l.75.74c.4.4.5.58.56.8.07.22.07.45 0 .67-.07.22-.17.4-.56.8L14 9c-.4.4-.58.5-.8.56a1.14 1.14 0 0 1-.67 0c-.22-.07-.4-.17-.8-.56L11 8.26c-.4-.4-.5-.58-.56-.8a1.14 1.14 0 0 1 0-.67c.07-.22.17-.4.56-.8l.74-.74c.4-.4.58-.5.8-.56.22-.07.45-.07.67 0ZM7.66 5c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.05c0 .55-.06.76-.17.96a1.14 1.14 0 0 1-.47.47c-.2.11-.4.17-.96.17H6.6c-.55 0-.76-.06-.96-.17a1.14 1.14 0 0 1-.47-.47c-.11-.2-.17-.4-.17-.96V6.6c0-.55.06-.76.17-.96a1.14 1.14 0 0 1 .47-.47c.2-.11.4-.17.96-.17h1.05Z"/><defs><linearGradient id="services_circle_fill_yellow_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#FFB73D"/><stop offset="1" stop-color="#FFA000"/></linearGradient></defs></svg>',name:"services_circle_fill_yellow_20"}}i.d(t,{getIcon20ServicesCircleFillYellow:()=>_})},70685:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="song_circle_fill_violet_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#c48aff"/><stop offset="1" stop-color="#aa65f0"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#song_circle_fill_violet_20__a)"/><path d="M10.6 12.59c0 2.85-2.6 4.32-4.02 2.8-1.46-1.56-.06-4.14 2.88-4.3V7c-.01-1.17.52-2 1.52-2.36l.2-.07c.41-.13 1.12-.31 2.13-.55.32-.08.63.15.68.5l.01.09v1.28c0 .93-.55 1.76-1.36 2.06l-.16.06-1.88.54z" fill="#fff"/></svg>',name:"song_circle_fill_violet_20"}}i.d(t,{getIcon20SongCircleFillViolet:()=>_})},71563:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="statistic_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#statistic_circle_fill_blue_20__a)"/><path clip-rule="evenodd" d="M14 5a1 1 0 0 1 1 1v8a1 1 0 1 1-2 0V6a1 1 0 0 1 1-1zm-8 5a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1zm4-2.5a1 1 0 0 1 1 1V14a1 1 0 1 1-2 0V8.5a1 1 0 0 1 1-1z" fill="#fff" fill-rule="evenodd"/></svg>',name:"statistic_circle_fill_blue_20"}}i.d(t,{getIcon20StatisticCircleFillBlue:()=>_})},56769:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#story_fill_circle_yellow_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" d="M10 8.21a1.79 1.79 0 1 0 0 3.58 1.79 1.79 0 0 0 0-3.58Z"/><path fill="#fff" fill-rule="evenodd" d="M5 10c0-1.76 0-2.64.34-3.3A3.11 3.11 0 0 1 6.7 5.34C7.36 5 8.24 5 10 5c1.76 0 2.64 0 3.3.34a3.11 3.11 0 0 1 1.36 1.36c.34.66.34 1.54.34 3.3 0 1.76 0 2.64-.34 3.3a3.11 3.11 0 0 1-1.36 1.36c-.66.34-1.54.34-3.3.34-1.76 0-2.64 0-3.3-.34a3.11 3.11 0 0 1-1.36-1.36C5 12.64 5 11.76 5 10Zm2.14 0a2.86 2.86 0 1 0 5.72 0 2.86 2.86 0 0 0-5.72 0Z" clip-rule="evenodd"/><defs><linearGradient id="story_fill_circle_yellow_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#FFB73D"/><stop offset="1" stop-color="#FFA000"/></linearGradient></defs></svg>',name:"story_fill_circle_yellow_20"}}i.d(t,{getIcon20StoryFillCircleYellow:()=>_})},86497:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="story_reply_circle_fill_violet_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#c48aff"/><stop offset="1" stop-color="#aa65f0"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#story_reply_circle_fill_violet_20__a)"/><path clip-rule="evenodd" d="M8.93 6.26a1 1 0 0 1 .06 1.42L7.77 9H10a6 6 0 0 1 4.8 2.4 1 1 0 0 1-1.6 1.2A4 4 0 0 0 10 11H7.77L9 12.32a1 1 0 1 1-1.48 1.36l-2.75-3a1 1 0 0 1 0-1.36l2.75-3a1 1 0 0 1 1.42-.06z" fill="#fff" fill-rule="evenodd"/></svg>',name:"story_reply_circle_fill_violet_20"}}i.d(t,{getIcon20StoryReplyCircleFillViolet:()=>_})},71336:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#strip_circle_fill_red_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" fill-rule="evenodd" d="M5.5 8.2c0-1.12 0-1.68.22-2.1a2 2 0 0 1 .87-.88C7.02 5 7.58 5 8.7 5h2.6c1.12 0 1.68 0 2.1.22.38.19.69.5.88.87.22.43.22.99.22 2.11v3.6c0 1.12 0 1.68-.22 2.1a2 2 0 0 1-.87.88c-.43.22-.99.22-2.11.22H8.7c-1.12 0-1.68 0-2.1-.22a2 2 0 0 1-.88-.87c-.22-.43-.22-.99-.22-2.11V8.2ZM7 7.25c0-.23 0-.35.04-.44a.5.5 0 0 1 .27-.27c.1-.04.2-.04.44-.04s.35 0 .44.04a.5.5 0 0 1 .27.27c.04.1.04.2.04.44s0 .35-.04.44a.5.5 0 0 1-.27.27C8.1 8 8 8 7.75 8s-.35 0-.44-.04a.5.5 0 0 1-.27-.27C7 7.6 7 7.5 7 7.25Zm.04 5.06c-.04.09-.04.2-.04.44s0 .35.04.44a.5.5 0 0 0 .27.27c.1.04.2.04.44.04s.35 0 .44-.04a.5.5 0 0 0 .27-.27c.04-.09.04-.2.04-.44s0-.35-.04-.44a.5.5 0 0 0-.27-.27C8.1 12 8 12 7.75 12s-.35 0-.44.04a.5.5 0 0 0-.27.27ZM7 10c0-.23 0-.35.04-.44a.5.5 0 0 1 .27-.27c.1-.04.2-.04.44-.04s.35 0 .44.04a.5.5 0 0 1 .27.27c.04.09.04.2.04.44s0 .35-.04.44a.5.5 0 0 1-.27.27c-.09.04-.2.04-.44.04s-.35 0-.44-.04a.5.5 0 0 1-.27-.27C7 10.35 7 10.24 7 10Zm4.54-3.2c-.04.1-.04.22-.04.45s0 .35.04.44a.5.5 0 0 0 .27.27c.09.04.2.04.44.04s.35 0 .44-.04a.5.5 0 0 0 .27-.27c.04-.1.04-.2.04-.44s0-.35-.04-.44a.5.5 0 0 0-.27-.27c-.09-.04-.2-.04-.44-.04s-.35 0-.44.04a.5.5 0 0 0-.27.27Zm-.04 5.95c0-.23 0-.35.04-.44a.5.5 0 0 1 .27-.27c.09-.04.2-.04.44-.04s.35 0 .44.04a.5.5 0 0 1 .27.27c.04.09.04.2.04.44s0 .35-.04.44a.5.5 0 0 1-.27.27c-.09.04-.2.04-.44.04s-.35 0-.44-.04a.5.5 0 0 1-.27-.27c-.04-.09-.04-.2-.04-.44Zm.04-3.2c-.04.1-.04.22-.04.45s0 .35.04.44a.5.5 0 0 0 .27.27c.09.04.2.04.44.04s.35 0 .44-.04a.5.5 0 0 0 .27-.27c.04-.09.04-.2.04-.44s0-.35-.04-.44a.5.5 0 0 0-.27-.27c-.09-.04-.2-.04-.44-.04s-.35 0-.44.04a.5.5 0 0 0-.27.27Z" clip-rule="evenodd"/><defs><linearGradient id="strip_circle_fill_red_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#FF5263"/><stop offset="1" stop-color="#FF3347"/></linearGradient></defs></svg>',name:"strip_circle_fill_red_20"}}i.d(t,{getIcon20StripCircleFillRed:()=>_})},1354:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="text_live_circle_fill_green_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#50c750"/><stop offset="1" stop-color="#32b332"/></linearGradient><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 20a10 10 0 1 0 0-20 10 10 0 0 0 0 20z" fill="url(#text_live_circle_fill_green_20__a)"/><path d="M5 7a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-3v7a1 1 0 1 1-2 0V8H6a1 1 0 0 1-1-1z" fill="#fff"/></g></svg>',name:"text_live_circle_fill_green_20"}}i.d(t,{getIcon20TextLiveCircleFillGreen:()=>_})},20945:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#thumbs_up_circle_fill_green_20__a)" fill-rule="evenodd" d="M10 20a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" clip-rule="evenodd"/><path fill="#fff" fill-rule="evenodd" d="M8.5 8.07V12.8c0 .42 0 .63.08.79a.75.75 0 0 0 .33.33c.16.08.37.08.79.08h3.05c.93 0 1.4 0 1.77-.14a2.25 2.25 0 0 0 1.34-1.34c.14-.37.14-.84.14-1.77s0-1.4-.14-1.77a2.25 2.25 0 0 0-1.34-1.34c-.37-.14-.84-.14-1.77-.14h-1l.16-2.29A1.13 1.13 0 0 0 10.78 4a1.13 1.13 0 0 0-1.06.73l-1.12 3-.07.2a1 1 0 0 0-.02.14Zm-3.9-.2c-.1.18-.1.41-.1.88v4c0 .47 0 .7.1.88a.75.75 0 0 0 .28.27c.17.1.4.1.87.1s.7 0 .88-.1a.75.75 0 0 0 .27-.28c.1-.17.1-.4.1-.87v-4c0-.47 0-.7-.1-.88a.75.75 0 0 0-.28-.27c-.17-.1-.4-.1-.87-.1s-.7 0-.88.1a.75.75 0 0 0-.27.28Z" clip-rule="evenodd"/><defs><linearGradient id="thumbs_up_circle_fill_green_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#50C750"/><stop offset="1" stop-color="#32B332"/></linearGradient></defs></svg>',name:"thumbs_up_circle_fill_green_20"}}i.d(t,{getIcon20ThumbsUpCircleFillGreen:()=>_})},41337:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="user_circle_fill_blue_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#70b2ff"/><stop offset="1" stop-color="#5c9ce6"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#user_circle_fill_blue_20__a)"/><path d="M10 11c2.5 0 4.5 1 4.5 2.75v.29c0 .33-.03.45-.1.58a.68.68 0 0 1-.28.28c-.13.07-.25.1-.58.1H6.46c-.33 0-.45-.03-.58-.1a.68.68 0 0 1-.28-.28c-.07-.13-.1-.25-.1-.58v-.29C5.5 12 7.5 11 10 11zm0-6.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5z" fill="#fff"/></svg>',name:"user_circle_fill_blue_20"}}i.d(t,{getIcon20UserCircleFillBlue:()=>_})},79870:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="url(#users_3_circle_fill_blue_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" d="M10 10.34c1.73 0 3.75.68 3.75 2.67 0 .87-.22.99-.66.99H6.9c-.44 0-.66-.12-.66-1 0-1.98 2.1-2.66 3.75-2.66ZM10 6a1.73 1.73 0 1 1 0 3.46A1.73 1.73 0 0 1 10 6Zm5.23 7.25H17c.33 0 .49-.1.49-.75 0-1.48-1.48-2-2.75-2a4.19 4.19 0 0 0-.41.02c.54.63.89 1.46.89 2.49v.24Zm.79-4.95c0-.72-.57-1.3-1.27-1.3-.7 0-1.27.58-1.27 1.3 0 .72.57 1.3 1.27 1.3.7 0 1.27-.58 1.27-1.3ZM4.75 13.25a6.08 6.08 0 0 1 0-.24c0-1.04.37-1.86.91-2.5a4.66 4.66 0 0 0-.41-.01c-1.22 0-2.75.52-2.75 2 0 .65.16.75.48.75h1.77ZM6.52 8.3c0-.72-.57-1.3-1.27-1.3-.7 0-1.27.58-1.27 1.3 0 .72.57 1.3 1.27 1.3.7 0 1.27-.58 1.27-1.3Z"/><defs><linearGradient id="users_3_circle_fill_blue_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF"/><stop offset="1" stop-color="#5C9CE6"/></linearGradient></defs></svg>',name:"users_3_circle_fill_blue_20"}}i.d(t,{getIcon20Users3CircleFillBlue:()=>_})},91634:(e,t,i)=>{function _(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><linearGradient id="video_camera_circle_fill_red_20__a" gradientUnits="userSpaceOnUse" x1="-10" x2="10" y1="10" y2="30"><stop offset="0" stop-color="#ff5263"/><stop offset="1" stop-color="#ff3347"/></linearGradient><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0z" fill="url(#video_camera_circle_fill_red_20__a)"/><path d="M13 12.08c0 .67-.07.9-.2 1.15-.13.25-.32.44-.57.57-.24.13-.48.2-1.15.2H6.92c-.67 0-.9-.07-1.15-.2a1.36 1.36 0 0 1-.57-.57c-.13-.24-.2-.48-.2-1.15V7.92c0-.67.07-.9.2-1.15.13-.25.32-.44.57-.57.24-.13.48-.2 1.15-.2h4.16c.67 0 .9.07 1.15.2.25.13.44.32.57.57.13.24.2.48.2 1.15v.58l2.2-1.1a.55.55 0 0 1 .8.49v4.22a.55.55 0 0 1-.8.5L13 11.5z" fill="#fff"/></svg>',name:"video_camera_circle_fill_red_20"}}i.d(t,{getIcon20VideoCameraCircleFillRed:()=>_})},4878:(e,t,i)=>{function _(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="url(#votes_circle_fill_blue_20__a)" d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0Z"/><path fill="#fff" d="M14.98 12.72 15 13c0 1.66-2.24 3-5 3s-5-1.34-5-3c0-.1 0-.19.02-.28A7.29 7.29 0 0 0 10 14.5a7.3 7.3 0 0 0 4.96-1.76l.02-.02Zm0-3A1.83 1.83 0 0 1 15 10c0 1.66-2.24 3-5 3s-5-1.34-5-3c0-.1 0-.19.02-.28A7.29 7.29 0 0 0 10 11.5a7.3 7.3 0 0 0 4.96-1.76l.02-.02ZM10 4c2.76 0 5 1.34 5 3s-2.24 3-5 3-5-1.34-5-3 2.24-3 5-3Z"/><defs><linearGradient id="votes_circle_fill_blue_20__a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF"/><stop offset="1" stop-color="#5C9CE6"/></linearGradient></defs></svg>',name:"votes_circle_fill_blue_20"}}i.d(t,{getIcon20VotesCircleFillBlue:()=>_})},84137:(e,t,i)=>{i.d(t,{wrapAwayIfExternal:()=>r});i(83946);var _=i(61540),o=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${_.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function r(e,t){var i=decodeURIComponent(e);return/^\/[^/]/.test(i)||o.test(i)?e:"/away.php?to="+encodeURIComponent(i)+(t?"&utf=1":"")}},88379:(e,t,i)=>{i.d(t,{default:()=>l});i(75115);var _=i(61508),o=i(26271),r=i(61540),a=i(21295);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(e[_]=i[_])}return e},n.apply(this,arguments)}var s=o.browser.iphone||o.browser.ipad||o.browser.ipod;function l(e){this.started=!1,this.is_idle=!0,this.activeTimeStart=null,this.cbActiveB=this.cbActive.bind(this),this.cbInactiveB=this.cbInactive.bind(this),this.onVisiblityChange=this.onVisiblityChange.bind(this),this.opts=n({triggerEvents:"mousemove keydown",onIdleCb:function(){},onUnIdleCb:function(){},focusElement:e.element,element:null,idleTimeout:3e4},e)}function c(e,t,i){(0,r.isMvk)()?window.addEvent(e,t,i,{passive:!0}):window.addEvent(e,t,i)}function d(e,t,i){(0,r.isMvk)()?window.removeEvent(e,t,i,{passive:!0}):window.removeEvent(e,t,i)}function u(){return document.visibilityState||document.webkitVisibilityState}function f(){var e="visibilitychange";return document.visibilityState||(document.webkitVisibilityState?e+="webkit":e=""),e}window.extend(l.prototype,_.default.prototype),window.extend(l.prototype,{stop:function(){this.started=!1,d(this.opts.element,this.opts.triggerEvents,this.cbActiveB),(0,r.isMvk)()&&this._isTopLevel()&&f()&&d(document,f(),this.onVisiblityChange),(0,r.isMvk)()&&s||(d(this.opts.focusElement,"focus",this.cbActiveB),d(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.setIdleTo),clearTimeout(this.checkIdleCbTo),clearTimeout(this.sendCbTO),this.is_idle=!0,this.opts.parentManager&&this.opts.parentManager.off("idle",this.cbInactiveB)},idle:function(e){this.is_idle=!0,e||this.opts.onIdleCb(),this.emit("idle")},unidle:function(e){this.is_idle=!1,e||this.opts.onUnIdleCb(),this.emit("unidle")},start:function(){this.started=!0,!(0,r.isMvk)()&&o.browser.mobile||(this.is_idle=!this._isFocused(),this.opts.parentManager&&this.opts.parentManager.on("idle",this.cbInactiveB),(0,r.isMvk)()&&this._isTopLevel()&&f()&&c(document,f(),this.onVisiblityChange),(0,r.isMvk)()&&s||(c(this.opts.focusElement,"focus",this.cbActiveB),c(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.checkIdleCbTo),this.checkIdleCb(),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},checkIdleCb:function(){this.started&&(c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.setIdleTo),this.setIdleTo=setTimeout(this.cbInactiveB,this.opts.idleTimeout))},cbActive:function(){this.started&&(this.activeTimeStart=(new Date).getTime(),clearTimeout(this.setIdleTo),this.is_idle&&(this.is_idle=!1,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("unidle"),this.opts.onUnIdleCb&&this.opts.onUnIdleCb()}.bind(this),100)),d(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.checkIdleCbTo),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},cbInactive:function(){this.started&&(a.screenWakeLocker.isLocked()||(this.activeTimeStart=null,this.is_idle||(this.is_idle=!0,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("idle"),this.opts.onIdleCb&&this.opts.onIdleCb()}.bind(this),100)),clearTimeout(this.checkIdleCbTo),d(this.opts.element,this.opts.triggerEvents,this.cbActiveB),c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout)))},getActiveTime(){return!this.is_idle&&this.activeTimeStart?(new Date).getTime()-this.activeTimeStart:0},onVisiblityChange(){"visible"===u()?this.cbActiveB():this.cbInactiveB()},_isTopLevel(){var e=this.opts.focusElement;return e===window||e===document},_isFocused(){var e=this.opts.focusElement;if(this._isTopLevel()){var t=u();return"string"==typeof t&&"visible"===t}return document.activeElement===e}})},67784:(e,t,i)=>{i.d(t,{addDelegateEvent:()=>n,removeDelegateEvent:()=>s});i(91181),i(56997),i(96253),i(19371),i(98837),i(51876);var _=i(15544),o=i(49535),r=new window.Map;function a(e){var t=r.get(e.currentTarget);if(t){var i=t[e.type];if(i)for(var o,a=0;a<i.length;a++){var n=i[a],s=n[0],l=n[1],c=void 0;if((0,_.hasClass)(e.target,s)?c=l(e,e.target):(o=(0,_.gpeByClass)(s,e.target,e.currentTarget))&&(c=l(e,o)),!1===c)break}}}function n(e,t,i,_,n){var s=r.get(e);s||(r.set(e,{}),s=r.get(e));for(var l=t.split(" "),c=0;c<l.length;c++){var d=l[c];s[d]||(s[d]=[],n?(0,o.addEvent)(e,d,a,!1,!1,n):(0,o.addEvent)(e,d,a)),s[d].push([i,_])}}function s(e,t,i,_){var n=r.get(e);n&&(t.split(" ").forEach((t=>{n[t]&&(n[t]=n[t].filter((e=>e[0]!==i||e[1]!==_)),0===n[t].length&&(0,o.removeEvent)(e,t,a))})),0===Object.keys(n).map((e=>n[e].length)).reduce(((e,t)=>e+t))&&r.delete(e))}},80309:(e,t,i)=>{i.d(t,{getNativeOption:()=>r,createScroll:()=>l});var _=i(10124),o=i(3834);function r(e,t){return bodyNode[e]||document.documentElement[e]}class a{constructor(e,t){this.el=e,this.opts=t,this.module=(0,_.createModule)({handlers:(e,t)=>{e(window,"scroll",this.onScroll.bind(this)),e(window,"resize",this.resize.bind(this))}}),this.innerHeight=window.innerHeight,this.prevScroll=this.scrollTop()}update(){}resize(){this.innerHeight=window.innerHeight}scrollTop(e){if(void 0===e)return r("scrollTop",this.el);!function(e,t,i){"scrollTop"===e&&window.scrollTo(0,t)}("scrollTop",e,this.el)}contHeight(){return r("scrollHeight")}smoothScroll(e){(0,o.scrollToY)(e+this.scrollTop(),300)}getContainer(){return this.el}getScroller(){return null}scrollBottom(e){if(void 0===e)return this.contHeight()-this.scrollTop()-this.getScrollHeight();var t=this.contHeight()-e-this.getScrollHeight();this.scrollTop(t)}scrollBottomFixSave(e){var t=Date.now(),i=()=>{Date.now()-t<500&&this.scrollBottom(e),window.removeEventListener("scroll",i)};window.addEventListener("scroll",i),this.scrollBottom(e)}onScroll(e){var t=this.scrollTop(),i=t-this.prevScroll,_=this.contHeight();this.opts.onScroll&&this.opts.onScroll(-i,this),this.opts.scrollChange&&this.opts.scrollChange(t),this.opts.more&&_-t<2*this.innerHeight&&this.opts.more(this),this.prevScroll=t}getScrollHeight(){return this.innerHeight}destroy(){(0,_.destroyModule)(this.module)}}class n{constructor(e,t){this.prevTop=0,this.scroll=new uiScroll(e,{hidden:void 0===t.hidden||t.hidden,shadows:t.shadows,stopScrollPropagation:!1,theme:t.scrollTheme,onmore:()=>t.more&&t.more(this),onscroll:e=>{var i=this.scrollTop(),_=this.prevTop-i;this.prevTop=i,t.scrollChange&&t.scrollChange(i),t.onScroll&&t.onScroll(_,this)}})}update(){this.scroll.update("sync")}scrollTop(e){return void 0!==e?this.scroll.scrollTop(e):this.scroll.data.scrollTop}getContainer(){return this.scroll.content}getScroller(){return this.scroll.scroller}contHeight(){return this.scroll.data.scrollHeight}smoothScroll(e){this.scroll.scrollTop(this.scrollTop()+e,300)}scrollBottom(e){return void 0!==e?this.scroll.scrollBottom(e):this.scroll.data.scrollBottom}scrollBottomFixSave(e){var t=Date.now();this.scroll.emitter.addOnceListener("resize",(()=>{Date.now()-t<500&&this.scroll&&this.scrollBottom(e)})),this.scrollBottom(e)}getScrollHeight(){return this.scroll.data.viewportHeight}destroy(){this.scroll.destroy()}}class s{constructor(e,t){this.el=e}update(){}getContainer(){return this.el}getScroller(){return null}scrollTop(e){return 0}contHeight(){return 0}smoothScroll(e){}scrollBottom(e){return 0}scrollBottomFixSave(e){}getScrollHeight(){return 0}destroy(){}}function l(e,t){return t.noScroll?new s(e):t.nativeScroll?new a(e,t):new n(e,t)}},18793:(e,t,i)=>{i.d(t,{Scroll:()=>n});i(75115),i(91181),i(56997),i(96253);var _=i(85893),o=(i(67294),i(32821)),r=i(80309);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(e[_]=i[_])}return e},a.apply(this,arguments)}var n=e=>{var t=e.children,i=function(e,t){if(null==e)return{};var i,_,o={},r=Object.keys(e);for(_=0;_<r.length;_++)i=r[_],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,["children"]);return(0,_.jsx)(o.ScrollContext.Provider,{value:{createScroll:r.createScroll},children:(0,_.jsx)(o.Scroll,a({},i,{children:t}))})};n.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null}},67537:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(75115),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21466),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(59357),core_js_modules_es6_array_filter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(98837),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(40851),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(96253),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(19371),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(51876),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(87481),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(26271),_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(66890),_web_lib_lang__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(86067),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(59121),_web_lib_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(82452),_web_lib_fx__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(35676),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(79957),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(49535),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(95724),_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(15544),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(76270),_shared_lib_idle_manager__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(88379),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(68040),_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(40906),_longpoll_singleton__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(59483),_web_components_im_ServerSentEvents_DEPRECATEDLongpollAdapter__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(84683),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(19331),_shared_lib_site__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(61540),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(93560),_shared_audio_utils_wrapAudioPlay__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(2227),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(54612),_web_market_HappySanta__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(97332),_shared_im_request__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(87294),_shared_im_EventQueue__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(67181),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(59397),_shared_im_longpoll_events__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(63825),_web_messenger_helpers_events__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(45523),_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(91525),_notifier_utils__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(16850),_vkontakte_internal_calls_constants__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(73674),_icons_desktop_getIcon20RepostCircleFillGreen__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(97453),_icons_desktop_getIcon20ClipCircleFillViolet__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(57663),_icons_desktop_getIcon20CheckCircleFillYellow__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(91451),_icons_desktop_getIcon20LikeCircleFillRed__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(40884),_icons_desktop_getIcon20PodcastCircleFillRed__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(96710),_icons_desktop_getIcon20PollCircleFillGreen__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(27031),_icons_desktop_getIcon20VideoCameraCircleFillRed__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(91634),_icons_desktop_getIcon20EditCircleFillBlue__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(98100),_icons_desktop_getIcon20AddCircleFillBlue__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(35703),_icons_desktop_getIcon20MailCircleFillBlue__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(26642),_icons_desktop_getIcon20QuestionCircleFillViolet__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(12939),_icons_desktop_getIcon20UserCircleFillBlue__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(41337),_icons_desktop_getIcon20StoryReplyCircleFillViolet__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(86497),_icons_desktop_getIcon20QuestionCircleFillGreen__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(75387),_icons_desktop_getIcon20SongCircleFillViolet__WEBPACK_IMPORTED_MODULE_60__=__webpack_require__(70685),_icons_desktop_getIcon20CameraCircleFillGreen__WEBPACK_IMPORTED_MODULE_61__=__webpack_require__(9165),_icons_desktop_getIcon20RssCircleFillYellow__WEBPACK_IMPORTED_MODULE_62__=__webpack_require__(49203),_icons_desktop_getIcon20RssCircleFillBlack__WEBPACK_IMPORTED_MODULE_63__=__webpack_require__(70953),_icons_desktop_getIcon20GiftCircleFillYellow__WEBPACK_IMPORTED_MODULE_64__=__webpack_require__(87759),_icons_desktop_getIcon20GiftCircleFillRed__WEBPACK_IMPORTED_MODULE_65__=__webpack_require__(73853),_icons_desktop_getIcon20CakeCircleFillPurple__WEBPACK_IMPORTED_MODULE_66__=__webpack_require__(66688),_icons_desktop_getIcon20GameCircleFillBlue__WEBPACK_IMPORTED_MODULE_68__=__webpack_require__(62039),_icons_desktop_getIcon20MentionCircleFillBlue__WEBPACK_IMPORTED_MODULE_69__=__webpack_require__(34402),_icons_desktop_getIcon20CalendarCircleFillRed__WEBPACK_IMPORTED_MODULE_70__=__webpack_require__(56543),_icons_desktop_getIcon20MessageCircleFillBlue__WEBPACK_IMPORTED_MODULE_71__=__webpack_require__(92090),_icons_desktop_getIcon20CommentCircleFillGreen__WEBPACK_IMPORTED_MODULE_72__=__webpack_require__(93534),_icons_desktop_getIcon20DiscussionsCircleFillBlue__WEBPACK_IMPORTED_MODULE_73__=__webpack_require__(93965),_icons_desktop_getIcon20BoxCircleFillBlue__WEBPACK_IMPORTED_MODULE_74__=__webpack_require__(76181),_icons_desktop_getIcon20MoneyTransferCircleFillTurquoise__WEBPACK_IMPORTED_MODULE_75__=__webpack_require__(70039),_icons_desktop_getIcon20MoneyTransferCircleFillRed__WEBPACK_IMPORTED_MODULE_76__=__webpack_require__(13803),_icons_desktop_getIcon20CancelCircleFillRed__WEBPACK_IMPORTED_MODULE_77__=__webpack_require__(6962),_icons_desktop_getIcon20MoneyRequestCircleFillBlue__WEBPACK_IMPORTED_MODULE_78__=__webpack_require__(61315),_icons_desktop_getIcon20CheckCircleFillGreen__WEBPACK_IMPORTED_MODULE_80__=__webpack_require__(11803),_icons_desktop_getIcon20ServicesCircleFillBlue__WEBPACK_IMPORTED_MODULE_81__=__webpack_require__(94635),_icons_desktop_getIcon20RecentCircleFillYellow__WEBPACK_IMPORTED_MODULE_84__=__webpack_require__(78574),_icons_desktop_getIcon20StatisticCircleFillBlue__WEBPACK_IMPORTED_MODULE_85__=__webpack_require__(71563),_icons_desktop_getIcon20DonateCircleFillYellow__WEBPACK_IMPORTED_MODULE_86__=__webpack_require__(82251),_icons_desktop_getIcon20TextLiveCircleFillGreen__WEBPACK_IMPORTED_MODULE_87__=__webpack_require__(1354),_icons_desktop_getIcon20LightbulbCircleFillYellow__WEBPACK_IMPORTED_MODULE_88__=__webpack_require__(36817),_icons_desktop_getIcon20MessageUnreadCircleFillRed__WEBPACK_IMPORTED_MODULE_89__=__webpack_require__(27180),_icons_desktop_getIcon20AdvertisingCircleFillRed__WEBPACK_IMPORTED_MODULE_90__=__webpack_require__(69945),_icons_desktop_getIcon20AddCircleFillGreen__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(69224),_icons_desktop_getIcon20StripCircleFillRed__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(71336),_icons_desktop_getIcon20VotesCircleFillBlue__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(4878),_icons_desktop_getIcon20ReplyCircleFillGreen__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(9473),_icons_desktop_getIcon20StoryFillCircleYellow__WEBPACK_IMPORTED_MODULE_67__=__webpack_require__(56769),_icons_desktop_getIcon20CheckCircleFillTurquoise__WEBPACK_IMPORTED_MODULE_79__=__webpack_require__(9754),_icons_desktop_getIcon20ServicesCircleFillYellow__WEBPACK_IMPORTED_MODULE_82__=__webpack_require__(91240),_icons_desktop_getIcon20ThumbsUpCircleFillGreen__WEBPACK_IMPORTED_MODULE_83__=__webpack_require__(20945),_icons_desktop_getIcon20Users3CircleFillBlue__WEBPACK_IMPORTED_MODULE_91__=__webpack_require__(79870),_icons_desktop_getIcon20FireCircleFillRed__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(29009),_shared_ranges__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(48743),_web_notifier_sound__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(24817);function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(e[_]=i[_])}return e},_extends.apply(this,arguments)}var ACTIVE_TAB_SWITCH_SERVER_TIMEOUT=_shared_lib_browser__WEBPACK_IMPORTED_MODULE_9__.browser.safari?3e3:1e4,LC_SERVER_SWITCH_TO_ACTIVE_FLAG="lc_server_switch_to_active_flag",NOTIFICATION_FADE_TIMEOUT=7e3,NOTIFICATION_FADE_TIMEOUT_ACCESSIBILITY_MODE=35e3,NOTIFICATION_FADE_TIMEOUT_AFTER_UNFREEZE=5e3,NOTIFICATION_FADE_TIMEOUT_ACCESSIBILITY_MODE_AFTER_UNFREEZE=3e4,IS_SSE_ENABLED=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_sse_longpoll"),isMediaStoppedByCalls=!1,errorTimeout={initialValue:1,get:()=>window.curNotifier.error_timeout||errorTimeout.initialValue,set:e=>{window.curNotifier.error_timeout=e},reset:()=>{window.curNotifier.error_timeout=errorTimeout.initialValue},increase:()=>{window.curNotifier.error_timeout<64&&(window.curNotifier.error_timeout*=2)},increaseMore:()=>{window.curNotifier.error_timeout<256&&(window.curNotifier.error_timeout*=2)},decrease:()=>{window.curNotifier.error_timeout=Math.max(1,errorTimeout.get()/1.5)}};function showEventThumb(e){var t="";if(e.author_photo){var i;t="video_process_ready"===e.type?`<div class="notifier_video_thumb" style="background-image: url('${Notifier.fixPhoto(e.author_photo)}')"></div>`:`<img alt="" src="${Notifier.fixPhoto(e.author_photo)}" class="notifier_image" />`;var _=null==(i=e.icon_custom)?void 0:i.image_url;if(_)t=`<div class="feedback_photo_icon_custom" style="background-image: url('${(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_33__.escape)(_)}')"></div>`+t;else if(e.icon_type){var o=getSvgByIconType(e.icon_type);t=`<div class="feedback_photo_icon ${o&&"display_block"}">${o}</div>`+t}e.author_link&&(t=`<a href="${e.author_link}">${t}</a>`),t=`<div class="notifier_image_wrap">${t}</div>`}return t}function getSvgByIconType(e){switch(e){case"repost":case"mail_mention":return(0,_icons_desktop_getIcon20RepostCircleFillGreen__WEBPACK_IMPORTED_MODULE_41__.getIcon20RepostCircleFillGreen)().icon;case"interesting":return(0,_icons_desktop_getIcon20FireCircleFillRed__WEBPACK_IMPORTED_MODULE_42__.getIcon20FireCircleFillRed)().icon;case"clips":return(0,_icons_desktop_getIcon20ClipCircleFillViolet__WEBPACK_IMPORTED_MODULE_43__.getIcon20ClipCircleFillViolet)().icon;case"friends":return(0,_icons_desktop_getIcon20AddCircleFillGreen__WEBPACK_IMPORTED_MODULE_44__.getIcon20AddCircleFillGreen)().icon;case"suggested_post_published":return(0,_icons_desktop_getIcon20CheckCircleFillYellow__WEBPACK_IMPORTED_MODULE_45__.getIcon20CheckCircleFillYellow)().icon;case"like":return(0,_icons_desktop_getIcon20LikeCircleFillRed__WEBPACK_IMPORTED_MODULE_46__.getIcon20LikeCircleFillRed)().icon;case"podcast":return(0,_icons_desktop_getIcon20PodcastCircleFillRed__WEBPACK_IMPORTED_MODULE_47__.getIcon20PodcastCircleFillRed)().icon;case"voting":return(0,_icons_desktop_getIcon20PollCircleFillGreen__WEBPACK_IMPORTED_MODULE_48__.getIcon20PollCircleFillGreen)().icon;case"live":return(0,_icons_desktop_getIcon20VideoCameraCircleFillRed__WEBPACK_IMPORTED_MODULE_49__.getIcon20VideoCameraCircleFillRed)().icon;case"video_playlists":return(0,_icons_desktop_getIcon20StripCircleFillRed__WEBPACK_IMPORTED_MODULE_50__.getIcon20StripCircleFillRed)().icon;case"wall":return(0,_icons_desktop_getIcon20EditCircleFillBlue__WEBPACK_IMPORTED_MODULE_51__.getIcon20EditCircleFillBlue)().icon;case"follow":return(0,_icons_desktop_getIcon20AddCircleFillBlue__WEBPACK_IMPORTED_MODULE_52__.getIcon20AddCircleFillBlue)().icon;case"invite_group":return(0,_icons_desktop_getIcon20MailCircleFillBlue__WEBPACK_IMPORTED_MODULE_53__.getIcon20MailCircleFillBlue)().icon;case"question":case"story_question":return(0,_icons_desktop_getIcon20QuestionCircleFillViolet__WEBPACK_IMPORTED_MODULE_54__.getIcon20QuestionCircleFillViolet)().icon;case"friend_found":return(0,_icons_desktop_getIcon20UserCircleFillBlue__WEBPACK_IMPORTED_MODULE_55__.getIcon20UserCircleFillBlue)().icon;case"transfer_votes":return(0,_icons_desktop_getIcon20VotesCircleFillBlue__WEBPACK_IMPORTED_MODULE_56__.getIcon20VotesCircleFillBlue)().icon;case"reply":return(0,_icons_desktop_getIcon20ReplyCircleFillGreen__WEBPACK_IMPORTED_MODULE_57__.getIcon20ReplyCircleFillGreen)().icon;case"story_reply":return(0,_icons_desktop_getIcon20StoryReplyCircleFillViolet__WEBPACK_IMPORTED_MODULE_58__.getIcon20StoryReplyCircleFillViolet)().icon;case"story_question_answer":return(0,_icons_desktop_getIcon20QuestionCircleFillGreen__WEBPACK_IMPORTED_MODULE_59__.getIcon20QuestionCircleFillGreen)().icon;case"story_music":return(0,_icons_desktop_getIcon20SongCircleFillViolet__WEBPACK_IMPORTED_MODULE_60__.getIcon20SongCircleFillViolet)().icon;case"photo_tag":return(0,_icons_desktop_getIcon20CameraCircleFillGreen__WEBPACK_IMPORTED_MODULE_61__.getIcon20CameraCircleFillGreen)().icon;case"new_post":return(0,_icons_desktop_getIcon20RssCircleFillYellow__WEBPACK_IMPORTED_MODULE_62__.getIcon20RssCircleFillYellow)().icon;case"private_post":return(0,_icons_desktop_getIcon20RssCircleFillBlack__WEBPACK_IMPORTED_MODULE_63__.getIcon20RssCircleFillBlack)().icon;case"gift":case"recent":return(0,_icons_desktop_getIcon20GiftCircleFillYellow__WEBPACK_IMPORTED_MODULE_64__.getIcon20GiftCircleFillYellow)().icon;case"birthday":return(0,_icons_desktop_getIcon20GiftCircleFillRed__WEBPACK_IMPORTED_MODULE_65__.getIcon20GiftCircleFillRed)().icon;case"birthday_cake":return(0,_icons_desktop_getIcon20CakeCircleFillPurple__WEBPACK_IMPORTED_MODULE_66__.getIcon20CakeCircleFillPurple)().icon;case"advice":return(0,_icons_desktop_getIcon20StoryFillCircleYellow__WEBPACK_IMPORTED_MODULE_67__.getIcon20StoryFillCircleYellow)().icon;case"invite_app":return(0,_icons_desktop_getIcon20GameCircleFillBlue__WEBPACK_IMPORTED_MODULE_68__.getIcon20GameCircleFillBlue)().icon;case"mention":return(0,_icons_desktop_getIcon20MentionCircleFillBlue__WEBPACK_IMPORTED_MODULE_69__.getIcon20MentionCircleFillBlue)().icon;case"event_unify":return(0,_icons_desktop_getIcon20CalendarCircleFillRed__WEBPACK_IMPORTED_MODULE_70__.getIcon20CalendarCircleFillRed)().icon;case"message_request":return(0,_icons_desktop_getIcon20MessageCircleFillBlue__WEBPACK_IMPORTED_MODULE_71__.getIcon20MessageCircleFillBlue)().icon;case"comment":return(0,_icons_desktop_getIcon20CommentCircleFillGreen__WEBPACK_IMPORTED_MODULE_72__.getIcon20CommentCircleFillGreen)().icon;case"discussions":return(0,_icons_desktop_getIcon20DiscussionsCircleFillBlue__WEBPACK_IMPORTED_MODULE_73__.getIcon20DiscussionsCircleFillBlue)().icon;case"_delivery":case"market_order_status_delivering":return(0,_icons_desktop_getIcon20BoxCircleFillBlue__WEBPACK_IMPORTED_MODULE_74__.getIcon20BoxCircleFillBlue)().icon;case"transfer_money":case"money_complete":return(0,_icons_desktop_getIcon20MoneyTransferCircleFillTurquoise__WEBPACK_IMPORTED_MODULE_75__.getIcon20MoneyTransferCircleFillTurquoise)().icon;case"money_decline":return(0,_icons_desktop_getIcon20MoneyTransferCircleFillRed__WEBPACK_IMPORTED_MODULE_76__.getIcon20MoneyTransferCircleFillRed)().icon;case"transfer_money_cancelled":case"invite_group_fired":case"ads_fail":case"market_order_status_canceled":return(0,_icons_desktop_getIcon20CancelCircleFillRed__WEBPACK_IMPORTED_MODULE_77__.getIcon20CancelCircleFillRed)().icon;case"request_money":return(0,_icons_desktop_getIcon20MoneyRequestCircleFillBlue__WEBPACK_IMPORTED_MODULE_78__.getIcon20MoneyRequestCircleFillBlue)().icon;case"ads_ok":return(0,_icons_desktop_getIcon20CheckCircleFillTurquoise__WEBPACK_IMPORTED_MODULE_79__.getIcon20CheckCircleFillTurquoise)().icon;case"friend_accepted":case"approved":case"market_order_status_completed":case"invite_group_accepted":return(0,_icons_desktop_getIcon20CheckCircleFillGreen__WEBPACK_IMPORTED_MODULE_80__.getIcon20CheckCircleFillGreen)().icon;case"services":return(0,_icons_desktop_getIcon20ServicesCircleFillBlue__WEBPACK_IMPORTED_MODULE_81__.getIcon20ServicesCircleFillBlue)().icon;case"service_installation":return(0,_icons_desktop_getIcon20ServicesCircleFillYellow__WEBPACK_IMPORTED_MODULE_82__.getIcon20ServicesCircleFillYellow)().icon;case"service_recommend":return(0,_icons_desktop_getIcon20ThumbsUpCircleFillGreen__WEBPACK_IMPORTED_MODULE_83__.getIcon20ThumbsUpCircleFillGreen)().icon;case"market_order_status_collecting":return(0,_icons_desktop_getIcon20RecentCircleFillYellow__WEBPACK_IMPORTED_MODULE_84__.getIcon20RecentCircleFillYellow)().icon;case"engagement_stats":return(0,_icons_desktop_getIcon20StatisticCircleFillBlue__WEBPACK_IMPORTED_MODULE_85__.getIcon20StatisticCircleFillBlue)().icon;case"donut":return(0,_icons_desktop_getIcon20DonateCircleFillYellow__WEBPACK_IMPORTED_MODULE_86__.getIcon20DonateCircleFillYellow)().icon;case"text_live":return(0,_icons_desktop_getIcon20TextLiveCircleFillGreen__WEBPACK_IMPORTED_MODULE_87__.getIcon20TextLiveCircleFillGreen)().icon;case"market_native_shop_release":return(0,_icons_desktop_getIcon20LightbulbCircleFillYellow__WEBPACK_IMPORTED_MODULE_88__.getIcon20LightbulbCircleFillYellow)().icon;case"message_reminders":return(0,_icons_desktop_getIcon20MessageUnreadCircleFillRed__WEBPACK_IMPORTED_MODULE_89__.getIcon20MessageUnreadCircleFillRed)().icon;case"feed_promo":return(0,_icons_desktop_getIcon20AdvertisingCircleFillRed__WEBPACK_IMPORTED_MODULE_90__.getIcon20AdvertisingCircleFillRed)().icon;case"group":return(0,_icons_desktop_getIcon20Users3CircleFillBlue__WEBPACK_IMPORTED_MODULE_91__.getIcon20Users3CircleFillBlue)().icon;default:return null}}function showEventAddPhoto(e){var t="";return e.add_photo&&(t=`<div class="notifier_add_image_wrap"><img src="${e.add_photo}" class="notifier_add_image"></div>`),t}function setHooksForLoadingCalls(e){var t;if(!1!==(null==(t=window.Calls)?void 0:t.initialized)){var i={},_=t=>function(){for(var i=arguments.length,_=new Array(i),o=0;o<i;o++)_[o]=arguments[o];return loadCallsModule().then((()=>{var t;return null==(t=window.Calls)||null==t.init?void 0:t.init(e)})).then((()=>{var e,i;return null==(e=(i=window.Calls)[t])?void 0:e.call(i,..._)}))};i.call=_("call"),i.startGroupCall=_("startGroupCall"),i.startCall=_("startCall"),i.acceptCall=_("acceptCall"),i.joinCallByLink=_("joinCallByLink"),i.showJoinPopup=_("showJoinPopup"),i.showCallByNamePopup=_("showCallByNamePopup"),i.showCreateCallByLinkPopup=_("showCreateCallByLinkPopup"),i.showPlanCalendarEventPopup=_("showPlanCalendarEventPopup"),i.showStartCallModal=_("showStartCallModal"),i.showHistoryScreen=_("showHistoryScreen"),i.initArgs=e,window.Calls=i;var o=window.Notifier.getLpInstance();o&&o.onData((function t(){var i;if(null==(i=window.Calls)?void 0:i.initialized)o.offData(t);else{for(var _=arguments.length,r=new Array(_),a=0;a<_;a++)r[a]=arguments[a];r.forEach((i=>{if(i.type===_vkontakte_internal_calls_constants__WEBPACK_IMPORTED_MODULE_37__.INCOMING_CALL)return o.offData(t),loadCallsModule().then((()=>{var t;return null==(t=window.Calls)?void 0:t.init(e)})).then((()=>window.Calls.handleEvent(i)))}))}}))}else window.Calls.init(e)}function loadVKUIModule(){return new Promise((e=>window.stManager.add(["vkui.css"],(()=>e()))))}function loadCallsModule(){return new Promise((e=>{window.stManager.add([window.jsc("web/calls.js"),"vkui.css","calls.css"],(()=>{e()}))}))}function loadReforgedFastchatModule(){var e=ls.get("stickers_keywords"),t=e&&e.time?Math.floor(e.time/1e3):0;return ajax.post("al_im.php",{act:"a_get_fast_chat",cache_time:t},{onDone:e=>{e.emoji_stickers&&(window.emojiStickers=e.emoji_stickers),window.Emoji&&Emoji.updateTabs(),e.autoplay_animations&&window.StickersSettings.setAutoplay(e.autoplay_animations)},onFail:()=>!0}),window.stManager.add([window.jsc("web/ui_media_selector.js"),"vkui.css","ui_media_selector.css",window.jsc("web/emoji.js")]).then((()=>Promise.all([__webpack_require__.e(75514),__webpack_require__.e(24509),__webpack_require__.e(56990),__webpack_require__.e(40885),__webpack_require__.e(49685),__webpack_require__.e(38288),__webpack_require__.e(68592),__webpack_require__.e(85719),__webpack_require__.e(83040),__webpack_require__.e(49154),__webpack_require__.e(97474),__webpack_require__.e(90729),__webpack_require__.e(79542),__webpack_require__.e(70306),__webpack_require__.e(25077),__webpack_require__.e(68069),__webpack_require__.e(87595),__webpack_require__.e(23299),__webpack_require__.e(99138),__webpack_require__.e(76597),__webpack_require__.e(93417),__webpack_require__.e(8719),__webpack_require__.e(35061),__webpack_require__.e(5360),__webpack_require__.e(85780)]).then(__webpack_require__.bind(__webpack_require__,91631))))}window.curNotifier||(window.curNotifier={addQueues:{},recvClbks:{},recvData:{},onConnectionId:[]}),window.Notifier={debug:!1,init:function(e){var t;if(!window.curNotifier||!curNotifier.connection_id){if(Notifier.notificationsGc(),window.curNotifier=_extends({},e,{q_events:[],q_prior_events:[],q_shown:[],q_closed:[],q_max:3,q_idle_max:5,negotiations:{},currentIm:{},uiNotifications:[],browser_shown:{},done_events:{},addQueues:curNotifier.addQueues||{},recvClbks:curNotifier.recvClbks||{},recvData:curNotifier.recvData||{},error_timeout:errorTimeout.initialValue,request_timeout:1e3,sound:new _web_notifier_sound__WEBPACK_IMPORTED_MODULE_39__.Sound("mp3/bb1"),sound_im:new _web_notifier_sound__WEBPACK_IMPORTED_MODULE_39__.Sound("mp3/bb2"),sound_im_current:new _web_notifier_sound__WEBPACK_IMPORTED_MODULE_39__.Sound("mp3/bb3"),onConnectionId:[],showDoneBoxLastId:-1}),!this.initFrameTransport())return!1;this.initIdleMan(),this.initCommunityQueues(),IS_SSE_ENABLED||(0,_longpoll_singleton__WEBPACK_IMPORTED_MODULE_23__.lpSingletonOnTabInitialLoaded)(),(curNotifier.cont=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("notifiers_wrap"))||bodyNode.insertBefore(curNotifier.cont=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ce)("div",{id:"notifiers_wrap",className:"fixed"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("page_wrap"));if(loadVKUIModule(),!(null==(t=window.Calls)?void 0:t.initialized)&&!e.callsIsForbidden){var i,_={callsCredentials:e.callsCredentials,imHash:e.imHash,participantLimit:e.participantLimit,callsOkStaging:e.callsOkStaging,pushToTalkEnabled:e.callsPushToTalkEnabled,toggles:{debugLog:e.callsLogging,incomingCall:e.CallsIncomingCall,allowBanParticipant:e.callsAllowBanParticipant,showFeedbackScreen:e.callsFeedbackScreenEnabled,enableVideoSlots:e.callsVideoSlotsEnabled,videoSlotsCount:e.videoSlotsCount,browserWarnings:e.browserWarnings,allowCallByName:e.callsAllowCallByName,enableScreenTrack:e.callsEnableScreenTrack,enableProducerScreenTrack:e.callsEnableProducerScreenTrack,allowWaitingHall:e.callsAllowWaitingHall,allowPushToTalk:e.callsAllowPushToTalk,badNetwork:e.callsBadNetwork,badNetworkP2P:e.callsBadNetworkP2P,desktopAppNotification:e.callsDesktopAppNotification,lazyLoading:e.callsLazyLoading,enableDomainBender:e.callsEnableDomainBender,enableMultipleDevices:e.callsEnableMultipleDevices,enableParticipantListChunk:e.callsEnableParticipantListChunk,enableServerAudioRed:e.callsEnableServerAudioRed,enableP2PAudioRed:e.callsEnableP2PAudioRed,enableTranslationSplit:e.callsEnableTranslationSplit,enableMovieShare:e.callsEnableMovieShare,enableNavChangeCallCollapse:e.callsEnableNavChangeCallCollapse,enableCustomScreenSharePacketSize:e.callsEnableCustomScreenSharePacketSize,customScreenSharePacketSize:e.callsCustomScreenSharePacketSize,enableSpsPpsIdrInKeyframe:e.callsEnableSpsPpsIdrInKeyframe},onError:e=>{var t=e.msg;return t&&(0,_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_36__.logError)(t),t&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_29__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_error"),t)},onBeforeCallStart:()=>{Notifier.pauseGlobalMedia()},onAfterCallFinish:()=>{Notifier.resumeGlobalMedia()},tabIsMaster:()=>Notifier.tabIsMaster(),isFriend:e=>!!(window.curFastChat&&window.curFastChat.friends&&window.curFastChat.friends[e+"_"])},o=/(firefox)\/(\d+)\.(\d+)/.test(navigator.userAgent.toLowerCase());if(e.callsLazyLoading&&!o)setHooksForLoadingCalls(_);else window.Calls=null!=(i=window.Calls)?i:{},window.Calls.initArgs=_,window.requestIdleCallback((()=>{loadCallsModule().then((()=>{var e;null==(e=window.Calls)||null==e.init||e.init(_)}))}))}if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_longpoll_unread_counter")){var r=Notifier.getLpInstance();r&&r.onData(Notifier.handleUnreadCountChange)}}},handleUnreadCountChange(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];(0,_web_messenger_helpers_events__WEBPACK_IMPORTED_MODULE_35__.compactCounterEvents)(t).forEach((e=>{if(e.type===_shared_im_longpoll_events__WEBPACK_IMPORTED_MODULE_34__.UNREAD_COUNT){var t=e.showOnlyNotMuted,i=e.countNotMuted,_=e.count,o=t?i:_;(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("msg",o,"","",i>0)}}))},initCommunityQueues:function(e){var t=ls.get("im_m_comms_key"),i=t&&t.split?t.split(";"):[];if("empty"===i[0]&&i[1]&&Date.now()-i[1]<6e4?t="empty":"empty"===i[0]&&(t=!1),t)return Notifier.proccessCommunityQueues(t,e||0);ajax.post("al_im.php",{act:"a_get_comms_key"},{onDone:function(t){"empty"===t?t+=";"+Date.now():Notifier.proccessCommunityQueues(t,e||0),ls.set("im_m_comms_key",t)},onFail:function(){return!0}})},notificationsGc:function(){curNotifier.uiGcTo=setTimeout((function(){for(var e=curNotifier.uiNotifications,t=[],i=0;i<e.length;i++){var _=e[i];Date.now()-_[1]>1e4?_[0].close():t.push(_)}curNotifier.uiNotifications=t,Notifier.notificationsGc()}),5e3)},resetCommConnection:function(e){var t=ls.get("im_m_comms_key");t&&delete curNotifier.addQueues[t.queue],ls.set("im_m_comms_key",!1),Notifier.initCommunityQueues(e||0)},proccessCommunityQueues:function(e,t){if("empty"===e||!e)return!1;Notifier.addKey(e,(function(e,i){if(i.failed)++t<50&&setTimeout(Notifier.resetCommConnection.pbind(t),100);else{(e=ls.get("im_m_comms_key"))&&(e.ts=i.ts,ls.set("im_m_comms_key",e));var _=i.events;_&&_.map((function(e){return e.split("<!>")})).forEach((function(e){if("update_cnt"===e[1]){var t=e[5],i=e[4];(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("mgid"+t,i)}}))}}))},destroy:function(){if(Notifier.hideAllEvents(),curNotifier.idle_manager.stop(),curNotifier.uiGcTo&&clearTimeout(curNotifier.uiGcTo),curNotifier={},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.re)("notifiers_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.re)("queue_transport_wrap"),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_longpoll_unread_counter")){var e=Notifier.getLpInstance();e&&e.offData(Notifier.handleUnreadCountChange)}},reinit:function(){ajax.post("notifier.php?act=a_get_params",{},{onDone:function(e){e?(errorTimeout.reset(),this.init(e)):(setTimeout(this.reinit.bind(this),1e3*errorTimeout.get()),errorTimeout.increaseMore())}.bind(this),onFail:function(){return setTimeout(this.reinit.bind(this),1e3*errorTimeout.get()),errorTimeout.increaseMore(),!0}.bind(this)})},standby:function(e){this.destroy(),e&&errorTimeout.set(e),setTimeout(this.reinit.bind(this),1e3*errorTimeout.get())},freezeEvents:function(){curNotifier.frozen=!0,curNotifier.unfreezeAfterTooltipHide=!1,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(curNotifier.q_shown,(function(){clearTimeout(this.fadeTO),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.getStyle)(this.baloonEl,"opacity")<1&&(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_14__.animate)(this.baloonEl,{opacity:1},100)}))},unfreezeEvents:function(){curNotifier.tooltipShown?curNotifier.unfreezeAfterTooltipHide=!0:(curNotifier.frozen=!1,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(curNotifier.q_shown,(function(e,t){t.timeoutConf?t.fadeTO=setTimeout(t.startFading,(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.hasAccessibilityMode)()?t.timeoutConf.unfreeze_am:t.timeoutConf.unfreeze):t.fadeTO=setTimeout(t.startFading,(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.hasAccessibilityMode)()?3e4:5e3)})))},getTransportWrap:function(){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("queue_transport_wrap")||utilsNode.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ce)("div",{id:"queue_transport_wrap"}))},setFocus:function(e){var t=(e?"1":"0")+curNotifier.instance_id;"frame"===curNotifier.transport&&(Notifier.lcSend("focus",{instance_id:t}),this.onInstanceFocus(t))},initIdleMan:function(){curNotifier.idle_manager&&curNotifier.idle_manager.started||(curNotifier.idle_manager=new _shared_lib_idle_manager__WEBPACK_IMPORTED_MODULE_20__.default({onIdleCb:function(){Notifier.freezeEvents(),Notifier.setFocus(0),cur.onIdle&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(cur.onIdle,(function(e,t){t()}))},onUnIdleCb:function(){Notifier.unfreezeEvents(),Notifier.setFocus(1),cur.onUnidle&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(cur.onUnidle,(function(e,t){t()})),FastChat&&FastChat.onUnidle(),vk.spentLastSendTS=Date.now()},id:"window",element:document,focusElement:window}),curNotifier.idle_manager.start())},initFrameTransport:function(){if(!ls.checkVersion()||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_9__.browser.msie8||!("onmessage"in window)&&!("postMessage"in window))return!1;for(var e in curNotifier.connection_id="queue_connection_"+curNotifier.queue_id,curNotifier.lc_prev_value="",curNotifier.is_server=!1,curNotifier.lp_connected=!1,curNotifier.transport="frame",errorTimeout.reset(),this.lcInit(),curNotifier.onConnectionId)curNotifier.onConnectionId[e]();return curNotifier.onConnectionId=[],!0},tabIsMaster:function(){return!(!window.curNotifier||!window.curNotifier.is_server)},tabIsIdle:function(){return!!(curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.is_idle)},onActivated:function(){curNotifier.idle_manager&&curNotifier.idle_manager.is_idle?curNotifier.idle_manager.is_idle=!1:curNotifier.idle_manager&&curNotifier.idle_manager.is_idle||Notifier.setFocus(1),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.removeEvent)(document,"mousemove keydown touchstart",Notifier.onActivated)},onConnectionInit:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.addEvent)(document,"mousemove keydown touchstart",Notifier.onActivated)},onConnectionFailed:function(){},onRelogin:function(){setTimeout((function(){Notifier.standby()}),0)},onMessage:function onMessage(msg){if(!curNotifier.focus_instance||curNotifier.focus_instance==curNotifier.instance_id)try{var events=eval("("+msg+")");Notifier.pushEvents(events)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(e.message)}},onInstanceFocus:function(e){var t=e.charAt(0);e=e.substr(1),"1"==t?(curNotifier.focus_instance=e,e!=curNotifier.instance_id&&(curNotifier.idle_manager.is_idle||curNotifier.idle_manager.idle(),Notifier.hideAllEvents())):curNotifier.focus_instance==e&&(curNotifier.focus_instance="")},onInstanceServer:function(e){curNotifier.is_server!==!!e&&(curNotifier.is_server=!!e,IS_SSE_ENABLED||(0,_longpoll_singleton__WEBPACK_IMPORTED_MODULE_23__.lpSingletonSyncWithNotifier)(),window.reforgedME&&window.reforgedME.engine&&window.reforgedME.engine.switch(e?"master":"slave"))},getLpInstance:()=>IS_SSE_ENABLED?(window.sseConnect||(window.sseConnect=new _web_components_im_ServerSentEvents_DEPRECATEDLongpollAdapter__WEBPACK_IMPORTED_MODULE_24__.DEPRECATEDLongpollAdapter(window.vk.lpConfig.key,window.vk.lpConfig.ts,window.vk.lpConfig.sseUrl,window.vk.id)),window.sseConnect):(0,_longpoll_singleton__WEBPACK_IMPORTED_MODULE_23__.lpSingletonGetInstance)(),getEventQueueInstance(){if(!window.imEventQueue){var e="im_event_queue";window.imEventQueue=new _shared_im_EventQueue__WEBPACK_IMPORTED_MODULE_32__.EventQueue({getQueue:()=>{var t=()=>(localStorage.removeItem(e),(0,_shared_im_request__WEBPACK_IMPORTED_MODULE_31__.post)("al_im.php",{act:"a_messenger_queue_subscribe"}).then((e=>e[0])).then((t=>(localStorage.setItem(e,JSON.stringify(t)),t))));return Notifier.tabIsMaster()?t():new Promise(((i,_)=>{var o=()=>{if(Notifier.tabIsMaster())return t().then(i).catch(_);var r=localStorage.getItem(e);if(!r)return setTimeout(o,3e3);try{i(JSON.parse(r))}catch(e){_(e)}};o()}))},registerQueue:(t,i)=>{Notifier.addKey(t,((t,_)=>{!(!_.failed&&!_.err)&&Notifier.tabIsMaster()&&localStorage.removeItem(e),i(t,_)}))}})}return window.imEventQueue},pushEvents:function(e,t){var i=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(e,(function(e,_){i|=Notifier.pushEvent(_,t)})),i&&!ls.get("sound_notify_off")&&curNotifier.is_server&&!1&i&&curNotifier.sound.play()},pushEvent:function pushEvent(ev,cnt){var _window$Emoji,_window$Emoji2;if("nop"!==ev){if("string"==typeof ev)try{ev=JSON.parse(ev)}catch(e){return void(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,ev)}ev.timeoutConf={default:ev.timeout?ev.timeout:NOTIFICATION_FADE_TIMEOUT,default_am:ev.timeout?5*ev.timeout:NOTIFICATION_FADE_TIMEOUT_ACCESSIBILITY_MODE,unfreeze:ev.timeout?.7*ev.timeout:NOTIFICATION_FADE_TIMEOUT_AFTER_UNFREEZE,unfreeze_am:ev.timeout?4.4*ev.timeout:NOTIFICATION_FADE_TIMEOUT_ACCESSIBILITY_MODE_AFTER_UNFREEZE};var push=cnt?0:1,push_prioritized=!1;if(ev.version!==curNotifier.version&&-1!==ev.version)return(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("Notifier old version: "+ev.version+" !== "+curNotifier.version),!1;if("update_cnt"===ev.type){if(ev.add&&ev.add.section){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_longpoll_unread_counter")&&"msg"===ev.add.section_id)return 0;(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)(ev.add.section_id,ev.add.count,ev.add.section_link,ev.add.section_add)}return 0}if(!curNotifier.done_events[ev.id]){switch(curNotifier.done_events[ev.id]=1,void 0!==ev.top_count&&-1!==ev.top_count&&(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("ntf",ev.top_count),ev.type){case"video_process_ready":if(ev.add.video_raw&&window.Video&&Video.isVideoPlayerOpen(ev.add.video_raw))return;if(ev.add&&window.Video&&Video.isVideoPlayerOpen(ev.add))return;break;case"mail":if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_longpoll_unread_counter"))break;ev.add&&null!==ev.add.count&&void 0!==ev.add.count&&(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("msg",ev.add.count);break;case"friend_request":ev.add.fr_count?(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("fr",ev.add.fr_count):(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("fr",ev.add);break;case"friend_request_counter":(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("fr",ev.add.fr_count),push=0;break;case"ach_achieved":ev.add.cnt&&(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("ach",ev.add.cnt);break;case"ach_achieved_upd":(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("ach",ev.add),push=0;break;case"group_update_addresses":window.opener&&window.opener.postMessage(ev.add,window.opener.origin),push=0;break;case"bt_upd":if(ev.add.cnt){(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("bt",ev.add.cnt);var bt=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("bt_tab_updates");bt&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.geByClass1)("ui_tab_count",bt),ev.add.cnt>0?ev.add.cnt:"")}break;case"bt_upd_upd":ev.add&&ev.add.section&&(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("bt",ev.add.count,ev.add.section,ev.add.prefix),push=0;var bt=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("bt_tab_updates");bt&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.geByClass1)("ui_tab_count",bt),ev.add>0?ev.add:"");break;case"push_settings":push=0;var muted=JSON.parse(ev.add);curNotifier.mutedPeers=curNotifier.mutedPeers.filter((function(e){return e!==muted.peer_id})),0!==muted.disabled_until&&curNotifier.mutedPeers.push(muted.peer_id);break;case"mail_cnt":if(push=0,(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_longpoll_unread_counter"))break;(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("msg",ev.add);break;case"clear_notify":TopNotifier&&TopNotifier.invalidate(),Notifier.hideAllEvents(),push=0;break;case"support_reply":(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("spr",ev.add,"support",ev.author_id?"act=show&id="+ev.author_id:"act=show"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.toggle)("l_spr",ev.add>0);break;case"support_cnt":(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)("spr",ev.add,"support",ev.author_id?"act=show&id="+ev.author_id:"act=show"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.toggle)("l_spr",ev.add>0),push=0;break;case"balance_changed":parseInt(ev.add.balance)?(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_13__.updateMoney)(parseInt(ev.add.balance)):parseInt(ev.add)&&(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_13__.updateMoney)(parseInt(ev.add));break;case"gift_sent":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.re)("left_block10_0");var left_block=ev.add;if(left_block){var leftBlocksElem=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("left_blocks"),left_unpaid_gifts=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.se)(left_block);leftBlocksElem&&(leftBlocksElem.firstChild?leftBlocksElem.insertBefore(left_unpaid_gifts,leftBlocksElem.firstChild):leftBlocksElem.appendChild(left_unpaid_gifts))}break;case"notify_tt":case"login_attempt":if(ev.add.text&&ev.add.key){var evalText=`(${ev.add})`;try{ev.add=eval(evalText),TopNotifier.showTooltip(ev.add.text,ev.add.key)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,evalText)}push=0}break;case"reload_stickers":window.emojiStickers=null,null==(_window$Emoji=window.Emoji)||_window$Emoji.resetStickersCache();case"reload_stickers_keywords":window.stickersKeywordsData=null,ls.remove("stickers_keywords"),null==(_window$Emoji2=window.Emoji)||_window$Emoji2.updateTabs(),push=0;break;case"any_counter":if(push=0,(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_longpoll_unread_counter")&&"msg"===ev.add.section_id)break;(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_10__.handlePageCount)(ev.add.section_id,ev.add.count,ev.add.link,ev.add.add);break;case"done_box":case"done_box_full":push=0,push_prioritized=!0;break;case _web_market_HappySanta__WEBPACK_IMPORTED_MODULE_30__.MARKET_NOTIFY_ID__HS_MIGRATION_STATE:push=0,(0,_web_market_HappySanta__WEBPACK_IMPORTED_MODULE_30__.onHappySantaMarketMigrationStateChanged)(ev)}if("mail"===ev.type&&(push=this.sendMailNotification(ev)),ev.add&&ev.add.tooltip_text){var html='<div class="notify_tt_wrap">'+(ev.author_photo?`<img class="notify_tt_img" src="${ev.author_photo}" />`:'<div class="notify_tt_thumb"></div>')+'<h4 class="notify_tt_text">'+ev.add.tooltip_text+"</h4></div>";TopNotifier.showTooltip(html,0),push=0}return 1&push&&(curNotifier.q_events.push(ev),curNotifier.q_events.length>30&&curNotifier.q_events.splice(0,curNotifier.q_events.length-30),this.checkEvents()),push_prioritized&&(curNotifier.q_prior_events.push(ev),curNotifier.q_prior_events.length>5&&curNotifier.q_prior_events.splice(0,curNotifier.q_prior_events.length-5),this.checkEvents()),push}}},isActive:function(){return window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle},sendImProxy:function(e){e.text=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.winToUtf)(e.text),curNotifier.browser_shown[e.id]||(curNotifier.browser_shown[e.id]=!0,Notifier.trySendBrowserNotification(e,!0),setTimeout((function(){curNotifier.browser_shown[e.id]=void 0}),2e3))},shouldShowNotification:function(e){return"im"!==cur.module&&!FastChat.isChatOpen(e.author_id)},sendSimpleNotification:function(e){return Notifier.playSound(e),Notifier.shouldShowNotification(e)?3:0},sendBrowserNotification:function(e){"im"!==cur.module?Notifier.negotiate({message:"send_im_notification",onSuccess:function(t){Notifier.lcSend("negotiate_back",{token:t.msg,ev:e})},onFail:function(){Notifier.showBrowserNotification(e)}}):(e.onclick="IMBRIDGE.activateTab("+e.author_id+");",Notifier.showBrowserNotification(e))},shouldPlaySound:function(e){var t=e.add&&e.add.no_sound;return!ls.get("sound_notify_off")&&Notifier.shouldDisturb(e)&&!t},shouldDisturb:e=>!cur.noDisturbMode&&(cur.focused!=e.author_id&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.inArray)(e.author_id,cur.mutedPeers)&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.inArray)(e.author_id,curNotifier.mutedPeers)),shouldPlayCurrentSound:function(e){return!ls.get("sound_notify_off")&&cur.focused==e.author_id&&(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.hasAccessibilityMode)()&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.inArray)(e.author_id,cur.mutedPeers)},playSound:function(e){curNotifier.sound_im&&curNotifier.sound_im.play&&Notifier.shouldPlaySound(e)?e.author_id==cur.peer&&(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.hasAccessibilityMode)()?curNotifier.sound_im_current.play():curNotifier.sound_im.play():Notifier.shouldPlayCurrentSound(e)&&curNotifier.sound_im_current&&curNotifier.sound_im_current.play()},trySendBrowserNotification:function(e,t){Notifier.negotiate({message:"who_is_active",msg:e.author_id,onFail:function(){!Notifier.canNotifyUi()||cur.peer==e.author_id&&Notifier.isActive()?(t||(Notifier.lcSend("show_notification",e),Notifier.shouldShowNotification(e)&&Notifier.showEvent(e,!0)),Notifier.playSound(e)):Notifier.sendBrowserNotification(e)}})},showBrowserNotification:function(e){Notifier.showEventUi(e),Notifier.playSound(e)},proxyIm:function(e){if(this.isActive())return this.playSound(e),void(Notifier.canNotifyUi()&&cur.peer!==e.author_id&&Notifier.shouldDisturb(e)&&(e.onclick="IMBRIDGE.activateTab("+e.author_id+");",Notifier.showEventUi(e)));curNotifier.is_server?(e.onclick="IMBRIDGE.activateTab("+e.author_id+");",this.sendImProxy(e)):curNotifier.is_server||this.lcSend("message_from_im",e)},sendMailNotification:function(e){if(e.add.is_call)return 0;if("im"===cur.module?e.onclick="IMBRIDGE.activateTab('"+e.author_id+"');":(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_fastchat_reforged")?e.onclick=`window.reforgedME && window.reforgedME.selectPeer && window.reforgedME.selectPeer(${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(e.author_id)}, 'notifications');`:e.onclick="FastChat.selectPeer('"+e.author_id+"');",this.isActive()&&Notifier.canNotifyUi())this.playSound(e),this.shouldDisturb(e)&&cur.peer!=e.author_id&&this.showEventUi(e);else{if(this.isActive()&&this.shouldDisturb(e))return this.sendSimpleNotification(e);curNotifier.is_server&&this.shouldDisturb(e)&&this.trySendBrowserNotification(e)}return 0},checkEvents:function(){var e;window.curNotifier&&curNotifier.idle_manager&&((!curNotifier.q_events.length||curNotifier.q_shown.length>=(curNotifier.idle_manager.is_idle?curNotifier.q_idle_max:curNotifier.q_max))&&!curNotifier.q_prior_events.length||!curNotifier.idle_manager.is_idle&&curNotifier.frozen||cur.noDisturbMode||(e=curNotifier.q_prior_events.length?curNotifier.q_prior_events.shift():curNotifier.q_events.shift())&&this.showEvent(e))},showEvent:function showEvent(ev,force){"mail"!==ev.type&&Math.random()<.1&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("feed_top_notify_popup",1,"show",ev.type),curNotifier.q_shown.push(ev);var thumbEl=showEventThumb(ev),addPhoto=showEventAddPhoto(ev);ev.baloonWrapEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ce)("div",{className:"notifier_baloon_wrap",innerHTML:`\n        <div class="notifier_baloon notifier_type_${ev.type}">\n          <div class="notifier_baloon_head clear_fix">\n            <a class="notifier_close_wrap" role="link" title="${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_close")}" aria-label="${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_close")}"></a>\n            <h4 class="notifier_baloon_title">${ev.title||""}</h4>\n          </div>\n          <div class="notifier_baloon_body clear_fix">\n            ${thumbEl}\n            ${addPhoto}\n            <div class="notifier_baloon_msg wrapped">${ev.text||""}</div>\n          </div>\n        </div>`}),!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ge)("notifier_popup_icon_mask")&&ev.icon_type&&(utilsNode.appendChild(document.createElement("div")).outerHTML='<svg style="display: block;" width="0" height="0"><defs><clipPath id="notifier_popup_icon_mask"><path d="M48.254 34.197A9.958 9.958 0 0 0 42 32c-5.523 0-10 4.477-10 10 0 2.367.822 4.542 2.197 6.254A24.934 24.934 0 0 1 25 50C11.193 50 0 38.807 0 25S11.193 0 25 0s25 11.193 25 25c0 3.247-.62 6.35-1.746 9.197z"/></clipPath></defs></svg>'),ev.baloonEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.geByClass1)("notifier_baloon",ev.baloonWrapEl),ev.closeEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.geByClass1)("notifier_close_wrap",ev.baloonEl),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.addEvent)(ev.baloonEl,"mouseover mouseout",(function(e){ev.over="mouseover"==e.type,ev.over?Notifier.freezeEvents():Notifier.unfreezeEvents()})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.addEvent)(ev.baloonEl,"mousedown click",(function(event){event=event.originalEvent||event||window.event;var btn=event.which,nohide=!1;if(1==btn&&(event.ctrlKey||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_9__.browser.mac&&event.metaKey)&&(btn=2,_shared_lib_browser__WEBPACK_IMPORTED_MODULE_9__.browser.mac&&(nohide=!0)),"A"!=(event.target||event.srcElement).tagName){switch("mail"!==ev.type&&Math.random()<.1&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_15__.statlogsValueEvent)("feed_top_notify_popup",1,"click",ev.type),btn){case 1:try{eval(ev.onclick)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,ev.onclick)}Notifier.trackEvent("click",{event_id:ev.id}),ev.preventHideByClick||Notifier.hideEvent(ev);break;case 2:if(!ev.link)return;var wnd=window.open(ev.link,"_blank");try{wnd.blur(),window.focus()}catch(e){}Notifier.trackEvent("click",{event_id:ev.id}),nohide||Notifier.hideEvent(ev);break;case 3:if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_9__.browser.mozilla)return}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.cancelEvent)(event)}})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.addEvent)(ev.baloonEl,"contextmenu",(function(e){return setTimeout((function(){Notifier.hideEvent(ev,!1,!1,!0)}),10),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.cancelEvent)(e)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.addEvent)(ev.closeEl,"mousedown click",(function(e){return Notifier.hideEvent(ev,!1,!1,!0),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.cancelEvent)(e)})),ev.startFading=function(){ev.fading=(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_14__.animate)(ev.baloonEl,{opacity:0},1e3,Notifier.hideEvent.bind(Notifier).pbind(ev,!1)),ev.over&&ev.fading.stop()},curNotifier.cont.insertBefore(ev.baloonWrapEl,curNotifier.cont.firstChild);var h=ev.baloonWrapEl.offsetHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.re)(ev.baloonWrapEl),curNotifier.cont.appendChild(ev.baloonWrapEl),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.setStyle)(curNotifier.cont,{bottom:-h}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.setStyle)(ev.baloonWrapEl,{visibility:"visible"}),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_14__.animate)(curNotifier.cont,{bottom:0},200),curNotifier.idle_manager.is_idle&&!force||(ev.timeoutConf?ev.fadeTO=setTimeout(ev.startFading,(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.hasAccessibilityMode)()?ev.timeoutConf.default_am:ev.timeoutConf.default):ev.fadeTO=setTimeout(ev.startFading,(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.hasAccessibilityMode)()?NOTIFICATION_FADE_TIMEOUT_ACCESSIBILITY_MODE:NOTIFICATION_FADE_TIMEOUT)),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isFunction)(ev.tooltipHandler)&&ev.tooltipHandler(ev.baloonWrapEl,{ev,hide:()=>{Notifier.hideEvent(ev,!1,!1,!0)}})},trackEvent:function(e,t){ajax.post("al_feed.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)({act:"a_feedback_track_event",event:e},t||{}))},canNotifyUi:function(){if(window.pushNotifier&&window.pushNotifier.loadEndpoint())return!1;var e="im_notify_flag",t=!ls.get("im_ui_notify_off")&&DesktopNotifications.supported()&&DesktopNotifications.checkPermissionNeeded()<=0;return!ls.get(e)&&t&&ls.set(e,1),t&&!cur.noDisturbMode},showEventUi:function showEventUi(ev){if(!this.canNotifyUi())return!1;var title,text;if("mail"===ev.type){var div=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ce)("div");div.innerHTML=ev.text,title=div.firstChild.textContent.trim(),text=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.stripHTML)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.replaceEntities)(ev.text.replace(/<br\/?>/g,"\n")).replace(/<span class='notifier_author_quote'.*<\/span>(.*?)/,"$1").replace(/<img.*?alt="(.*?)".*?>/gi,"$1")).replace(/&laquo;|&raquo;/gi,'"').trim()}else title=ev.title,text=ev.text;var notification=ev.uiNotification=DesktopNotifications.createNotification(ev.author_photo,title,text);return curNotifier.uiNotifications.push([notification,Date.now()]),notification.onclick=function(e){if(window.focus(),ev.onclick||("im"===cur.module?ev.onclick="IMBRIDGE.activateTab("+ev.author_id+");":(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_fastchat_reforged")?ev.onclick=`window.reforgedME && window.reforgedME.selectPeer && window.reforgedME.selectPeer(${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(ev.author_id)}, 'notifications');`:ev.onclick="FastChat.selectPeer('"+ev.author_id+"');"),"IM"===ev.onclick.substr(0,2)&&"im"!==cur.module)(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_fastchat_reforged")?window.reforgedME&&window.reforgedME.selectPeer&&window.reforgedME.selectPeer((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(ev.author_id),"notifications"):FastChat.selectPeer((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(ev.author_id));else try{eval(ev.onclick)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,ev.onclick)}Notifier.hideEvent(ev)},notification.onclose=function(){Notifier.hideEvent(ev,!0)},notification.show(),ev.closeTO=setTimeout(Notifier.hideEvent.bind(Notifier).pbind(ev),5e3),!0},hideEvent:function(e,t,i,_){clearTimeout(e.closeTO),clearTimeout(e.fadeTO),e.fading&&e.fading.stop();var o,r=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.indexOf)(curNotifier.q_shown,e);-1!=r&&curNotifier.q_shown.splice(r,1),Notifier.unfreezeEvents(),t||(e.baloonWrapEl?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.cleanElems)(e.closeEl,e.baloonEl),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.re)(e.baloonWrapEl)):e.uiNotification&&e.uiNotification.cancel()),!0===_&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isArray)(curNotifier.q_closed)&&(curNotifier.q_closed.unshift((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)()),(o=curNotifier.q_closed.length)>3&&(curNotifier.q_closed.splice(3,o-3),o=3),3==o&&curNotifier.q_closed[0]-curNotifier.q_closed[2]<700&&Notifier.hideAllEvents()),-1!=_&&this.checkEvents(),"frame"!=curNotifier.transport||i||this.lcSend("hide",{event_id:e.id}),!0!==_&&curNotifier.idle_manager.is_idle||curNotifier.q_events.length||curNotifier.q_shown.length||ajax.post("notifier.php",{act:"a_clear_notifier"}),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isFunction)(e.onHide)&&e.onHide()},hideAllEvents:function(){curNotifier.q_events=[],(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.clone)(curNotifier.q_shown),(function(){Notifier.hideEvent(this,!1,!0,-1)})),curNotifier.q_shown=[],curNotifier.q_closed=[]},onEventHide:function(e){e&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(curNotifier.q_shown,(function(){if(this.id==e)return Notifier.hideEvent(this,!1,!0),!1})),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(curNotifier.q_events,(function(t){if(this.id==e)return curNotifier.q_events.splice(t,1),!1})))},lcInit:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_16__.addEvent)(window,"storage",this.lcOnStorage.bind(this)),this.lcStart()},lcStart:function(){Notifier.lcCheckServer()?this.lcServer():(this.lcSend("check"),clearTimeout(curNotifier.becomeServerTO),curNotifier.becomeServerTO=setTimeout(this.lcServer.bind(this).pbind(!0),500)),curNotifier.checkServerInt=setInterval(function(){curNotifier.is_server||(curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&curNotifier.idle_manager.getActiveTime()>ACTIVE_TAB_SWITCH_SERVER_TIMEOUT&&(Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("this tab wants to become server"),ls.set(LC_SERVER_SWITCH_TO_ACTIVE_FLAG,!0),this.lcServer(!0)),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)()-curNotifier.last_succ>8e3&&Notifier.lcCheckServer()&&(Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("timeout"),this.lcServer(!0)))}.bind(this),1e3+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.rand)(-100,100))),curNotifier.isServerBroadcastInt=setInterval(function(){curNotifier.is_server&&(Notifier.lcCheckServer()?this.lcSend("check_ok"):(Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("no server from server broadcast"),this.lcNoServer()))}.bind(this),5e3+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.rand)(-100,100)));var e=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_25__.partConfigEnabled)("mail_fastchat_reforged");e||void 0!==curNotifier.fc&&window.stManager.add([window.jsc("web/emoji.js")],(function(){FastChat.init(curNotifier.fc)})),e&&loadReforgedFastchatModule().then((()=>{window.reforgedME.init({fcEnabled:e,silentModules:curNotifier.fastchatsSilentModules||[]})}))},lcStop:function(){clearInterval(curNotifier.isServerBroadcastInt),clearInterval(curNotifier.checkServerInt),clearTimeout(curNotifier.becomeServerTO)},lcSend:function(e,t){if(!curNotifier.connection_id)return curNotifier.onConnectionId&&curNotifier.onConnectionId.push(Notifier.lcSend.pbind(e,t)),!1;Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(curNotifier.instance_id+": sending",e,t||"");var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)({__client:curNotifier.instance_id,__act:e,__rnd:Math.random()},t||{});if(curNotifier.post_message)try{curNotifier.storage_frame.postMessage(curNotifier.connection_id+":"+JSON.stringify(i),curNotifier.storage_frame_origin)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(e,e.message,e.stack)}else ls.set(curNotifier.connection_id,i)},lcRecv:function(e){if(e&&!(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isEmpty)(e)&&e.__client!=curNotifier.instance_id){var t=e.__act;switch(delete e.__client,delete e.__act,delete e.__rnd,Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(curNotifier.instance_id+": recv",t,e),t){case"new_server":curNotifier.last_succ=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)()+1e3;break;case"feed":curNotifier.timestamp=e.ts,curNotifier.key=e.key,Notifier.pushEvents(e.events,!e.full);break;case"addfeed":Notifier.addFeed(e[0],e[1]);break;case"new_key":(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("new key",e),curNotifier.timestamp=e.ts,curNotifier.key=e.key;break;case"new_addkey":var i=(0,_notifier_utils__WEBPACK_IMPORTED_MODULE_40__.subscriptionObjectStableId)(e),_=curNotifier.addQueues[i],o=!_&&curNotifier.is_server;_?_[0]=Date.now():curNotifier.addQueues[i]=[Date.now(),e.ts,e.key],o&&Notifier.lpReset(Notifier.lpCheck.bind(Notifier));break;case"clear_addkeys":curNotifier.addQueues={};break;case"check_ok":curNotifier.last_succ=Date.now(),curNotifier.becomeServerTO&&(clearTimeout(curNotifier.becomeServerTO),curNotifier.becomeServerTO=!1),curNotifier.lp_connected||(curNotifier.lp_connected=!0,Notifier.onConnectionInit());break;case"focus":Notifier.onInstanceFocus(e.instance_id);break;case"hide":Notifier.onEventHide(e.event_id);break;case"check_playlist":var r=ls.get("pad_playlist");r&&r.instance==curNotifier.instance_id&&ls.set("pad_pltime",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)());break;case"who_is_active":Notifier.isActive()&&(_shared_ranges__WEBPACK_IMPORTED_MODULE_38__.Ranges.isChatOrChannelPeer((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(e.msg))&&"im"===cur.module||_shared_ranges__WEBPACK_IMPORTED_MODULE_38__.Ranges.isUserPeerTransitional((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(e.msg)))&&this.lcSend("negotiate_back",e);break;case"show_notification":Notifier.shouldShowNotification(e)&&Notifier.showEvent(e,!0);break;case"send_im_notification":if("im"===cur.module){var a=Notifier.createNegotiationSlot({onSuccess:function(e){e.ev.onclick="IMBRIDGE.activateTab("+e.ev.author_id+");",Notifier.showBrowserNotification(e.ev)}});Notifier.lcSend("negotiate_back",{msg:a.token,token:e.token})}break;case"negotiate_back":Notifier.endNegotiation(e);break;case"recent_emoji_set":window.Emoji&&Emoji.setRecentEmojiList(e);break;case"lp_data":IS_SSE_ENABLED||(0,_longpoll_singleton__WEBPACK_IMPORTED_MODULE_23__.lpSingletonOnNotifierRecv)(e);break;default:if(curNotifier.recvClbks&&curNotifier.recvClbks[t])for(var n in curNotifier.recvClbks[t])curNotifier.recvClbks[t][n](e);else curNotifier.recvData[t]=e}if(curNotifier.is_server)switch(t){case"new_server":case"new_key":case"check_ok":Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("no server from lcRecv",t),Notifier.lcNoServer();break;case"check":this.lcSend("check_ok");break;case"message_from_im":Notifier.sendImProxy(e)}}},negotiate:function(e){e=this.createNegotiationSlot(e),this.lcSend(e.message,{token:e.token,msg:e.msg})},createNegotiationSlot:function(e){var t="negotiations_"+Date.now()+Math.round((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.rand)(0,1e4));return e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)({timeout:3e3,token:t,msg:""},e),curNotifier.negotiations[e.token]={},curNotifier.negotiations[e.token].timer=setTimeout((function(){e.onFail&&e.onFail(),curNotifier.negotiations[e.token]&&(curNotifier.negotiations[e.token]=void 0)}),e.timeout),curNotifier.negotiations[e.token].success=e.onSuccess,e},endNegotiation:function(e){var t=e.token,i=curNotifier.negotiations[t];i&&(clearTimeout(i.timer),curNotifier.negotiations[t].success&&curNotifier.negotiations[t].success(e),curNotifier.negotiations[t]=void 0)},lcOnStorage:function(e){e=e||window.event,Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("onstorage",e.key,e.newValue,e);var t=e.key,i=e.newValue;if(i){if(t){if(e.key!=curNotifier.connection_id)return}else{if(t=curNotifier.connection_id,(i=localStorage.getItem(t))==curNotifier.lc_prev_value)return;curNotifier.lc_prev_value=i}this.lcRecv(JSON.parse(i)||{})}},lcServer:function(e){Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("becoming server"),this.lpInit(),this.lcSend("new_server"),Notifier.lcCheckServer(!0),Notifier.onInstanceServer(1),curNotifier.lp_connected||(curNotifier.lp_connected=!0,Notifier.onConnectionInit()),this.lpStop(),e?this.lpReset(this.lpStart.bind(this)):this.lpStart()},lcNoServer:function(){this.lpStop(),curNotifier.is_server&&(Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("not server now"),this.onInstanceServer(0))},lcCheckServer:function(e){var t,i="server_"+curNotifier.connection_id,_=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)();return!(!e&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isArray)(t=ls.get(i))&&t[0]!=curNotifier.instance_id&&_-t[1]<8e3)&&(ls.set(i,[curNotifier.instance_id,_]),!0)},lpInit:function(){curNotifier.lpMakeRequest||(delete curNotifier.lpMakeRequest,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.re)("queue_transport_frame"),Notifier.getTransportWrap().appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_18__.ce)("iframe",{id:"queue_transport_frame",name:"queue_transport_frame",src:curNotifier.frame_path})))},lpStart:function(){curNotifier.lp_started=!0,curNotifier.lpInvalid?Notifier.lpGetKey():Notifier.lpCheck()},lpStop:function(){curNotifier.lp_started=!1,clearTimeout(curNotifier.lp_check_to),clearTimeout(curNotifier.lp_error_to),clearTimeout(curNotifier.lp_req_check_to)},lpCheck:function lpCheck(){if(curNotifier.lp_started&&!curNotifier.lpActive&&!curNotifier.lpInvalid){if(!curNotifier.lpMakeRequest)return clearTimeout(curNotifier.lp_check_to),void(curNotifier.lp_check_to=setTimeout(this.lpCheck.bind(this),1e3));if(!Notifier.lcCheckServer())return Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("no server from check"),void this.lcNoServer();var now=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)(),add_queues=[],completed=!1,params={act:"a_check",ts:curNotifier.timestamp,key:curNotifier.key,id:curNotifier.uid,wait:25};(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(curNotifier.addQueues,(function(e,t){if(now-t[0]>3e4&&!e.match(/nccts/))return(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("drop key",e,now-t[0]),void delete curNotifier.addQueues[e];add_queues.push(e),params.ts+="_"+t[1],params.key+=t[2]}));var onFail=function(){completed||(completed=!0,curNotifier.lpActive=!1,clearTimeout(curNotifier.lp_req_check_to),clearTimeout(curNotifier.lp_error_to),curNotifier.lp_error_to=setTimeout(this.lpCheck.bind(this),1e3*errorTimeout.get()+(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.irand)(1e3,1e4)),errorTimeout.increase())}.bind(this);curNotifier.lpActive=!0,clearTimeout(curNotifier.lp_req_check_to),curNotifier.lp_req_check_to=setTimeout(onFail,1e3*(params.wait+5)),curNotifier.lpMakeRequest(curNotifier.frame_url,params,function(text){if(!completed&&(completed=!0,curNotifier.lpActive=!1,curNotifier.lp_started)){this.lcSend("check_ok");try{var response=eval("("+text+")"),main_response=response,add_response,add_queue,busy=0;if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isArray)(response))for(main_response=response.shift();(add_response=response.shift())&&(add_queue=add_queues.shift(),add_queue);)2!=add_response.failed||4!=add_response.err?(this.lcSend("addfeed",[add_queue,add_response]),this.addFeed(add_queue,add_response),add_response.failed&&delete curNotifier.addQueues[add_queue]):(Notifier.debug&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("!!notifier key busy!! "+curNotifier.instance_id),busy|=1);else if(response.failed){for(;add_queue=add_queues.shift();)this.lcSend("addfeed",[add_queue,response]),this.addFeed(add_queue,response),delete curNotifier.addQueues[add_queue];this.lcSend("clear_addkeys")}switch(this.lpChecked(main_response)){case 0:break;case 1:default:return;case 2:busy|=2}busy?ls.get(LC_SERVER_SWITCH_TO_ACTIVE_FLAG)?ls.remove(LC_SERVER_SWITCH_TO_ACTIVE_FLAG):this.lcNoServer():(clearTimeout(curNotifier.lpCheckTO),curNotifier.lpCheckTO=setTimeout(this.lpCheck.bind(this),curNotifier.request_timeout||1e3),errorTimeout.decrease())}catch(e){text&&-1==text.indexOf("Ad Muncher")&&((0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_12__.topError)("Notifier error: "+e.message,{dt:-1,type:5,stack:e.stack,answer:text+"\n\nbusy:"+busy+"\nserver:"+curNotifier.is_server+"\ninstance:"+curNotifier.instance_id,url:curNotifier.frame_url,query:params&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_21__.toQueryString)(params)}),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(e.message,e.stack,e)),clearTimeout(curNotifier.lp_error_to),curNotifier.lp_error_to=setTimeout(this.lpCheck.bind(this),1e3*errorTimeout.get()),errorTimeout.increase()}}}.bind(this),onFail)}},lpChecked:function(e){if(2==e.failed)return 4==e.err?2:((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("notifier lpCheck error",e),curNotifier.lpInvalid=!0,clearTimeout(curNotifier.lp_error_to),curNotifier.lp_error_to=setTimeout(this.lpGetKey.bind(this),1e3*errorTimeout.get()),errorTimeout.increase(),1==e.err?1:3);if(e.failed)throw new Error((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_unknown_error"));return this.lcSend("feed",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)({full:curNotifier.idle_manager&&curNotifier.idle_manager.is_idle&&!this.canNotifyUi(),key:curNotifier.key},e)),curNotifier.timestamp=e.ts,Notifier.pushEvents(e.events),0},lpOnReset:function(){curNotifier.lpOnReset&&curNotifier.lpOnReset()},lpReset:function(e){curNotifier.lpOnReset=e,clearTimeout(curNotifier.resetTO),curNotifier.resetTO=setTimeout((function(){if(!curNotifier.is_server||curNotifier.lp_started){if(curNotifier.lpMakeRequest&&!curNotifier.lpInvalid){var e=curNotifier.key,t=curNotifier.timestamp;return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(curNotifier.addQueues,(function(i,_){e+=_[2],t+="_"+_[1]})),void curNotifier.lpMakeRequest(curNotifier.frame_url,{act:"a_release",key:e,ts:t,id:curNotifier.uid,wait:25},Notifier.lpOnReset,Notifier.lpOnReset)}ajax.post("notifier.php?act=a_reset",!1,{onDone:Notifier.lpOnReset,onFail:function(){return Notifier.lpOnReset(),!0}})}else Notifier.lpStart()}),100)},lpGetKey:function(){ajax.post("notifier.php?act=a_get_key",{id:curNotifier.uid,hash:curNotifier.notifierHash},{onDone:function(e,t){curNotifier.timestamp=t,curNotifier.key=e,curNotifier.lpInvalid=!1,(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("notifier lpGetKey done"),this.lcSend("new_key",{ts:t,key:e}),this.lpCheck()}.bind(this),onFail:function(e){switch((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)("notifier lpGetKey fail",e),e){case 1:case 3:return void Notifier.standby();case 4:return void Notifier.standby(300);case 2:return void Notifier.onRelogin();default:return errorTimeout.set(64),clearTimeout(this.lp_error_to),this.lp_error_to=setTimeout(this.lpGetKey.bind(this),1e3*errorTimeout.get()),!0}}.bind(this)})},addKey:function(e,t,i){var _;if(!e||!(null==(_=window.curNotifier)?void 0:_.addQueues))return!1;var o=(0,_notifier_utils__WEBPACK_IMPORTED_MODULE_40__.subscriptionObjectStableId)(e),r=curNotifier.addQueues[o],a=!r&&curNotifier.is_server;return r?(r[0]=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)(),r[3]=t,r[4]=i):curNotifier.addQueues[o]=[(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.vkNow)(),e.ts,e.key,t,i],i||Notifier.lcSend("new_addkey",e),a&&Notifier.lpReset(Notifier.lpCheck.bind(Notifier)),!0},addFeed:function(e,t){var i,_,o=null==(i=window.curNotifier)||null==(_=i.addQueues)?void 0:_[e];(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isArray)(o)&&o.length&&(o[1]=t.ts,(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_22__.isFunction)(o[3])&&o[3](e,t))},addRecvClbk:function(e,t,i,_){curNotifier.recvClbks||(curNotifier.recvClbks={}),curNotifier.recvClbks[e]||(curNotifier.recvClbks[e]={}),curNotifier.recvClbks[e][t]&&!_||(curNotifier.recvClbks[e][t]=i)},setRecvClbk:function(e,t){curNotifier.recvClbks||(curNotifier.recvClbks={}),curNotifier.recvClbks[e]=[t]},fixPhoto:function(e,t){return-1===(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.clean)(e)).indexOf("question_c.gif")?e:t?"/images/question_inv_xc.png":"/images/question_inv_c.png"},pauseGlobalMedia:function(){var e=!!(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_26__.isMvk)(),t=e?audio:(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_27__.getAudioPlayer)(),i=window.Videoview;isMediaStoppedByCalls=!0,Notifier.lcSend("video_start"),!e&&t&&t.isPlaying()&&(t.pause(),t.pausedByCalls=!0),!e&&i&&(i.togglePlay(!1),i.pausedByCalls=!0),e&&t.playing&&t.playing()&&(t.pause(),t.pausedByCalls=!0)},resumeGlobalMedia:function(){var e=!!(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_26__.isMvk)(),t=e?audio:(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_27__.getAudioPlayer)(),i=window.Videoview;isMediaStoppedByCalls&&(isMediaStoppedByCalls=!1,Notifier.lcSend("video_hide")),!e&&t&&t.pausedByCalls&&(t.play(),delete t.pausedByCalls),!e&&i&&i.pausedByCalls&&(i.togglePlay(!0),delete i.pausedByCalls),e&&t&&t.pausedByCalls&&((0,_shared_audio_utils_wrapAudioPlay__WEBPACK_IMPORTED_MODULE_28__.wrapAudioPlay)(t).catch((()=>{})),delete window.audio.pausedByCalls)}}},24817:(e,t,i)=>{i.d(t,{Sound:()=>r});var _=i(15544),o=i(87481);function r(e,t){var i,r,a=!1;if(!e)throw new Error("Undefined filename");t=t||{};try{a=!!(r=(0,_.ce)("audio")).canPlayType,"no"!=r.canPlayType("audio/mpeg")&&""!=r.canPlayType("audio/mpeg")?i=".mp3?1":"no"==r.canPlayType('audio/ogg; codecs="vorbis"')||""==r.canPlayType('audio/ogg; codecs="vorbis"')||t.forceMp3?a=!1:i=".ogg?1"}catch(e){}var n=t.forcePath||"/"+e+i;if(a){r.src=n;var s=!1;r.addEventListener("ended",(()=>{s=!0}),!0),r.load(),this.playSound=()=>{s&&r.load();try{var e=r.play();e&&e.catch((e=>{(0,o.debugLog)(e)}))}catch(e){}s=!1},this.pauseSound=()=>{var e=r.pause();e&&e.catch((e=>{(0,o.debugLog)(e)}))}}}r.prototype={play(){try{this.playSound()}catch(e){}},pause(){try{this.pauseSound()}catch(e){}}},window.Sound=r},69906:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21466),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59357),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(51876),core_js_modules_es6_array_slice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(50110),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(85893),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(67294),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(49535),_web_lib_cancel_stack__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(75632),_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(86067),_shared_lib_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(40906),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(79957),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3834),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(95724),_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(15544),_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(86409),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(54612),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(76852),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(87481),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(19331),_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(91525),_web_lib_fx__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(35676),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(71516),_shared_evbus__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(82804),_icons_desktop_getIcon20Check__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(44030),_icons_desktop_getIcon20Cancel__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(84502),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(59397),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(86125),_shared_lib_init_react__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(81117),_web_reports_UserSatisfactionModeration_UserSatisfactionModeration__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(74880);window.TopNotifierCur||(window.TopNotifierCur={link:"top_notify_btn",count:"top_notify_count",_qParams:{section:"notifications",_tb:1,list:""},loaded:!1,loading:!1,from:"",viewsObserver:null,viewedNotifications:[]}),window.TopNotifier={onBellMouseDown:function(e){return!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.checkKeyboardEvent)(e)&&TopNotifier.show(e)},onBellClick:function(e){return!!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.checkEvent)(e)||!!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.checkKeyboardEvent)(e)&&TopNotifier.show(e)},onLoad:function onLoad(rows,js,from,header){if(!from||TopNotifierCur.from!==from){void 0!==rows&&"undefined"!==rows||(0,_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_19__.logError)("TopNotifier load undefinded response",{environment:"top_notify"});var evalExpr=`(function(){${js};})()`;try{eval(evalExpr)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.logEvalError)(e,evalExpr)}TopNotifierCur.loaded=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(TopNotifier.getContentNode(),rows),TopNotifier.trackViews(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("top_notify_show_all")),TopNotifier.refreshHeader(header),TopNotifier.cleanCount(),TopNotifier.refreshCounters(),TopNotifierCur.from=from}},trackViews:function(){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_notify_cont");"IntersectionObserver"in window&&(TopNotifierCur.viewsObserver&&TopNotifierCur.viewsObserver.disconnect(),TopNotifierCur.viewsObserver=new IntersectionObserver((function(e){e.forEach((e=>{var t=e.target.parentNode.dataset.notification_id;e.isIntersecting&&-1===TopNotifierCur.viewedNotifications.indexOf(t)&&(TopNotifierCur.viewedNotifications.push(t),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_18__.partConfigEnabled)("notifications_view_new")?(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_21__.saveStatlogEvents)({name:"notifications_views",value:t,keys:[]}):(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_10__.statlogsValueEvent)("notifications_views",t))}))}),{root:e,threshold:.6}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("feedback_row",e).forEach((function(e){TopNotifierCur.viewsObserver.observe(e)})))},refreshHeader:function(e){var t,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_notify_unread"),_=e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_top_notify_header"),o=i&&i.offsetHeight;if(_?(TopNotifierCur.header=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(e),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"top_notify_header_label"}),TopNotifierCur.header.appendChild(t)):t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("top_notify_header_label",TopNotifierCur.header),_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,"");var r="";TopNotifierCur.notify_sources.forEach((function(e){""!==e.list&&e.list===TopNotifierCur._qParams.list&&(r=e.name)})),""===r&&(r=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_notifications_user"));var a,n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"top_notify_header_sup_label"}),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"top_notify_header_label_user",innerHTML:r}),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"top_notify_header_label_groups"}),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("a",{onmouseover:function(e){TopNotifier.getSourcesTip(this,e)},className:"top_notify_header_label_groups_link",innerHTML:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_notifications_groups")});if(l.appendChild(c),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"top_notify_header_label_groups_counter",innerHTML:""}),n.appendChild(s),cur.user_has_admined_groups>0&&(n.appendChild(l),n.appendChild(a)),t.appendChild(n),o){var d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"top_notify_header_sub_label",innerHTML:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_viewed_notifications")});t.appendChild(d)}}_&&TopNotifierCur.wrapper.insertBefore(TopNotifierCur.header,TopNotifierCur.wrapper.firstChild),TopNotifierCur.header_unread=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_notify_header"),TopNotifierCur.header_unread&&(o?(TopNotifierCur.header_unread_hidden&&(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_20__.slideDown)(TopNotifierCur.header_unread,100),TopNotifierCur.header_unread_hidden=!1,TopNotifierCur.header_unread_handler||(TopNotifierCur.header_unread_height=TopNotifierCur.header_unread.offsetHeight,TopNotifierCur.header_unread_handler=function(e){if(TopNotifierCur.header_unread){var t=TopNotifierCur.header_unread.offsetTop+TopNotifierCur.header_unread_height<e.data.scrollTop;t!=TopNotifierCur.swaped&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(TopNotifierCur.header,"top_notify_header_swap_labels",t),TopNotifierCur.swaped=t)}},TopNotifierCur.scrollbar.emitter.addListener("update",TopNotifierCur.header_unread_handler))):(TopNotifierCur.header_unread_hidden||(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_20__.slideUp)(TopNotifierCur.header_unread,100),TopNotifierCur.header_unread_hidden=!0,TopNotifierCur.header_unread_handler&&(TopNotifierCur.scrollbar.emitter.removeListener("update",TopNotifierCur.header_unread_handler),TopNotifierCur.header_unread_handler=null)))},preload:function(){TopNotifier.shown()||vk.isBanned||TopNotifierCur.loaded||ajax.post("/al_feed.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(TopNotifierCur._qParams),{_preload:1}),{cache:1,onDone:function(e,t,i,_){TopNotifier.shown()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("pr","top_notify_cont")&&(TopNotifier.onLoad(e,t,i,_),TopNotifierCur.loaded=!0)},stat:["feed.css","page.css","post.css"]})},loadMore:function loadMore(){var btn=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("ui_top_notify_load_more");btn&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)(btn)&&(TopNotifierCur.ajax=ajax.post("/al_feed.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(TopNotifierCur._qParams),{from:TopNotifierCur.from,more:1,need_header:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.intval)(!((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_notify_header")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_notify_sticky")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_notify_unread")))}),{onDone:function onDone(rows,js,newFrom){if(TopNotifierCur.scrollbar){var evalExpr=`(function(){${js};})()`;try{eval(evalExpr)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.logEvalError)(e,evalExpr)}if(rows){for(var row=null,cont=TopNotifier.getContentNode(),au=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(rows);row=au.firstChild;)cont.insertBefore(row,btn);TopNotifier.refreshHeader(),TopNotifier.trackViews()}newFrom?TopNotifierCur.from=newFrom:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(btn)}},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(btn),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(btn)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(btn),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(btn)}}))},updateTime:function(e){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("rel_date_needs_update",e,"span"),(function(e,t){if(t){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.intval)(t.getAttribute("time")),_=60*((new Date).getTimezoneOffset()+180),o=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getDateText)(i,_);!0===(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(this,"ucfirst")&&(o=o.charAt(0).toUpperCase()+o.slice(1)),t.innerHTML=o}}))},createNewEventsBox:function(e){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_18__.partConfigEnabled)("notify_new_events_box")){var t=TopNotifier.getContentNode();if(t){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("notifications_new_events",t);e>0?(i||((i=document.createElement("div")).className="feed_row _feed_row notifications_new_events",i.onclick=function(e){i.onclick=null,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.showProgress)(i),TopNotifierCur._qParams.list="",TopNotifier.refresh(e,!1)}),i.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.langStr)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("notifications_new_events",e),"count",e),t.insertBefore(i,t.children[0])):i&&!TopNotifierCur.loading&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(i)}}},show:function(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("top_notify_cont",e.target))return!0;if(!0!==(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.checkEvent)(e)&&!vk.isBanned){if(TopNotifier.shown())return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("top_notify_wrap",e.target,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_nav"))||TopNotifier.hide(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e);var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)(TopNotifierCur.link),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_notify_cont");TopNotifier.updateTime(i),TopNotifierCur.timeUpdateInt=setInterval((function(){TopNotifier.updateTime(i)}),1e4),cur.introNotifyTooltipHide&&(cur.introNotifyTooltipHide(),delete cur.introNotifyTooltipHide),t.tt&&t.tt.hide&&t.tt.hide(),i||(TopNotifierCur.wrapper=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:'<div id="top_notify_cont" class="top_notify_cont wall_module" ontouchstart="event.cancelBubble = true;" onmousedown="event.cancelBubble = true;"></div><a href="/feed?section=notifications'+(TopNotifierCur._qParams.list?"&list="+TopNotifierCur._qParams.list:"")+'" class="top_notify_show_all" onmousedown="event.cancelBubble = true;" onclick="TopNotifier.hide(); return nav.go(this, event);">'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_notify_show_all")+"</a>",id:"top_notify_wrap",className:"scroll_fix_wrap top_notify_wrap"}),t.appendChild(TopNotifierCur.wrapper),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_notify_cont"));var _=window.innerHeight||document.documentElement.clientHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(i,{maxHeight:Math.min(Math.max(_-200,300),600)}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(TopNotifierCur.link,"TopNavBtn--active");var o=uiScroll;return TopNotifierCur.scrollbar&&TopNotifierCur.scrollbar.container.__uiScroll__||(TopNotifierCur.scrollbar=new o(i,{global:!0,stopScrollPropagationAlways:!0,onmore:TopNotifier.loadMore})),TopNotifierCur.loaded?TopNotifier.trackViews():TopNotifier.refresh(),window.pushNotifier&&window.pushNotifier.cleanNotification(),(0,_web_lib_cancel_stack__WEBPACK_IMPORTED_MODULE_7__.cancelStackPush)("top_notifier",TopNotifier.hide.bind(TopNotifier),!0),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e)}},hide:function(){TopNotifier.shown()&&(TopNotifierCur.viewedNotifications=[],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeClass)(TopNotifierCur.link,"TopNavBtn--active"),clearInterval(TopNotifierCur.timeUpdateInt),(0,_web_lib_cancel_stack__WEBPACK_IMPORTED_MODULE_7__.cancelStackFilter)("top_notifier",!0),""!==TopNotifierCur._qParams.list&&(TopNotifierCur._qParams.list="",TopNotifier.invalidate()))},shown:function(){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(TopNotifierCur.link,"TopNavBtn--active")},getContentNode:function(){return TopNotifierCur.scrollbar&&TopNotifierCur.scrollbar.content&&TopNotifierCur.scrollbar.container.__uiScroll__?TopNotifierCur.scrollbar.content:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_notify_cont")},showProgress:function(){var e=TopNotifier.getContentNode();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("pr",e)||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,""),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.showProgress)(e))},hideProgress:function(){var e=TopNotifier.getContentNode();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,""),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.hideProgress)(e)},showTooltip:function(e,t){if(!TopNotifier.shown()&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("dev_top_nav")){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)(TopNotifierCur.link),_={};if(i){if("shownow"==i.tt&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeAttr)(i,"tt"),e)_.text=function(){return e},t&&(_.onHide=n.pbind(t));else{i.tt&&i.tt.destroy&&i.tt.destroy();var o=ls.get("ntfseen")||{},r=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.each)(o,(function(e,t){r.push(e+":"+t)})),_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)(_,{url:"al_feed.php",params:{act:"a_last_notify",seen:r.join(";")},ajaxdt:2e3,noload:1,onHide:n})}var a=function e(t){setTimeout((function(){window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.is_idle?e(t):(t&&t.hide(),Notifier.lcSend("hide_notify_tt"))}),6e3)};(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(i,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)(_,{typeClass:"top_notify_tt",dir:"up",width:250,shift:[1,0],nohideover:1,nohide:1,onShowStart:function(e){TopNotifier.shown()&&(e.opts.onHide=!1,e.hide()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(e.container,"mousedown",(function(e){if(!e||!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.inArray)(e.target.tagName,["A","IMG"]))return TopNotifier.show(e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e)})),a(e),Notifier.setRecvClbk("hide_notify_tt",e.hide)}}))}}function n(e){if(!e&&cur.topNotifyTTKey&&(e=cur.topNotifyTTKey,delete cur.topNotifyTTKey),e){var t=e.split(":"),i=ls.get("ntfseen")||{};2===t.length&&(i[0]=parseInt((new Date).getTime()/1e3),i[t[0]]=t[1],ls.set("ntfseen",i))}}},invalidate:function(){TopNotifierCur.loaded=!1,TopNotifierCur.from="",ajax.invalidate("/al_feed.php",TopNotifierCur._qParams),TopNotifierCur.ajax&&TopNotifierCur.ajax.abort()},setCount:function(e,t){(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_9__.isString)(e)&&(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.trim)(e)),parseInt(e)>=100&&(e="+99"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(TopNotifierCur.link,"has_notify")&&e?(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_20__.animateCount)(TopNotifierCur.count,e,{str:"auto"}):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(TopNotifierCur.count,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(TopNotifierCur.link,"has_notify",!!e),t||TopNotifier.invalidate()},cleanCount:function(){if(cur.topNotifyHash){var e=cur.groupNotify_readGids||[];cur.groupNotify_readGids=[],TopNotifierCur.notify_sources.forEach((function(t,i){var _=parseInt(t.list.replace("group-",""));t.list!==TopNotifierCur._qParams.list&&-1===e.indexOf(_)||(TopNotifierCur.notify_sources[i].counter=0)})),ajax.post("/al_feed.php",{act:"a_clean_notify",hash:cur.topNotifyHash,list:TopNotifierCur._qParams.list,gn_readGids:e})}},refresh:function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),null!==e&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e),TopNotifier.invalidate(),TopNotifierCur.wrapper&&!TopNotifierCur.loading&&(TopNotifierCur.loading=!0,t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_notify_header")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_top_notify_header"))),TopNotifierCur.from=0,ajax.post("/al_feed.php",TopNotifierCur._qParams,{cache:1,onDone:(e,t,i,_)=>{TopNotifierCur.loading=!1,TopNotifier.onLoad(e,t,i,_)},showProgress:()=>{t&&TopNotifier.showProgress()},stat:["feed.css"],onFail(){TopNotifierCur.loading=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("top_notify_show_all")),TopNotifier.hideProgress(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(TopNotifier.getContentNode(),'<div class="top_notify_empty no_rows error_message"><div>'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_notify_error_occured")+'</div><button class="flat_button button_small secondary" onclick="TopNotifier.refresh(event);">'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_notify_refresh")+"</button></div>")},no_ads_params:!0}))},unifiedDeleteRow:function(e,t,i,_,o){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e);var r=o.closest(".ui_actions_menu_wrap");r&&TopNotifier.hideActionsMenu(r);var a=r&&r.dataset.for_notification_id,n=TopNotifier.getContentNode(),s=n&&n.querySelector(`.feedback_row_wrap[data-notification_id="${a}"]`),l=s&&s.closest(".feed_row"),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("post_actions",l),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("feedback_row_wrap",l);ajax.post("al_feed.php",{act:"a_feedback_unified_delete",query:t,hash:i,from:"top_notifier"},{onDone:function(e){"."!==_.substr(-1)&&(_+=".");var o=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("notifications_cancel_disable"),r=`${_} <a onclick="TopNotifier.unifiedRestoreRow('${t}', '${i}', this);return cancelEvent(event);">${o}</a>`;e&&(r+="<br>"+e);var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"feedback_deleted_container"});a.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"feedback_row dld _feedback_deleted _top_feedback_deleted",innerHTML:r})),l.appendChild(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"feedback_row_clickable")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(l,"feedback_row_touched")},showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass.pbind(c,"post_actions_progress"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeClass.pbind(c,"post_actions_progress")})},unifiedRestoreRow:function(e,t,i){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("feed_row",i),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("feedback_deleted_container",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("_feedback_deleted",_)),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("feedback_row_wrap",_);if(o&&r){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"progress_inline"});ajax.post("al_feed.php",{act:"a_feedback_unified_restore",query:e,hash:t,from:"top_notifier"},{onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeClass)(_,"feedback_row_touched")},showProgress:()=>i.parentNode.replaceChild(a,i),hideProgress:()=>a.parentNode.replaceChild(i,a)})}},notifyMarkSpam:function(e,t){ajax.post("al_feed.php",{act:"a_feedback_mark_spam",item:e,hash:t},{onDone:function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("notify_mark_spam_"+e).innerHTML=t}})},notifyDeleteAll:function(e,t,i,_){if(cur.notifyDeletingAll||(cur.notifyDeletingAll={}),!cur.notifyDeletingAll[e]){cur.notifyDeletingAll[e]=1;var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"progress_inline"});ajax.post("al_feed.php",{act:"a_feedback_delete_all",uid:e,item:i,hash:t},{onDone:function(t,i){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_feedback_deleted",_);if(1!=i){var r,a=!1;if((a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"_top_feedback_deleted")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_notify_cont"):cur.rowsCont)&&(r=a.firstChild)){var n,s,l=!1,c=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_11__.scrollGetY)();do{r.className&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(r,"_feed_row")&&r.firstChild&&e==r.firstChild.getAttribute("author")&&(n=r.offsetHeight,s=r.offsetTop,!1===l&&(l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(r.offsetParent)[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(r),s+l<c&&(c-=n,(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_11__.scrollToY)(c,0)))}while(r=r.nextSibling);(0===cur.wasScroll||cur.wasScroll>0)&&(cur.wasScroll=c)}o.innerHTML='<span class="dld_inner">'+t+"</span>"}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_feed_row",o))},showProgress:function(){_&&"button"===_.tagName.toLowerCase()?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(_):_.parentNode.replaceChild(o,_)},hideProgress:function(){_&&"button"===_.tagName.toLowerCase()?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(_):o.parentNode.replaceChild(_,o)}})}},checkClick:function(e,t){if(t=t||window.event,!e||!t)return!0;TopNotifier.trackClick(t.target);var i=t.target||t.srcElement,_=8,o=!1,r=/(feedback_row)/;do{if(!i||i===e||i.onclick||i.onmousedown||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_12__.inArray)(i.tagName,["A","IMG","TEXTAREA","EMBED","OBJECT"])||(o=i.className.match(r)))break}while(_--&&(i=i.parentNode));return!!o&&(i||!0)},detectClickRegion:function(e){switch(e.tagName){case"BUTTON":for(var t=e.parentNode.childNodes,i=1,_=0;_<t.length;++_)t[_]===e&&(i=_+1);return"button"+i;case"IMG":return e.dataset.elementName;default:return e.parentNode.closest(".feedback_attachments")?"attachments":"cell"}},trackClick:function(e){var t=e.closest(".feedback_row");if(t){for(var i=t.parentNode,_=TopNotifier.detectClickRegion(e),o=-1,r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("feedback_row"),a=0;a<r.length;++a)if(r[a]===t){o=a;break}(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_10__.statlogsValueEvent)("notifications_click",0,i.dataset.notification_type,o,i.dataset.notification_id,_)}},loadMoreUngrouped:(e,t,i)=>{ajax.post("/al_feed.php",{act:"ungroup_notifications",query:t,from:i},{onDone:(i,_,o)=>{if(!_&&o){if(!i)return TopNotifier.loadMoreUngrouped(e,t,o),!1;i+='<div class="feedback_group_loadmore_button" onclick="TopNotifier.loadMoreUngrouped(this, \''+t+"', '"+o+"')\">"+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("notifications_show_more")+"</div>"}e.outerHTML=i},showProgress:()=>{e.innerHTML="",(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.showProgress)(e)},hideProgress:()=>e.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("notifications_show_more"),no_ads_params:!0})},ungroupUnified:function(e,t,i,_){if(void 0===i&&(i=null),void 0===_&&(_=""),null!==i){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("feed_row",e),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("post_actions",o);ajax.post("/al_feed.php",{act:"ungroup_notifications",query:i,from:_},{onDone:(_,o,r)=>{if(!o&&r){if(!_)return TopNotifier.ungroupUnified(e,t,i,r),!1;_+='<div class="feedback_group_loadmore_button" onclick="TopNotifier.loadMoreUngrouped(this, \''+i+"', '"+r+"')\">"+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("notifications_show_more")+"</div>"}e.parentNode.outerHTML=_},showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass.pbind(r,"post_actions_progress"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeClass.pbind(r,"post_actions_progress"),no_ads_params:!0})}else e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_feed_row",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(e)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(e);t.stopPropagation(),t.preventDefault()},showActionsMenu:function(e){var t=!1,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_feed_row",e),_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(i);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_notify_unread")&&(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_)),!(_.lastChild!=i||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"feed_row_fb_hidden")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"feedback_sticky_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).lastChild!=_)){t={appendParentCls:"top_notify_wrap",processHoverCls:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(e),"post_actions")?"feedback_row":"feedback_sticky_row"};var o=e.dataset.for_notification_id;o&&(t.wrapAttrs={"data-for_notification_id":o})}uiActionsMenu.show(e,!1,t)},hideActionsMenu:function(e){uiActionsMenu.hide(e)},frProcess:function(e,t,i,_){var o;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)(i)||(o=_?{act:"add",mid:e,hash:t,request:1,from:"top_notifier"}:{act:"remove",mid:e,hash:t,report_spam:1,from:"top_notifier"},(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_10__.statlogsValueEvent)("feed_top_notify",0,"friends",o.act),ajax.post("/al_friends.php",o,{onDone:function(t,o){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(r,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(r,"feedback_buttons_response"),"friends"==cur.module&&window.Friends&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("request_controls_"+e,t),window.Friends.processRequest(e,_)),o&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_24__.showDoneBox)(o)},onFail:function(e){if(e)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_error"),e).hide,3e3),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(i),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(i)}))},apiCallProcess:function(e,t){if(!(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_23__.isObject)(e)||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)(t))return!1;var i=e.query,_=e.successText,o=e.successIcon,r=e.confirmTitle,a=e.confirmText,n=e.confirmOkLabel,s=e.confirmCancelLabel,l=e.snackbarText,c=e.replaceAllActions,d=function(){ajax.post("/al_feed.php",{act:"a_api_call",hash:cur.topNotifyHash,query:i},{onDone:function(e){var i;switch(o){case"done":i=(0,_icons_desktop_getIcon20Check__WEBPACK_IMPORTED_MODULE_27__.getIcon20Check)().icon;break;case"cancel":i=(0,_icons_desktop_getIcon20Cancel__WEBPACK_IMPORTED_MODULE_28__.getIcon20Cancel)().icon}var r=`<div class="feedback_apicallText">${i?`<div class="feedback_apicallText__icon">${i}</div>`:""}${_}</div>`;if(c){var a=t.parentElement;a&&(a.innerHTML=r)}else t.outerHTML=r;l&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_24__.showDoneBox)(l)},onFail:function(e){if(e)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_error"),e).hide,3e3),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(t),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(t)})};return a?(r=r||(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_action_confirmation"),cur.confirmBox=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showFastBox)(r,a,n,(function(){d(),cur.confirmBox.hide()}),s)):d(),!0},joinGroup:function(e,t,i,_){ajax.post("/al_groups.php",{act:"enter",gid:e,hash:t,from:"top_notifier",context:_},{onDone:function(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(t,"feedback_buttons_response")},onFail:function(e){if(e)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_error"),e).hide,3e3),!0},showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(i)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(i)}})},grProcess:function(e,t,i,_){if(!((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"flat_button")&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)(i)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(i)&&"progress_inline"==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(i))){var o=-2==_?"spam":_?"enter":"leave",r=-1==_?"_decline":"";ajax.post("/al_groups.php",{act:o,gid:e,hash:t,from:"top_notifier",context:r},{onDone:function(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(t,"feedback_buttons_response")},onFail:function(e){if(e)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_error"),e).hide,3e3),!0},showProgress:function(){if(-2==_){i.oldhtml=i.innerHTML;var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(i)[0];i.innerHTML='<span class="progress_inline"></span>',(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(i),{width:e})}else(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(i)},hideProgress:function(){-2==_?i.innerHTML=i.oldhtml:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(i)}})}},gn_grProcess:function(e,t,i,_,o,r){return o.stopPropagation(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"flat_button")&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)(_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(_)&&"progress_inline"==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(_)||ajax.post("groupsedit.php",{act:"user_action",id:e,addr:t,hash:i,from:"top_notifier",action:r},{onDone:function(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_);return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(t,"feedback_buttons_response"),!1},onFail:function(e){return!!e&&(setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_error"),e).hide,3e3),!1)},showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(_)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(_)}}),!1},showGiftBox:function(e,t,i){return!(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showBox)("al_gifts.php",{act:"get_gift_box",fids:e,fr:1,ref:i},{stat:["gifts.css","wide_dd.js","wide_dd.css"],cache:1,dark:1},t)},getSourcesTip:function(e,t){return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(t),(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(e,{url:"/al_page.php",params:{act:"notify_get_sources",cur_list:TopNotifierCur._qParams.list},slide:15,ajxdt:200,hidedt:200,dir:"bottom",shift:[100,10],id:"notify_sources",className:"notify_sources",onShowStart:function(){TopNotifierCur.notify_sources.forEach((function(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("notify_tooltip_counter"+e.list),e.counter>0?e.counter:"")})),TopNotifier.refreshTooltip()}}),!1},changeSource:function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),null!==i&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(i),e!==TopNotifierCur._qParams.list?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("notify_sources")),t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("ui_rmenu_count",t),""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("top_notify_show_all")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.attr)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("top_notify_show_all"),"href","/feed?section=notifications"+(e?"&list="+e:"")),TopNotifierCur._qParams.list=e,TopNotifier.refresh()):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("notify_sources"))},changeSourceFullCallback:function(){TopNotifier.refreshCounters(),TopNotifierCur.notify_sources.forEach((function(e){e.list&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("ui_rmenu_count",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("feed_section_"+e.list)),e.counter>0?e.counter:"")}));var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByTag1)("a",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("header_side_link",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("feed_notifications")));""===TopNotifierCur.settings_url?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(e):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.attr)(e,"href",TopNotifierCur.settings_url)),TopNotifierCur.source_name||(TopNotifierCur.source_name=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("news_title_notifications")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("page_block_header_inner",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("feed_notifications")),TopNotifierCur.source_name)},hideBanner:function(e,t,i){ajax.post("al_feed.php",{act:"a_feedback_hide_banner",group_id:i,hash:t}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("internal_notification131"))},addNewSource:function(e,t,i){return ajax.post("al_settings.php",{act:"a_group_notify_add_source",gid:e,from:i,hash:t},{onDone:function(t){nav.go("/settings?act=group_notify&gid="+e),TopNotifier.changeSource("group-"+e,null,null)},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton.pbind(cur.popupSubmitBtnEl),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton.pbind(cur.popupSubmitBtnEl)}),!0},refreshCounters:function(){var e=0,t=0,i=0,_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("top_notify_header_label_groups_counter");TopNotifierCur.notify_sources.forEach((function(_){""!==_.list&&_.counter>0&&(1===_.unmuted?t++:e++),""===_.list&&(i=_.counter)})),vk.counts.ntf=i+t,TopNotifier.setCount(i+t,!0),TopNotifier.createNewEventsBox(i),t>0?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.addClass)(_,"unmuted"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_,t)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeClass)(_,"unmuted"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_,e>0?e:""))},refreshTooltip:function(){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("groups",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("notify_sources")),t=[],i=[],_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div");e&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("line_cell",e).forEach((function(e,_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass1)("ui_rmenu_count",e))>0?t.push(e):i.push(e)})),t.concat(i).forEach((function(e){_.appendChild(e)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,""),e.appendChild(_))},showCommonFriendsBox:function(e,t){return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showTabbedBox)("al_page.php",{act:"box",oid:t,tab:"common"},{cache:1},e),!1},userSatisfactionModeration:function(){return ajax.post("user_satisfaction_moderation.php",{act:"questions"},{onDone:e=>{(0,_shared_lib_init_react__WEBPACK_IMPORTED_MODULE_25__.showComponentInBox)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_web_reports_UserSatisfactionModeration_UserSatisfactionModeration__WEBPACK_IMPORTED_MODULE_26__.UserSatisfactionModeration,{hash:e.hash,questions:e.questions,form:e.form}))}}),!0}},vk.widget||((0,_shared_evbus__WEBPACK_IMPORTED_MODULE_22__.tq)().setInteractiveHandler("Gifts/show_received_gifts",(e=>{var t=e.event,i=e.payload.dataAttrs.userId;(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.showBox)("al_gifts.php",{act:"box",tab:"received",mid:i},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]},t)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_22__.tq)().setInteractiveHandler("Gifts/show_gifts_catalog",(e=>{var t=e.event,i=e.payload.dataAttrs,_=i.toId,o=i.ref;window.TopNotifier.showGiftBox(_,t,o)})))},67181:(e,t,i)=>{i.d(t,{EntityType:()=>_,EventQueue:()=>r});var _,o=i(70655);!function(e){e.Online="online"}(_||(_={}));var r=function(e){var t=this,i=e.getQueue,_=e.registerQueue;this.QUEUE_KEY_TTL=3e3,this.MAX_RETRIES=5,this.listeners=[],this.retriesLeft=this.MAX_RETRIES,this.restart=function(){t.intervalId&&clearInterval(t.intervalId),0!==t.retriesLeft&&(t.retriesLeft--,t.getQueue().then((function(e){t.retriesLeft=t.MAX_RETRIES;var i=(0,o.__assign)({},e);t.intervalId=window.setInterval((function(){t.registerQueue(i,(function(e,_){var r,a,n,s;if(function(e){return void 0!==e.err}(_))t.restart();else{i.ts=_.ts;try{for(var l=(0,o.__values)(_.events),c=l.next();!c.done;c=l.next()){var d=c.value;try{for(var u=(n=void 0,(0,o.__values)(t.listeners)),f=u.next();!f.done;f=u.next())(0,f.value)(d)}catch(e){n={error:e}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}}}))}),t.QUEUE_KEY_TTL)})).catch((function(e){console.error(e),setTimeout(t.restart,t.QUEUE_KEY_TTL)})))},this.subscribe=function(e){return t.listeners.push(e),1===t.listeners.length&&t.restart(),function(){t.listeners=t.listeners.filter((function(t){return t!==e})),0===t.listeners.length&&(t.retriesLeft=t.MAX_RETRIES,t.intervalId&&clearInterval(t.intervalId))}},this.registerQueue=_,this.getQueue=i}},21295:(e,t,i)=>{i.d(t,{screenWakeLocker:()=>_});var _=new(function(){function e(){this.onVisibilityChange=this._onVisibilityChange.bind(this)}return e.prototype._onVisibilityChange=function(){this.wakeLockSentinel&&"visible"===document.visibilityState&&this.lock().then((function(){})).catch(console.error)},e.prototype.requestWakeLock=function(){var e=this;return navigator.wakeLock?this.wakeLockSentinel?Promise.resolve():navigator.wakeLock.request("screen").then((function(t){e.wakeLockSentinel=t})):Promise.reject()},e.prototype.isLocked=function(){return!!this.wakeLockSentinel&&!this.wakeLockSentinel.released},e.prototype.lock=function(){var e=this;return this.requestWakeLock().then((function(){e.wakeLockSentinel&&document.addEventListener("visibilitychange",e.onVisibilityChange)})).catch((function(){}))},e.prototype.unlock=function(){var e=this;return this.wakeLockSentinel?(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.wakeLockSentinel.release().finally((function(){e.wakeLockSentinel=null}))):Promise.resolve()},e}())},84683:(e,t,i)=>{i.d(t,{DEPRECATEDLongpollAdapter:()=>d});var _=i(70655),o=i(68040);function r(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=function(e){return e<10?"0"+e.toString():e.toString()},r=new Date,a=r.getHours()+":"+o(r.getMinutes())+":"+o(r.getSeconds()),n="background: "+e+"; color: white";window.__sseDebug&&console.debug.apply(console,(0,_.__spreadArray)(["%c"+a+" SSE:",n],(0,_.__read)(t),!1))}window.sseDebug=function(e){window.__sseDebug=e,window.__debugMode=e};var a=function(e,t){var i=this,a=t.starterConfig,s=t.refreshedConfig;this.listeners=[],this.reconnect=function(e){if(void 0===e&&(e=200),r("none","new connection requested"),0!==i.listeners.length){var t=e>500;t&&i.simulate([-3,e/1e3]);var a=(0,o.toQueryString)({key:i.config.key,ts:i.config.ts,uid:i.config.userId,version:14,mode:1226});i.connectionLimiter.scheduleReconnect(i.config.url+"?"+a,{onConnect:function(){t&&i.simulate([-4])},onOpen:function(){r("green","connection opened"),e=200,i.simulate([-5])},onClose:function(){var t=n(e);r("red","connection closed, reconnect in",t),i.reconnect(t)},onMessage:function(t){var o,a,s=JSON.parse(t.data);if(r("none","message received",s),void 0!==s.failed)switch(i.connectionLimiter.disconnect(),s.failed){case 1:i.simulate([-1]),i.config.ts=s.ts,i.reconnect();break;case 2:case 3:r("none","requesting new config"),i.refreshedConfig().then((function(e){r("none","new config received",e),i.config=(0,_.__assign)((0,_.__assign)({},e),{url:i.config.url}),i.simulate([-1]),i.reconnect()})).catch((function(t){r("red","error on updating key",t);var _=n(e);i.reconnect(_)}));break;case 4:throw new Error("Unknown longpoll version");default:throw new Error("Unknown longpoll error")}else{i.config.ts=s.ts;try{for(var l=(0,_.__values)(i.listeners),c=l.next();!c.done;c=l.next())(0,c.value)(s.updates)}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}}}},e)}else r("none","no listeners, aborting reconnect")},this.skipWaiting=function(){i.isConnected()||r("none","skip waiting"),i.connectionLimiter.skipWaiting()},this.subscribe=function(e){return r("none","new client subscribed"),i.listeners.push(e),1===i.listeners.length&&i.reconnect(200),function(){r("none","client unsubscribed"),i.listeners.includes(e)&&(i.listeners=i.listeners.filter((function(t){return e!==t})),0!==i.listeners.length||i.connectionLimiter.disconnect())}},this.simulate=function(){for(var e,t,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];r("none","simulating events",o);try{for(var n=(0,_.__values)(i.listeners),s=n.next();!s.done;s=n.next()){var l=s.value;l(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},this.isConnected=function(){return i.connectionLimiter.isConnected()},this.config=a(),this.refreshedConfig=s,this.connectionLimiter=e};function n(e){return Math.min(2*e,6e4)}var s=function(){var e=this;this.scheduleReconnect=function(t,i,_){var o=i.onConnect,a=i.onOpen,n=i.onMessage,s=i.onClose;void 0===_&&(_=0),e.disconnect(),r("none","scheduling reconnection in",_);var l=function(){r("green","creating new EventSource");var i=new EventSource(t);setTimeout(o,0),i.addEventListener("open",a),i.addEventListener("message",(function(t){e.resetPingTimeout(s),n(t)})),i.addEventListener("ping-interval",(function(t){var i=JSON.parse(t.data);r("none","ping interval received",i),e.pingInterval=i})),i.addEventListener("ping",(function(){e.resetPingTimeout(s)})),i.addEventListener("error",(function(){switch(r("red","EventSource error, readyState:",i.readyState),e.pingTimeoutId&&clearTimeout(e.pingTimeoutId),i.readyState){case EventSource.CONNECTING:case EventSource.OPEN:break;case EventSource.CLOSED:s()}})),e.source=i},c=window.setTimeout((function(){e.scheduled=void 0,l()}),_);e.scheduled={timeoutId:c,reconnect:l}},this.skipWaiting=function(){if(e.scheduled){var t=e.scheduled,i=t.timeoutId,_=t.reconnect;e.scheduled=void 0,clearTimeout(i),_()}},this.disconnect=function(){r("red","disconnecting EventSource"),e.scheduled&&(clearTimeout(e.scheduled.timeoutId),e.scheduled=void 0),e.pingTimeoutId&&clearTimeout(e.pingTimeoutId),e.source&&e.source.close()},this.isConnected=function(){return!!e.source&&e.source.readyState===EventSource.OPEN},this.resetPingTimeout=function(t){if(e.pingTimeoutId&&clearTimeout(e.pingTimeoutId),e.pingInterval){var i=e.pingInterval+1e3;e.pingTimeoutId=window.setTimeout((function(){r("red","connection ping timed out"),e.disconnect(),t()}),i)}}},l=i(63825),c=i(87294),d=function(e,t,i,o){var n=this;this.buffer=[],this.paused=0,this.subscriptions=[],this.onData=function(e){n.subscriptions.push(e),n.unsubscribe||(n.unsubscribe=n.source.subscribe((function(e){var t,i,o,r=e.map(l.constructEvent);if(n.isPaused())(t=n.buffer).push.apply(t,(0,_.__spreadArray)([],(0,_.__read)(r),!1));else try{for(var a=(0,_.__values)(n.subscriptions),s=a.next();!s.done;s=a.next())s.value.apply(void 0,(0,_.__spreadArray)([],(0,_.__read)(r),!1))}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}})))},this.offData=function(e){n.subscriptions=n.subscriptions.filter((function(t){return t!==e})),0===n.subscriptions.length&&n.unsubscribe&&(n.unsubscribe(),n.unsubscribe=void 0)},this.push=function(e){var t,i;e.length>0&&"transition_event"!==e[0].type&&r("none","pushed events",e);try{for(var o=(0,_.__values)(n.subscriptions),a=o.next();!a.done;a=o.next())a.value.apply(void 0,(0,_.__spreadArray)([],(0,_.__read)(e),!1))}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}},this.isPaused=function(){return n.paused>0},this.pause=function(){r("none","paused longpoll"),n.paused++},this.resume=function(){var e,t;if(0!==n.paused&&(r("none","resumed longpoll"),n.paused--,0!==n.buffer.length)){var i=n.buffer;n.buffer=[];try{for(var o=(0,_.__values)(n.subscriptions),a=o.next();!a.done;a=o.next())a.value.apply(void 0,(0,_.__spreadArray)([],(0,_.__read)(i),!1))}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}},this.abortWaiting=function(){n.source.skipWaiting()},this.isEnabled=function(){return n.source.isConnected()},this.isSSE=!0,this.source=new a(new s,{starterConfig:function(){return{key:e,ts:t,url:i,userId:o}},refreshedConfig:function(){return function(e){return new Promise((function(t,i){var _=!1,o=setTimeout((function(){_=!0,i(new Error("timeout"))}),1e3);(0,c.post)("al_im.php",{act:"a_get_key",uid:e,gid:Math.max(-e,0)},1e3).then((function(e){_||(t(e),clearTimeout(o))})).catch((function(e){_||(i(e),clearTimeout(o))}))}))}(o).then((function(e){var t=(0,_.__read)(e,4);return{key:t[0],url:t[1]+"/"+t[2],ts:t[3],userId:o}}))}})}},21880:(e,t,i)=>{var _=i(86409),o=i(87481),r=i(95724),a=i(15544),n=i(88379),s=(i(24817),i(26271)),l=i(35676),c=i(49535),d=i(40906);window.curRBox||(window.curRBox={guid:0,active:!1,focused:[],tabs:{}});function u(e,t){var i=this;i.options=t=(0,r.extend)({minH:50,minW:50},t),i.content=e;var o=i.id="rb_box_"+(t.id||curRBox.guid++);i.wrap=(0,a.ce)("div",{id:o,className:"rb_box_wrap fixed"+(t.fixed?" fc_fixed":"")}),i.wrap.innerHTML+='<div class="tt-fastchat-wrap"></div>';var n={};i.toBottom=i.toRight=!1,t.fixed?(n.bottom=0,n.right=72):(void 0!==t.startTop?n.top=t.startTop:void 0!==t.startBottom&&(n.bottom=t.startBottom),void 0!==t.startLeft?n.left=t.startLeft:void 0!==t.startRight&&(n.right=t.startRight)),(0,a.setStyle)(i.wrap,n),t.movable&&(0,c.addEvent)(t.movable,"mousedown",i._head_mdown.bind(i)),i.resizeableH=t.resizeableH||e,t.startHeight&&(0,a.setStyle)(i.resizeableH,"height",t.startHeight),i.resizeableW=t.resizeableW||e,t.startWidth&&(0,a.setStyle)(i.resizeableW,"width",t.startWidth),(0,c.addEvent)(e,"mousedown",i._cont_mdown.bind(i)),t.closer&&((0,c.addEvent)(t.closer,"mousedown",i._close_mdown.bind(i)),(0,c.addEvent)(t.closer,"click",i._close_click.bind(i))),t.hider&&((0,c.addEvent)(t.hider,"mousedown",i._close_mdown.bind(i)),(0,c.addEvent)(t.hider,"click",i._hide_click.bind(i))),t.minimizer&&!0!==t.minimizer&&((0,c.addEvent)(t.minimizer,"mousedown",i._close_mdown.bind(i)),(0,c.addEvent)(t.minimizer,"click",i._min_toggle.bind(i))),i.wrap.appendChild(e),!1!==t.resize&&(i.resizeWrap=(0,a.ce)("div",{className:"rb_resize_wrap",innerHTML:'<div class="chats_sp rb_resize"></div>'}),i.wrap.appendChild(i.resizeWrap),(0,c.addEvent)(i.resizeWrap,"mousedown",i._resize_mdown.bind(i))),t.minimized&&((0,a.addClass)(i.wrap,"rb_minimized"),i.minimized=!0),bodyNode.insertBefore(i.wrap,(0,a.ge)("page_wrap"));var l=(0,a.getStyle)(i.wrap,"top"),d=(0,a.getStyle)(i.wrap,"bottom"),u=(0,a.getStyle)(i.wrap,"left"),f=(0,a.getStyle)(i.wrap,"right");this.toBottom=("auto"===l||""===l||s.browser.msie&&0===l)&&"auto"!=d&&""!==d&&!(s.browser.msie&&0===d),this.toRight=("auto"===u||""===u||s.browser.msie&&0===u)&&"auto"!=f&&""!==f&&!(s.browser.msie&&0===f),this.toRight&&(0,a.setStyle)(i.wrap,{marginRight:lastWndScroll[0]?(0,_.sbWidth)():0}),(t.nofocus||t.noshow)&&(0,a.addClass)(i.wrap,"rb_inactive"),this.toBottom&&((0,a.setStyle)(i.wrap,{marginRight:lastWndScroll[0]?(0,_.sbWidth)():0}),(0,a.addClass)(i.wrap,"fc_tobottom")),this.options.marginFixedToLayer&&(0,a.setStyle)(i.wrap,{marginRight:(0,a.hasClass)(document.body,"layers_shown")?(0,_.sbWidth)():0}),curRBox.tabs[o]=i,i.pos=!1,t.noshow?((0,a.setStyle)(i.wrap,{visibility:"hidden",display:"block"}),i._update_pos(),(0,a.setStyle)(i.wrap,{visibility:"",display:""})):i.show(!1,t.nofocus)}(0,r.extend)(u.prototype,{show:function(e,t){var i=this;void 0===e&&(e=0),e?((0,a.setStyle)(i.wrap,{opacity:0,display:"block"}),i.visible=!0,!t&&i.focus(),(0,l.animate)(i.wrap,{opacity:1},e,(function(){(0,a.setStyle)(i.wrap,s.browser.msie?{filter:"none"}:{opacity:""}),i._update_pos()}))):((0,a.show)(i.wrap),i.visible=!0,!t&&i.focus(),i._update_pos()),i.options.onShow&&i.options.onShow()},hide:function(e,t,i){var _=this;if(!t&&_.options.onBeforeHide&&_.options.onBeforeHide())return!0;void 0===e&&(e=0),e?((0,a.setStyle)(_.wrap,{opacity:1,display:"block"}),(0,l.animate)(_.wrap,{opacity:0},e,(function(){(0,a.hide)(_.wrap),(0,a.setStyle)(_.wrap,s.browser.msie?{filter:"none"}:{opacity:""})}))):(0,a.hide)(_.wrap),_.visible=!1,!t&&_.options.onHide&&_.options.onHide(i||{})},_head_mdown:function(e){if(!(0,c.checkEvent)(e)){(e.originalEvent||e).cancelBubble=!0;var t,i,o=this,n=e.target,l=getWndInner(),d=curRBox.active==o.id,u=e.pageY,f=e.pageX,h=o.wrap.offsetHeight,p=o.wrap.offsetWidth,g=0,b=0,m=l[0]-h,v=l[1]-p,E=s.browser.msie?"selectstart":"mousedown";o.options.fixed&&FastChat.pinTab(o.options.peer||-1,e,!0),d||o.focus(e),o.toBottom?(o.toBottom=!1,t=l[0]-(0,r.intval)((0,a.getStyle)(o.wrap,"bottom"))-h,(0,a.setStyle)(o.wrap,{top:t,bottom:"auto"}),(0,a.removeClass)(o.wrap,"fc_tobottom")):t=(0,r.intval)((0,a.getStyle)(o.wrap,"top")),o.toRight?(o.toRight=!1,i=l[1]-(0,r.intval)((0,a.getStyle)(o.wrap,"right"))-p,(0,a.setStyle)(o.wrap,{left:i,right:"auto"})):i=(0,r.intval)((0,a.getStyle)(o.wrap,"left")),g=t,b=i,cur._fcdrag=1;var C=function(e){return g=Math.max(0,Math.min(m,t+e.pageY-u)),m-g<10?g=m:g<10&&(g=0),o.wrap.style.top=g+"px",b=Math.max(0,Math.min(v,i+e.pageX-f)),v-b<10?b=v:b<10&&(b=0),o.wrap.style.left=b+"px",(0,c.cancelEvent)(e)};return(0,c.addEvent)(document,"mousemove",C),(0,c.addEvent)(document,"mouseup",(function e(t){cur._fcdrag=0,(0,c.removeEvent)(document,"mousemove",C),(0,c.removeEvent)(document,"mouseup",e),(0,c.removeEvent)(document,E,c.cancelEvent),(0,a.setStyle)(bodyNode,"cursor",""),(0,a.setStyle)(n,"cursor",""),(o.toBottom=g>=m-5)&&((0,a.setStyle)(o.wrap,{top:"auto",bottom:0}),(0,a.addClass)(o.wrap,"fc_tobottom")),(o.toRight=b>=v-5)&&(0,a.setStyle)(o.wrap,{left:"auto",right:0,marginRight:lastWndScroll[0]?(0,_.sbWidth)():0}),o._update_pos();var i=Math.abs(t.pageY-u)<3&&Math.abs(t.pageX-f)<3;cur._fcpromo>0?cur._fcpromo=i?0:-1:o.options.minimizer&&i?!o.minimized&&d?o.minimize(!0):o.minimized&&o.unminimize(!0):o.options.onDragEnd&&o.options.onDragEnd(o.toBottom?-1:g/l[0],o.toRight?-1:b/l[1])})),(0,c.addEvent)(document,E,c.cancelEvent),(0,a.setStyle)(bodyNode,"cursor","move"),(0,a.setStyle)(n,"cursor","move"),!1}},_resize_mdown:function(e){if(!(0,c.checkEvent)(e)){this.focus(e);var t,i,o=this,n=e.target,l=getWndInner(),d=e.pageY,u=e.pageX,f=o.wrap.offsetHeight,h=o.wrap.offsetWidth,p=0,g=0,b=o.resizeableH.clientHeight-(0,r.intval)((0,a.getStyle)(o.resizeableH,"paddingBottom"))-(0,r.intval)((0,a.getStyle)(o.resizeableH,"paddingTop")),m=o.resizeableW.clientWidth-(0,r.intval)((0,a.getStyle)(o.resizeableW,"paddingRight"))-(0,r.intval)((0,a.getStyle)(o.resizeableW,"paddingLeft")),v=s.browser.msie?"selectstart":"mousedown",E=!s.browser.msie&&o.options.onResize||!1;o.toBottom?(o.toBottom=!1,t=l[0]-(0,r.intval)((0,a.getStyle)(o.wrap,"bottom"))-f,(0,a.setStyle)(o.wrap,{top:t,bottom:"auto"}),(0,a.removeClass)(o.wrap,"fc_tobottom")):t=(0,r.intval)((0,a.getStyle)(o.wrap,"top")),o.toRight?(o.toRight=!1,i=l[1]-(0,r.intval)((0,a.getStyle)(o.wrap,"right"))-h,(0,a.setStyle)(o.wrap,{left:i,right:"auto"})):i=(0,r.intval)((0,a.getStyle)(o.wrap,"left")),o.options.onResizeStart&&o.options.onResizeStart(b,m);var C=b+l[0]-t-f,w=m+l[1]-i-h,M=function(e){return p=Math.max(o.options.minH,Math.min(C,b+e.pageY-d)),C-p<10&&(p=C),o.resizeableH.style.height=p+"px",g=Math.max(o.options.minW,Math.min(w,m+e.pageX-u)),w-g<10&&(g=w),o.resizeableW.style.width=g+"px",E&&E(p,g),(0,c.cancelEvent)(e)};return(0,c.addEvent)(document,"mousemove",M),(0,c.addEvent)(document,"mouseup",(function e(t){(0,c.removeEvent)(document,"mousemove",M),(0,c.removeEvent)(document,"mouseup",e),(0,c.removeEvent)(document,v,c.cancelEvent),(0,a.setStyle)(bodyNode,"cursor",""),(0,a.setStyle)(n,"cursor",""),(o.toBottom=p==C)&&((0,a.setStyle)(o.wrap,{top:"auto",bottom:0}),(0,a.addClass)(o.wrap,"fc_tobottom")),(o.toRight=g==w)&&(0,a.setStyle)(o.wrap,{left:"auto",right:0,marginRight:lastWndScroll[0]?(0,_.sbWidth)():0}),o._update_pos(),o.options.onResizeEnd&&o.options.onResizeEnd(p,g,l[0],l[1],o.toBottom,o.toRight)})),(0,c.addEvent)(document,v,c.cancelEvent),(0,a.setStyle)(bodyNode,"cursor","move"),(0,a.setStyle)(n,"cursor","move"),!1}},_update_pos:function(){var e=this;e.pos=[e.wrap.offsetTop,e.wrap.offsetLeft,e.wrap.offsetHeight,e.wrap.offsetWidth]},_wnd_resize:function(e,t,i){var _=this;_.toBottom&&(_.pos[0]=_.wrap.offsetTop),_.toRight&&(_.pos[1]=_.wrap.offsetLeft);var o={},r=!1,n=!1,s=_.pos[0]+_.pos[2]-e,l=_.pos[0],c=_.resizeableH.clientHeight-_.options.minH,d=_.pos[1]+_.pos[3]-t,u=_.pos[1],f=!1!==_.options.resize?_.resizeableW.clientWidth-_.options.minW:0;i&&(f<0&&(0,a.setStyle)(_.resizeableW,_.options.minW),c<0&&(0,a.setStyle)(_.resizeableH,_.options.minH)),(s<=0||l<=0&&c<=0)&&(d<=0||u<=0&&f<=0)||(s>0&&l>0&&(s-=l=Math.min(s,l),o.top=_.pos[0]-l,o.bottom=""),s>0&&c>0&&(c=Math.min(s,c),r=_.resizeableH.clientHeight-c),d>0&&u>0&&(d-=u=Math.min(d,u),o.left=_.pos[1]-u,o.right=""),d>0&&f>0&&(f=Math.min(d,f),n=_.resizeableW.clientWidth-f),!1!==n&&(0,a.setStyle)(_.resizeableW,"width",n),!1!==r&&(0,a.setStyle)(_.resizeableH,"height",r),(0,a.setStyle)(_.wrap,o),_._update_pos(),_.options.onResize&&_.options.onResize(_.resizeableH.clientHeight,_.resizeableW.clientWidth))},_cont_mdown:function(e){if(curRBox.active!=this.id&&(this.focus(e),!(0,a.hasClass)(e.target,"fc_editable")))return(0,c.cancelEvent)(e)},_focus:function(){var e=this,t=(0,r.indexOf)(curRBox.focused,e.id),i=curRBox.active,_=i&&curRBox.tabs[i];if(i!=e.id){_&&(0,d.isFunction)(_.options.onBlur)&&_.options.onBlur(),-1!=t&&curRBox.focused.splice(t,1),curRBox.focused.unshift(e.id);var o=1e4+curRBox.focused.length,n=!0;(0,r.each)(curRBox.focused,(function(e,t){var i=curRBox.tabs[t].wrap;n?((0,a.addClass)(i,"rb_active"),(0,a.removeClass)(i,"rb_inactive"),curRBox.active=t,n=!1):((0,a.removeClass)(i,"rb_active"),(0,a.addClass)(i,"rb_inactive")),(0,a.setStyle)(i,"zIndex",o),o--}))}},_hide_click:function(){this.hide()},minimize:function(e){var t=this,i=t.wrap;if(t.options.fixed)return!1;(0,a.addClass)(i,"rb_minimized"),t.minimized=!0,t._update_pos(),e&&t.options.onMinimize&&t.options.onMinimize(0)},unminimize:function(e){var t=this,i=t.wrap,_=getWndInner();(0,a.removeClass)(i,"rb_minimized"),t.minimized=!1,t._update_pos(),t._wnd_resize(_[0],_[1],!0),curRBox.active=!1,t.focus(),e&&t.options.onMinimize&&t.options.onMinimize(1)},_min_toggle:function(e){var t=this;setTimeout((function(){t.minimized?t.unminimize(!0):t.minimize(!0)}),50)},destroy:function(){var e=this,t=(0,r.indexOf)(curRBox.focused,e.id);-1!=t&&curRBox.focused.splice(t,1),(0,a.cleanElems)(e.wrap,e.resizeWrap,e.content,e.options.movable,e.options.closer,e.options.hider),(0,a.re)(e.wrap),delete curRBox.tabs[e.id]},_close_mdown:function(e){(e.originalEvent||e).cancelBubble=!0},_close_click:function(e){this.close()},_close:function(e){this.destroy(),curRBox.focused[0]&&!0!==e&&curRBox.tabs[curRBox.focused[0]].focus()},focus:function(e){var t=this,i=curRBox.active!=t.id||!0;return t._focus(),i&&(0,d.isFunction)(t.options.onFocus)&&t.options.onFocus(e),i},close:function(){var e=this,t=e.pos;e._close(),(0,d.isFunction)(e.options.onClose)&&e.options.onClose(t)}}),window.RBox=u;i(67537),i(50110),i(20075),i(66108),i(21466),i(83946),i(51876),i(59357),i(75115),i(19371),i(98837),i(91181),i(56997),i(76774),i(40851),i(96253);var f=i(54612),h=i(82452),p=i(416),g=i(35429),b=i(27909),m=i(86125),v=i(76852),E=i(86067),C=i(61540),w=i(28238),M=i(29164),P=i(20929),T=i(32656),O=i(40157),D=i(78613),y=i(63825);i(81303);var I=i(87294),k=i(91040),B=i(60615),L=i(94940),A=i(39464),F=i(54593),N=i(63035),R=i(37867),x=i(48743);function U(){return U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(e[_]=i[_])}return e},U.apply(this,arguments)}var S=1e4,W="fc_msgs_unread",K="WithCollapsedFastChats";function q(){return!curFastChat.version||!curFastChat.tabs}function H(e,t){return{name:e[0],photo:e[1],fname:e[2],hash:e[3],sex:e[4],link:e[5],online:curFastChat.onlines[t]}}window.curFastChat||(window.curFastChat={}),window.FastChat={init:function(e){var t=this;0!==vk.id&&((0,r.extend)(curFastChat,{tabs:{},needPeers:{},gotPeers:{},needMedia:{},gotMedia:{},ldb:(0,w.mount)(vk.id),myTypingEvents:{},typingEvents:{},inited:!0,options:e,posSeq:0,error_timeout:1,lpInstance:Notifier.getLpInstance()}),delete curFastChat.standby,delete curFastChat.standbyTO,curFastChat.lpInstance.onData((function(){for(var e=arguments.length,i=new Array(e),_=0;_<e;_++)i[_]=arguments[_];var o=t.getResourcesThatShouldBeLoaded(i),r=o.shouldLoad?t.loadResources(o):Promise.resolve();r.then((()=>{i.forEach((e=>{switch(e.type){case y.TYPING:var i=t.getTab(e.peerId);t.setTyping(e),i&&(t.updateTypings(),t.waitTyping(e).then(t.updateTypings)),t.blinkTyping(e.peerId);break;case y.ADD_MESSAGE:var _=t.getTab(e.peerId);t.setTyping(e),_&&(t.addMessage(t.prepareMessageData(e)),t.scroll(e.peerId),t.blinkTab(e.peerId),t.updateTypings(),t.waitTyping(e).then(t.updateTypings)),t.updateTabUnreadCounter(_,e);break;case y.EDIT_MESSAGE:case y.REPLACE_MESSAGE:var o=e.peerId,r=e.messageId,a=t.getTab(o);a&&a.msgs[r]&&(delete curFastChat.gotMedia[r],t.editMessage(t.prepareMessageData(e)));break;case y.REPLACE_FLAGS:case y.SET_FLAGS:case y.RESET_FLAGS:e.flags&y.FLAG_DELETED&&t.deleteMessage(t.prepareMessageData(e));break;case y.READ_INBOUND:case y.READ_OUTBOUND:t.markMessagesAsRead(e);break;case y.CHAT_CHANGED:case y.CONVERSATION_UPDATED:var n=t.getTab(e.peerId);t.handleEventChatUpdated(n,e);case y.VIDEO_CALL:case y.UNREAD_COUNT:case y.NOTIFY_SETTINGS_CHANGED:case y.EMPTY:case y.RESYNC:case y.REFRESH_LP_KEY:case y.TRANSITION:case y.RESET_PEER:case y.MUTEX:case y.CHANGE_PEER:case y.CHANGE_TAB:case y.FAILED_MESSAGE:case y.RESEND:case y.DELETE_DIALOG:}}))}))})),Notifier.addRecvClbk("fastchat",0,FastChat.lcRecv,!0),Notifier.addRecvClbk("logged_off",0,FastChat.standby,!0),FastChat.lcSend("needSettings",{version:e.version,lang_id:langConfig.id}),clearTimeout(curFastChat.getSettingsTO),curFastChat.getSettingsTO=setTimeout(FastChat.getSettings,300))},getSettings:function(){var e=ls.get("fcFriends"+vk.id);ajax.post("al_im.php",{act:"a_get_fast_chat",friends:e&&e.version,cache_time:FastChat.cachedStickersKeywordsTime()},{onDone:function(t){-1==t.friends?(t.friends_version=e.version,t.friends=e.list):ls.set("fcFriends"+vk.id,{version:t.friends_version,list:t.friends}),FastChat.gotSettings(t),FastChat.sendSettings()},onFail:function(){return!0}})},cachedStickersKeywordsTime:function(){var e=ls.get("stickers_keywords");return e&&e.time?Math.floor(e.time/1e3):0},gotSettings:function(e){e.emoji_stickers&&(window.emojiStickers=e.emoji_stickers),window.Emoji&&Emoji.updateTabs(),e.autoplay_animations&&window.StickersSettings.setAutoplay(e.autoplay_animations),clearTimeout(curFastChat.getSettingsTO),window.lang=(0,r.extend)(window.lang||{},e.lang),(0,r.extend)(curFastChat,e,{lang_id:langConfig.id}),curFastChat.friendsCnt=Object.keys(curFastChat.friends),setTimeout(FastChat.clistCache.pbind(!1),10),FastChat.initUI()},sendSettings:function(){clearTimeout(curFastChat.sendSettingsTO);var e=["friends","friends_version","onlines","tpl","lang","me","version"].reduce(((e,t)=>(e[t]=curFastChat[t],e)),{});curFastChat.sendSettingsTO=setTimeout((function(){FastChat.lcSend("settings",{settings:e})}),curNotifier.is_server?0:(0,d.irand)(50,100))},destroy:function(){return!!curFastChat.inited&&(curFastChat.ldb.unmount(),(0,r.each)(curFastChat.tabs||{},(function(e,t){t.box.destroy()})),curFastChat.clistBox&&curFastChat.clistBox.destroy(),(0,r.each)(curFastChat.el||{},(function(){(0,a.cleanElems)(this)})),clearInterval(curFastChat.updateFriendsInt),clearTimeout(curFastChat.correspondentsTO),clearTimeout(curFastChat.lp_error_to),curFastChat={inited:!1},!0)},isChatOpen:function(e){if(window.curFastChat&&curFastChat.inited&&e){var t=curFastChat.tabs,i=curFastChat.clistBox;if(t&&t[e]&&t[e].box.visible||i&&i.visible)return!0}return!1},standby:function(e){FastChat.destroy(),curFastChat.standby=!0;var t=1;!function i(){if(!curNotifier.is_server)return clearTimeout(curFastChat.standbyTO),void(curFastChat.standbyTO=setTimeout(i,1e3*t));ajax.post("notifier.php?act=a_get_reload",{version:e},{onDone:function(e,t){FastChat.lcSend("gotConfig",{navVersion:e,config:t}),FastChat.gotConfig(e,t)},onFail:function(){return t*=2,clearTimeout(curFastChat.standbyTO),curFastChat.standbyTO=setTimeout(i,1e3*t),!0}})}()},gotConfig:function(e,t){clearTimeout(curFastChat.standbyTO),curFastChat.standby&&setTimeout((function(){if(e>stVersions.nav){(0,o.debugLog)("appending al loader");var i=vk.navPostfix||"";headNode.appendChild((0,a.ce)("script",{type:"text/javascript",src:`/js/loader_nav${i}${e}_${vk.lang}.js`}))}setTimeout((function(){e<=stVersions.nav?window.stManager.add(["notifier.js","notifier.css",window.jsc("web/emoji.js")],(function(){FastChat.init(t)})):setTimeout(arguments.callee,100)}),0)}),curNotifier.is_server?0:(0,d.irand)(1e3,2e3))},updateVersion:function(e){FastChat.lcSend("standby",{version:e}),FastChat.standby(e)},lcSend:function(e,t){Notifier.lcSend("fastchat",(0,r.extend)({act:e,__id:curFastChat.me&&curFastChat.me.id||vk.id},t))},lcRecv:function(e){if(!(0,d.isEmpty)(e)){var t=e.act;e.__id===(curFastChat.me&&curFastChat.me.id||vk.id)&&(delete e.act,delete e.__id,FastChat.lcFeed(t,e))}},lcFeed:function(e,t){switch(e){case"needSettings":curFastChat.version<t.version||t.lang_id==curFastChat.lang_id&&FastChat.sendSettings();break;case"settings":!curFastChat.version&&curFastChat.options&&t.settings.version==curFastChat.options.version&&FastChat.gotSettings(t.settings),clearTimeout(curFastChat.sendSettingsTO);break;case"standby":q()||FastChat.standby(t.version);break;case"gotConfig":FastChat.gotConfig(t.navVersion,t.config);break;case"clistOnlines":q()||FastChat.clistGotOnlines(t);break;case"needPeer":if(q())break;var i=t.id,_=curFastChat.tabs[i],o=curFastChat.friends[i+"_"],a=!1;if(void 0!==_?(a={name:_.name,photo:_.photo,fname:_.fname,hash:_.hash,sex:_.sex,data:_.data,online:_.online},Object.keys(_.msgs).length>0&&(a.history=[_.log.innerHTML,_.msgs])):o&&(a=H(o,i)),!1===a)break;curFastChat.gotPeers[i]=setTimeout((function(){var e={};e[i]=a,FastChat.lcSend("gotPeers",e)}),curNotifier.is_server?0:(0,d.irand)(50,100));break;case"fetchingPeers":if(q())break;(0,r.each)(t,(function(e,t){var i=curFastChat.needPeers[e];i&&(t&i[0])==i[0]&&clearTimeout(i[2])}));break;case"gotPeers":q()||FastChat.gotPeers(t);break;case"stateChange":q()||FastChat.onStateChanged(t);break;case"needMedia":var n=t.msgId,s=curFastChat.gotMedia[n];if(void 0===s||0===s)break;curFastChat.gotMedia[n][3]=setTimeout((function(){FastChat.lcSend("gotMedia",{msgId:n,peer:s[0],text:s[1],msgOpts:s[2]})}),curNotifier.is_server?0:(0,d.irand)(50,100));break;case"fetchingMedia":var l=t.msgId,c=curFastChat.needMedia[l];if(void 0===c||0===curFastChat.gotMedia[l])break;clearTimeout(c[1]),c[1]=setTimeout(FastChat.loadMsgMedia.pbind(c[0],l),1e3);break;case"gotMedia":var u=t.msgId,f=curFastChat.gotMedia[u];(0,d.isArray)(f)&&clearTimeout(f[3]),FastChat.gotMsgMedia(t.peer,u,t.text,t.msgOpts)}},getResourcesThatShouldBeLoaded(e){var t={},i=e.filter((e=>e.type===y.ADD_MESSAGE)),_=e.filter(L.isServiceMsg),o=i.filter((e=>!this.isTabLoaded(e.peerId))).map((e=>e.peerId));function r(e,i){var _=FastChat.getTab(e);(0,A.isChatPeer)(e)&&i&&_&&!_.data.members[i]&&(t[e]?-1===t[e].indexOf(i)&&t[e].push(i):t[e]=[i])}return i.forEach((e=>{this.isTabLoaded(e.peerId)&&r(e.peerId,e.userId)})),_.forEach((e=>{r(e.peerId,+e.kludges.source_mid)})),{shouldLoad:Object.keys(t).length>0||o.length>0,needPeers:o,needMembers:t}},loadResources(e){var t=e.needMembers,i=curFastChat.lpInstance;return i.pause(),this.loadMembers(t).then((()=>i.resume()))},loadMembers(e){if(0===Object.keys(e).length)return Promise.resolve();var t=Object.keys(e).map((t=>`${t}:${e[t].join(",")}`)).join(";");return(0,I.post)(F.CONTROLLER,{act:"a_load_member",need:t}).then((t=>{var i=t[0];Object.keys(e).forEach((t=>{var _=this.getTab(t);_&&_.data&&_.data.members&&(_.data.members=e[t].reduce(((e,t)=>{var _=i.find((e=>e.id===t));return e[t]=Object.assign({name_inv_case:_.inv_name,name_kick_case:_.kick_name},_),e}),_.data.members))}))}))},handleEventChatUpdated(e,t){switch(t.updateType){case y.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED:case y.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED:var i=[t.peerId,0].join(",");this.loadPeers(i,(e=>{this.updateChatInfo(t.peerId,e)}));case y.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED:case y.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED:case y.MAIL_CHAT_UPDATE_TYPE_PINNED:case y.MAIL_CHAT_UPDATE_TYPE_USER_JOINED:case y.MAIL_CHAT_UPDATE_TYPE_USER_LEFT:case y.MAIL_CHAT_UPDATE_TYPE_USER_KICKED:case y.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED:case y.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED:case y.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED:}},updateChatInfo(e,t){var i=this.getTab(e),_=t[e],o=_.photo,r=_.grid,a=_.name,n=document.querySelector(`#chat_tab_icon_${e} .chat_tab_img`),s=document.createElement(o?"img":"div"),l=i&&i.unread?" ("+i.unread+")":"";i&&i.title&&(i.name=a,i.title.innerHTML=a+l),s.classList.add("chat_tab_img"),r?s.innerHTML=`<div class="chat_tab_grid">${r}</div>`:o&&(s.id=`im_dialog_ph${x.Ranges.convertChatPeerIdToChatId(e)}`,s.src=o),n&&n.parentNode.replaceChild(s,n)},blinkEl:function(e,t,i){if(t>10)return i(),!1;t%2==0?(0,l.animate)(e,{opacity:0},400,(function(){FastChat.blinkEl(e,t+1,i)})):(0,l.animate)(e,{opacity:1},400,(function(){setTimeout((function(){FastChat.blinkEl(e,t+1,i)}),400)}))},blinkTyping:function(e){var t=(0,a.ge)("chat_tab_icon_"+e);if(t){var i=(0,a.geByClass1)("chat_tab_typing_wrap",t);(0,l.fadeIn)(i,150,(function(){FastChat.blinkEl(i.firstChild,0,(function(){(0,l.fadeOut)(i,150)}))}))}},imFeed:function(e,t){var i=this.getTab(e);if(!i)return!1;i.auto&&!i.unread&&(i.box._close(!0),delete curFastChat.tabs[e])},tabNotify:function(e,t,i){var _,o=curFastChat.tabs[e];if(x.Ranges.isUserPeerTransitional(e)&&(0,d.isFunction)(cur.onPeerStatusChanged)&&cur.onPeerStatusChanged(e,t,i),!x.Ranges.isCommunityPeer(e)&&o&&o.box&&!o.box.minimized){switch(clearTimeout(o.hideNotifyTO),t){case"online":_=(0,E.getLang)("mail_im_user_became_online",3-o.sex),FastChat.blinkTab(e);break;case"offline":_=(0,E.getLang)("mail_im_user_became_offline",3-o.sex),FastChat.blinkTab(e);break;case"unavail":_=(0,E.getLang)("mail_im_not_online",3-o.sex).replace(/\.$/,"")}_=_.replace("{user}",o.fname),(0,a.val)(o.notify,'<div class="fc_tab_notify fc_tab_notify_'+t+'">'+_+"</div>");var r=o.notify.firstChild;clearTimeout(o.hideNotifyTO),o.hideNotifyTO=setTimeout((function(){(0,l.fadeOut)(r,200,(function(){(0,a.val)(o.notify,"")}))}),5e3)}},hideChatCtrl:function(){(0,a.removeClass)(Chat.wrap,"chat_active"),(0,c.removeEvent)(document,"mousedown",FastChat.onDocClick)},showChatCtrl:function(){(0,a.addClass)(Chat.wrap,"chat_active"),setTimeout((function(){(0,c.addEvent)(document,"mousedown",FastChat.onDocClick)}),0)},hideUI:function(){(0,a.addClass)(bodyNode,"chat_onl_hidden")},showUI:function(){(0,a.removeClass)(bodyNode,"chat_onl_hidden")},initUI:function(){if(curFastChat.options){var e=curFastChat.el={},t=getWndInner();(0,a.re)("rb_box_fc_clist"),e.clistWrap=(0,a.se)(curFastChat.tpl.clist),e.clist=(0,a.geByClass1)("fc_contacts",e.clistWrap,"div"),e.clistTitle=(0,a.geByClass1)("fc_tab_title",e.clistWrap,"div"),e.clistOnline=(0,a.geByClass1)("fc_clist_online",e.clistWrap,"div");var i=curFastChat.options.state||!1,_=!curFastChat.friendsCnt||(i&&void 0!==i.clist.min?i.clist.min:t[1]<1200||curFastChat.friendsCnt<5);curFastChat.clistW=270,curFastChat.clistH=299;var o={id:"fc_clist",movable:(0,a.geByClass1)("fc_tab_head",e.clistWrap),hider:(0,a.geByClass1)("fc_tab_close_wrap",e.clistWrap,"a"),startHeight:curFastChat.clistH,startWidth:curFastChat.clistW,resizeableH:e.clist,resize:!1,minH:150,fixed:_,onHide:function(){(0,a.val)("fc_clist_filter",curFastChat.q=""),(0,a.addClass)(curFastChat.clistBox.wrap,"fc_fixed"),curFastChat.clistBox.fixed=!0,FastChat.stateChange({op:"clist_toggled",val:0}),(0,a.setStyle)(curFastChat.clistBox.wrap,{top:"auto",bottom:0,right:72,left:"auto"}),(0,a.show)(e.topLink),FastChat.hideChatCtrl()},onShow:function(){FastChat.showChatCtrl()},onDragEnd:function(e,t){FastChat.stateChange({op:"clist_moved",y:e,x:t})},onResize:function(){curFastChat.clistBoxScroll&&curFastChat.clistBoxScroll.update(!1,!0)}};i&&!_&&(!1!==i.clist.x&&(-1==i.clist.x?o.startRight=0:o.startLeft=t[1]*i.clist.x),!1!==i.clist.y&&(-1==i.clist.y?o.startBottom=0:o.startTop=t[0]*i.clist.y)),_&&(o.noshow=!0),void 0===o.startTop&&void 0===o.startBottom&&(o.startTop=t[0]<800?0:.1*t[0]),void 0===o.startLeft&&void 0===o.startRight&&(o.startRight=0),curFastChat.clistBox=new window.RBox(e.clistWrap,o),o.noshow||void 0===o.startLeft&&void 0===o.startTop||curFastChat.clistBox._wnd_resize(t[0],t[1],!0),curFastChat.clistBoxScroll=new Scrollbar(e.clist,{prefix:"fc_",scrollChange:FastChat.clistShowMore,nomargin:!0,global:!0,nokeys:!0,right:vk.rtl?"auto":1,left:vk.rtl?1:"auto"}),curFastChat.updateFriendsInt=setInterval(FastChat.clistUpdate,18e4);var n,l=(0,a.ge)("fc_clist_filter");if((0,p.placeholderInit)(l,{global:!0}),curFastChat.q="",(0,c.addEvent)(l,"keyup "+(s.browser.opera?"keypress":"keydown"),(function(e){if(e.keyCode===c.KEY.ESC)return FastChat.clistHide(),(0,c.cancelEvent)(e);var t=FastChat.clistFilterKey(e);if(void 0!==t)return t;curFastChat.q=(0,r.trim)((0,a.val)(this)),FastChat.clistRender()})),e.clistOnline)bodyNode.appendChild(n=(0,a.ce)("nobr",{className:"fl_l",innerHTML:(0,E.getLang)("mail_im_clist_onlines")},{visibility:"hidden",position:"absolute"})),(0,a.re)(n),(0,c.addEvent)(e.clistOnline,"mouseover",(function(t){(0,v.showTooltip)(this,{text:(0,E.getLang)("mail_im_clist_onlines"),forcetoup:1,shift:[12,4,3],className:"tt_fc_onlines",init:function(){s.browser.msie&&(e.clistOnline.tt.isFixed=!1)},black:1})})),(0,c.addEvent)(e.clistOnline,"click",(function(e){(e.originalEvent||e).cancelBubble=!0,FastChat.clistToggleOnlines(),FastChat.clistRender()})),i&&i.clist&&i.clist.onlines&&FastChat.clistToggleOnlines(!0);_?FastChat.clistUpdateTitle():FastChat.clistRender(),curFastChat.ready=!0,i&&i.tabs&&(0,r.each)(i.tabs,(function(e,i){e=(0,r.intval)(e);var _={nofocus:1};this.min&&(_.minimized=!0),this.h&&(_.startHeight=this.h*t[0]),this.w&&(_.startWidth=this.w*t[1]),void 0!==this.x&&this.x<=1&&(this.x<0?_.startRight=0:_.startLeft=t[1]*this.x),void 0!==this.y&&this.y<=1&&(this.y<0?_.startBottom=0:_.startTop=t[0]*this.y),i.fx?(_.fixedLoad=!0,FastChat.prepareTabIcon(e,_,!0)):(_.noAnim=!0,FastChat.addPeer(e,!1,!1,_))})),(0,c.addEvent)(Chat.itemsCont,"mouseover",FastChat.itemsTT),(0,c.addEvent)(Chat.itemsCont,"mouseout",FastChat.itemsOut)}},itemsOffset:12,itemsTT:function(e){for(var t=e.target,i=!1;t&&t!=Chat.itemsCont;){if((0,a.hasClass)(t,"chat_tab_wrap")){i=t;break}t=t.parentNode}if(!i)return clearTimeout(Chat.ttOutTimeout),Chat.ttOutTimeout=!1,!1;var _=i.id.split("_")[3],o=Chat.tabs[_];return!!o&&(curFastChat.activeBox&&curFastChat.activeBox.visible&&curFastChat.activeBox.options.peer==_?(FastChat.itemsOut(),!1):(clearTimeout(Chat.ttOutTimeout),Chat.ttOutTimeout=!1,(0,v.showTooltip)(i,{text:o.name,slideX:15,black:1,asrtl:1,appendEl:Chat.ttNode,className:"tt_black_side",shift:[-58,-37,0],zIndex:10201}),void(Chat.ttPeer=i)))},itemsOut:function(){if(Chat.ttOutTimeout)return!1;Chat.ttOutTimeout=setTimeout((function(){if(Chat.ttOutTimeout=!1,!Chat.ttPeer)return!1;(0,c.triggerEvent)(Chat.ttPeer,"mouseout"),Chat.ttPeer=!1}),0)},stateChange:function(e){ajax.post("al_im.php",(0,r.extend)({act:"a_state_fc",hash:curFastChat.options.state_hash||""},e),{onFail:function(){return!0}}),FastChat.lcSend("stateChange",e)},onStateChanged:function(e){var t=!!e.peer&&curFastChat.tabs[e.peer],i=e.peer?t&&t.box:curFastChat.clistBox,_=getWndInner();switch(e.op){case"added":if(t){delete t.auto;break}e.fixed?FastChat.prepareTabIcon(e.peer,{fixedLoad:!0}):FastChat.addPeer(e.peer);break;case"unfixed":var o={startHeight:(0,r.intval)(_[0]*e.h),startWidth:(0,r.intval)(_[1]*e.w)};-1==e.y?o.startBottom=0:o.startTop=(0,r.intval)(_[0]*e.y),-1==e.x?o.startRight=0:o.startLeft=(0,r.intval)(_[1]*e.x),FastChat.addPeer(e.peer,!1,!1,o);break;case"closed":if(Chat.tabs[e.peer]&&FastChat.closeTabIcon(e.peer),!t||!i)break;i.close();break;case"hidden":if(!t||!i)break;i.close();break;case"minimized":if(!t||!i)break;e.val?i.unminimize():i.minimize();break;case"moved":case"clist_moved":(0,a.setStyle)(i.wrap,{bottom:-1==e.y?0:"auto",top:-1!=e.y?(0,r.intval)(_[0]*e.y):"auto",right:-1==e.x?0:"auto",left:-1!=e.x?(0,r.intval)(_[1]*e.x):"auto"}),i.toBottom=-1==e.y,i.toRight=-1==e.x;break;case"resized":(0,a.setStyle)(i.wrap,{bottom:-1==e.y?0:"auto",top:-1!=e.y?(0,r.intval)(_[0]*e.y):"auto",right:-1==e.x?0:"auto",left:-1!=e.x?(0,r.intval)(_[1]*e.x):"auto"}),i.toBottom=-1==e.y,i.toRight=-1==e.x;var n=(0,r.intval)(_[1]*e.w);(0,a.setStyle)(i.resizeableH,"height",(0,r.intval)(_[0]*e.h)),(0,a.setStyle)(i.resizeableW,"width",n),FastChat.fixResized(t,n);break;case"clist_toggled":e.val?i.show(0,!0):i.hide(0,!0),(0,a.toggle)(curFastChat.el.topLink,!e.val);break;case"onlines_toggled":FastChat.clistToggleOnlines(e.val),FastChat.clistRender()}},onUnidle:function(){curNotifier.version&&curFastChat.clistBox&&(curFastChat.clistBox.visible&&(curFastChat.el.clist.scrollTop<100||curRBox.active!=curFastChat.clistBox.id)?FastChat.clistRender():FastChat.clistUpdateTitle(),(0,r.each)(curFastChat.tabs,(function(e){FastChat.restoreDraft(e)})))},clistUpdate:function(){var e=(0,d.vkNow)();if(curNotifier.is_server&&!(curFastChat.clistUpdatedTs&&e-curFastChat.clistUpdatedTs<6e4)){curFastChat.clistUpdatedTs=e;var t=Object.keys(curFastChat.tabs).concat(Object.keys(Chat.tabs)).join();ajax.post("al_im.php",{act:"a_onlines",peer:t},{onDone:function(e){FastChat.clistGotOnlines(e),FastChat.lcSend("clistOnlines",e)},onFail:()=>!0})}},clistGotOnlines:function(e){var t=curFastChat.onlines,i=[];curFastChat.onlines=e,curNotifier.idle_manager&&curNotifier.idle_manager.is_idle||!curFastChat.tabs&&Chat.tabs||((0,r.each)(curFastChat.tabs,(function(_){curFastChat.onlines[_]!=t[_]&&(FastChat.tabNotify(_,e[_]?"online":"offline",e[_]),e[_]||(i[_]=1))})),(0,r.each)(Chat.tabs,(function(i){if(curFastChat.onlines[i]!=t[i]){var _=(0,a.geByClass1)("_chat_tab_image",(0,a.ge)("chat_tab_icon_"+i));(0,a.toggleClass)(_,"online",e[i]),(0,a.toggleClass)(_,"mobile",e[i]&&mobPlatforms[e[i]])}})),i=(0,r.arrayKeyDiff)(t,e,i),(0,r.each)(i,(function(e){FastChat.tabNotify(e,"offline")})),FastChat.clistRender())},clistShow:function(){var e=(0,a.hasClass)(Chat.wrap,"chat_active");FastChat.clistRender(),curFastChat.clistBox.visible?curFastChat.clistBox.focus():(curFastChat.activeBox&&curFastChat.activeBox!=curFastChat.clistBox&&curFastChat.activeBox.hide(),curFastChat.clistBox.show(),FastChat.setActive(curFastChat.clistBox),curFastChat.clistBoxScroll&&curFastChat.clistBoxScroll.update(!1,!0),curFastChat.el.topLink&&(0,a.hide)(curFastChat.el.topLink)),(0,a.elfocus)("fc_clist_filter"),FastChat.movePointer(!1,e)},clistHide:function(){curFastChat.clistBox.hide(),curFastChat.activeBox==curFastChat.clistBox&&FastChat.setActive(!1)},clistRender:function(e){var t=[],i=!e,_=1+(e?40:20),o=!1,n=!1,l=!1,c=curFastChat.q;if(c?(l=[],(0,r.each)(FastChat.clistCache(c),(function(){l.push((0,r.escapeRE)(this))})),l=new RegExp("([ -]|^|s|&nbsp;|\b)("+l.join("|")+")","gi"),o=curFastChat.clistCache[c]||{}):curFastChat.clOnlines&&(o=curFastChat.onlines),curFastChat.clHasMore=!1,(0,r.each)(curFastChat.friends,(function(e){var a=(0,r.intval)(e),s=!o||o[a];if(i){if(s){if(!--_)return curFastChat.clHasMore=!0,!1;t.push(FastChat.clistWrapPeer(a,this,l)),n=a}}else a==curFastChat.clOffset&&(i=!0)})),!1!==n||e||c?c&&!curFastChat.clHasMore&&t.push(FastChat.getCorrespondents(c,l,!1===n)):t.push('<div class="fc_clist_empty">'+(c?(0,E.getLang)("mail_im_clist_notfound"):(0,E.getLang)("mail_im_clist_empty"))+"</div>"),curFastChat.clOffset=n,e){for(var d=(0,a.ce)("div",{innerHTML:t.join("")}),u=document.createDocumentFragment();d.firstChild;)u.appendChild(d.firstChild);curFastChat.el.clist.appendChild(u),curFastChat.clHasMore||FastChat.clistUpdateTitle(!0)}else(0,a.val)(curFastChat.el.clist,t.join("")),FastChat.clistUpdateTitle(!0),(s.browser.chrome||s.browser.safari)&&setTimeout((function(){(0,a.setStyle)(curFastChat.el.clist.firstChild,{width:curFastChat.el.clist.firstChild.clientWidth}),setTimeout((function(){(0,a.setStyle)(curFastChat.el.clist.firstChild,{width:""})}),0)}),0);if(curFastChat.clSel){var f=(0,a.ge)("fc_contact"+curFastChat.clSel);f?FastChat.clistPeerOver(f,1):curFastChat.clSel=!1}else{var h=(0,a.geByClass1)("fc_contact",curFastChat.el.clist);FastChat.clistPeerOver(h,1)}curFastChat.clistBoxScroll&&curFastChat.clistBoxScroll.update()},clistWrapPeer:function(e,t,i){var _,o,r=curFastChat.tabs[e]?curFastChat.tabs[e].unread:0,a=curFastChat.onlines[e],n=(0,h.onlinePlatformClass)(a),s=(t[0]||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return i&&(s=s.replace(i,'$1<em class="fc_clist_hl">$2</em>')),x.Ranges.isUserPeerTransitional(e)?(_="/id"+e,o='onmousemove="FastChat.clistPeerOver(this.parentNode, 2);"  onmouseout="FastChat.clistPeerOver(this.parentNode, 1);"'):(_="/im?sel="+e,o=""),'<a href="'+_+'" class="fc_contact clear_fix" id="fc_contact'+e+'" onclick="return FastChat.selectPeer('+e+', event, { entrypoint: \'fastchat_search\' });" onmousedown="event.cancelBubble = true;" onmouseover="FastChat.clistPeerOver(this, 1, event);"  onmouseout="FastChat.clistPeerOver(this, 0, event);"><span class="fc_contact_photo'+n+'" '+o+">"+(x.Ranges.isChatOrChannelPeer(e)&&t[3]?t[3]:'<img src="'+Notifier.fixPhoto(t[1])+'" class="fc_contact_photo"/>')+'</span><span class="fc_contact_status"></span><span class="fc_contact_name">'+s+'<span id="fc_contact_unread'+e+'" class="fc_contact_unread">'+(r?" <b>+"+r+"</b>":"")+"</span></span></a>"},clistPeerOver:function(e,t,i){if(e&&(0,c.checkOver)(i,e)){var _=e.id.substr(10);curFastChat.clSel&&t&&curFastChat.clSel!=_&&FastChat.clistPeerOver((0,a.ge)("fc_contact"+curFastChat.clSel),0),(0,a.toggleClass)(e,"fc_contact_over",t),t?curFastChat.clSel=_:curFastChat.clSel==_&&(curFastChat.clSel=!1)}},authorOver:function(e){var t=(0,a.gpeByClass)("fc_tab_log",e),i=e.getBoundingClientRect().top,_=t.getBoundingClientRect().top,o=e.getAttribute("data-title"),r=!1;if(i-_<10&&(r=!0),o){var n=e.getAttribute("data-date");n&&(o+="<br>"+n);var s=(0,a.gpeByClass)("rb_box_wrap",e).querySelector(".tt-fastchat-wrap");(0,v.showTooltip)(e,{text:'<div class="fc_author_tt">'+o+"</div>",black:1,center:1,forcetodown:r,appendEl:s,shift:[1,8,0]})}},getCorrespondents:function(e,t,i){return clearTimeout(curFastChat.correspondentsTO),curFastChat.correspondents&&void 0!==curFastChat.correspondents[e]?FastChat.wrapCorrespondents(curFastChat.correspondents[e])||i&&'<div class="fc_clist_empty">'+(0,E.getLang)("mail_im_clist_notfound")+"</div>"||"":(curFastChat.correspondentsTO=setTimeout(FastChat.loadCorrespondents.pbind(e,t),100),'<div id="fc_correspondents"></div>')},loadCorrespondents:function(e,t){e==curFastChat.q&&ajax.post("hints.php",{act:"a_json_friends",str:e,from:"fc",allow_multi:1},{onDone:function(i){curFastChat.correspondents||(curFastChat.correspondents={});var _,o={};if((0,r.each)(i,(function(){_=this[3]+"_",curFastChat.friends[_]||(o[_]=[this[1],this[2],this[3],this[4]||""])})),curFastChat.correspondents[e]=o,e==curFastChat.q){var n=(0,a.ge)("fc_correspondents");if(n){var s=n.parentNode,l=(0,a.ce)("div",{innerHTML:FastChat.wrapCorrespondents(o,t)}),c=document.createDocumentFragment();if(l.firstChild)for(;l.firstChild;)c.appendChild(l.firstChild);else s.firstChild==n&&c.appendChild((0,a.ce)("div",{className:"fc_clist_empty",innerHTML:(0,E.getLang)("mail_im_clist_notfound")}));s.replaceChild(c,n),FastChat.clistUpdateTitle(!0),curFastChat.clistBoxScroll&&curFastChat.clistBoxScroll.update()}}}})},wrapCorrespondents:function(e,t){var i=[];return(0,r.each)(e,(function(e){i.push(FastChat.clistWrapPeer((0,r.intval)(e),this,t))})),i.join("")},updateFriends:function(e){if(window.Chat&&Chat.inited){var t=Chat.onl;t&&(e>0?((0,a.val)(t,e),(0,a.show)(Chat.wrap)):(0,a.hide)(Chat.wrap))}},onDocClick:function(e){if(curFastChat.activeBox){var t=e.target;if((0,m.curBox)())return!0;for(;t;){if("fc_tab_wrap"==t.className||-1!==["chat_onl_wrap","custom_menu_cont","layer_wrap","box_layer_wrap","wk_layer_wrap"].indexOf(t.id))return!0;t=t.parentNode}var i=curFastChat.tabs[curFastChat.activeBox.options.peer];if(i&&((0,r.trim)(Emoji.editableVal(i.txt))||i.imMedia&&i.imMedia.getMedias().length))return!0;curFastChat.activeBox.hide()}},clistCache:function(e){if(e){var t,i,_,o,a,n,s=[e];if((i=(0,E.parseLatin)(e))&&s.push(i),(i=(0,E.parseLatKeys)(e))&&s.push(i),(i=(0,E.parseCyr)(e))&&s.push(i),void 0!==curFastChat.clistCache[e])return s;for(var l in n=curFastChat.clistCache[e]={},s)if(s.hasOwnProperty(l)&&(t=s[l],_=curFastChat.clistCache[" "+t.charAt(0).toLowerCase()]))for(var c in o=new RegExp("(^|\\s|\\()"+(0,r.escapeRE)(t),"gi"),_)if(_.hasOwnProperty(c)){if(a=curFastChat.friends[c+"_"],!(0,d.isArray)(a))continue;null!==a[0].match(o)&&(n[c]=1)}return n._num=Object.keys(n).length,s}var u,f,h;for(var p in curFastChat.clistCache={},curFastChat.friends)if(curFastChat.friends.hasOwnProperty(p))for(u=curFastChat.friends[p][0],p=(0,r.intval)(p),f=0;h=" "+u.charAt(f).toLowerCase(),curFastChat.clistCache[h]||(curFastChat.clistCache[h]={}),curFastChat.clistCache[h][p]=1,-1!==(f=u.indexOf(" ",f+1));)++f},clistShowMore:function(){if(curFastChat.clHasMore){var e=curFastChat.el.clist;e.scrollTop+3*e.clientHeight>e.scrollHeight&&FastChat.clistRender(!0)}},clistUpdateTitle:function(e){var t=0,i=0;for(var _ in curFastChat.friends)curFastChat.onlines[(0,r.intval)(_)]?(i++,t++):curFastChat.clOnlines||t++;var o=window.newVal=(i?(0,E.getLang)("mail_im_X_onlines_title",i):(0,E.getLang)("mail_im_onlines_title")).toString();FastChat.updateFriends(i),(0,a.val)(curFastChat.el.clistTitle,o),(0,a.val)(curFastChat.el.topLink,o.toLowerCase()),curFastChat.clistBoxScroll&&(!curFastChat.clHasMore&&e?t=curFastChat.el.clist.childNodes.length:curFastChat.q&&(t=(0,r.intval)((curFastChat.clistCache[curFastChat.q]||{})._num)),curFastChat.clistBoxScroll.options.contHeight=50*t)},clistToggleOnlines:function(e){void 0===e&&(e=!curFastChat.clOnlines,FastChat.stateChange({op:"onlines_toggled",val:e?1:0})),(0,a.toggleClass)(curFastChat.el.clistOnline,"fc_clist_online_active",e),curFastChat.clOnlines=e},clistFilterKey:function(e){var t;switch(e.keyCode){case c.KEY.DOWN:case c.KEY.UP:if("keyup"!==e.type){var i;if(t=curFastChat.clSel&&(0,a.ge)("fc_contact"+curFastChat.clSel)){var _=e.keyCode===c.KEY.DOWN?"nextSibling":"previousSibling";i=t;do{i=i[_]}while(i&&(1!==i.nodeType||!(0,a.hasClass)(i,"fc_contact")))}else curFastChat.clSel||e.keyCode!==c.KEY.DOWN||(i=(0,a.geByClass1)("fc_contact",curFastChat.el.clist,"a"));if(i&&i!==t){FastChat.clistPeerOver(i,1);var o=curFastChat.el.clist;i.offsetTop+16>o.clientHeight+o.scrollTop?(o.scrollTop=i.offsetTop+16-o.clientHeight,curFastChat.clistBoxScroll.update()):i.offsetTop-36<o.scrollTop&&(o.scrollTop=i.offsetTop-36,curFastChat.clistBoxScroll.update())}}break;case c.KEY.LEFT:case c.KEY.RIGHT:return!0;case c.KEY.ENTER:if("keyup"==e.type||!(t=curFastChat.clSel&&(0,a.ge)("fc_contact"+curFastChat.clSel)))break;if(e.ctrlKey||e.metaKey&&s.browser.mac){var r=(0,C.getHostName)().replace(".","\\.");nav.go(t.href.match(new RegExp(`\\b(vkontakte\\.ru|${r})(\\/[^\\/]+?)$`))[2])}else FastChat.selectPeer(curFastChat.clSel);case c.KEY.ESC:if("keyup"!=e.type){var n=(0,a.ge)("fc_clist_filter"),l=(0,a.val)(n)||curFastChat.clSel;n.blur(),(0,a.val)(n,curFastChat.q=""),curFastChat.clSel=!1,l&&FastChat.clistRender()}break;default:return}return(0,c.cancelEvent)(e)},prepareTabIcon:function(e,t,i){var _=curFastChat.friends&&curFastChat.friends[e+"_"];if(_){var o=H(_,e);FastChat.addTabIcon(e,o,i)}else{curFastChat.needPeers[e]=[3,!1,setTimeout(FastChat.getPeers,(0,d.irand)(150,200)),t]}},addTabIcon:function(e,t,i){if(Chat.itemsCont&&!Chat.tabs[e]){var _=x.Ranges.isChatOrChannelPeer(e),o=_?t.data.members_grid_fc||"":`<img class="chat_tab_img" src="${t.photo}"/>`,r=_?"im?sel=c"+x.Ranges.convertChatPeerIdToChatId(e):t.alink||"/id"+e,n=(0,h.onlinePlatformClass)(t.online),s=(0,a.se)('<a class="chat_tab_wrap'+(i?"":" chat_tab_beforeanim")+'" id="chat_tab_icon_'+e+'" href="'+r+'" onclick="FastChat.itemsOut();return FastChat.togglePeer('+e+', event);"><div class="chat_tab_imgcont _chat_tab_image'+n+'"><div class="chat_tab_close" onclick="return FastChat.closeTabIcon('+e+', event)"></div>'+o+'</div><div class="chat_tab_typing_wrap"><div class="chats_sp chat_tab_typing_icon"></div></div><div class="chat_tab_counter"></div></a>');Chat.itemsCont.insertBefore(s,Chat.itemsCont.firstChild),Chat.tabs[e]={el:s,name:t.name},(0,a.addClass)(Chat.wrap,"chat_expand"),i||(0,a.removeClass)(s,"chat_tab_beforeanim"),FastChat.checkChatHeight(),Chat.scrollNode.scrollTop=0}},checkChatHeight:function(){var e=(0,a.getSize)(Chat.itemsCont)[1];function t(){(0,c.addEvent)(Chat.scrollNode,s.browserFeatures.wheelEvent,FastChat.scrollWrap)}function i(){(0,c.removeEvent)(Chat.scrollNode,s.browserFeatures.wheelEvent,FastChat.scrollWrap)}Chat.lastHeight=e,e>Chat.maxHeight?(Chat.fixH||(Chat.fixH=!0,(0,a.addClass)(Chat.scrollNode,"chat_fix_height"),(0,a.setStyle)(Chat.scrollNode,{height:Chat.maxHeight}),(0,c.addEvent)(Chat.scrollNode,"mouseenter",t),(0,c.addEvent)(Chat.scrollNode,"mouseleave",i),FastChat.checkShadow()),Chat.scrollNode.scrollTop=e-Chat.maxHeight):Chat.fixH&&(Chat.fixH=!1,(0,a.removeClass)(Chat.scrollNode,"chat_fix_height"),(0,a.setStyle)(Chat.scrollNode,{height:"auto"}),(0,c.removeEvent)(Chat.scrollNode,s.browserFeatures.wheelEvent,FastChat.scrollWrap),(0,c.removeEvent)(Chat.scrollNode,"mouseenter",t),(0,c.removeEvent)(Chat.scrollNode,"mouseleave",i),FastChat.checkShadow())},checkShadow:function(){var e=(0,r.intval)(Chat.scrollNode.scrollTop);e&&Chat.fixH?Chat.shadowTop||((0,a.addClass)(Chat.wrap,"chat_scroll_top"),(0,l.fadeIn)((0,a.geByClass1)("chat_cont_sh_top",Chat.wrap),200),Chat.shadowTop=!0):Chat.shadowTop&&((0,l.fadeOut)((0,a.geByClass1)("chat_cont_sh_top",Chat.wrap),200),Chat.shadowTop=!1),Chat.lastHeight-e>Chat.maxHeight&&Chat.fixH?Chat.shadowBottom||((0,l.fadeIn)((0,a.geByClass1)("chat_cont_sh_bottom",Chat.wrap),200),Chat.shadowBottom=!0):Chat.shadowBottom&&((0,l.fadeOut)((0,a.geByClass1)("chat_cont_sh_bottom",Chat.wrap),200),Chat.shadowBottom=!1)},scrollWrap:function(e){e||(e=window.event);var t=0;return e.wheelDeltaY||e.wheelDelta?t=(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&(t=10*-e.detail),Chat.scrollNode.scrollTop-=t,curFastChat.activeBox==curFastChat.clistBox?(curFastChat.pointerMargin=0,FastChat.setPointer(!1,curFastChat.pointerMargin,curFastChat.prevPointer)):(curFastChat.pointerMargin=-Chat.scrollNode.scrollTop,FastChat.setPointer(!0,curFastChat.pointerMargin,curFastChat.prevPointer)),FastChat.checkShadow(),(0,a.setStyle)(Chat.ttNode,{top:-Chat.scrollNode.scrollTop}),(0,c.cancelEvent)(e)},togglePeer:function(e,t){return curFastChat.activeBox&&curFastChat.activeBox.options.peer==e?(curFastChat.activeBox.hide(),FastChat.setActive(!1),!1):FastChat.selectPeer(e,t,{entrypoint:"fastchat_icon"})},selectPeer:function(e,t,i){if((0,c.checkEvent)(t))return!0;var _=(0,a.hasClass)(Chat.wrap,"chat_active");if(curFastChat.tabs&&curFastChat.tabs[e]){var o=curFastChat.tabs[e].box;o.minimized&&o.unminimize(!0),FastChat.activateTab(e),FastChat.movePointer(e,_)}else i||(i={}),i.fixed=!0,i.onPeerAdded=function(){FastChat.movePointer(e,_)},i.onHistoryLoaded=FastChat.readLastMessages.pbind(e),FastChat.addPeer(e,!1,!0,i);return curFastChat.tabs[e]&&curFastChat.tabs[e].iman&&(curFastChat.tabs[e].entrypoint=i&&i.entrypoint,curFastChat.tabs[e].iman.unidle()),FastChat.trackActivity("open"),!1},closeTabIcon:function(e,t,i){curFastChat.activeBox&&curFastChat.activeBox.options.peer==e&&!i&&(curFastChat.activeBox.hide(),FastChat.setActive(!1));var _=(0,a.ge)("chat_tab_icon_"+e);(0,a.addClass)(_,"chat_tab_hiding"),delete Chat.tabs[e],curFastChat.tabs[e]&&curFastChat.tabs[e].box.options.fixed&&(curFastChat.tabs[e].iman.stop(),delete curFastChat.tabs[e]);return(0,l.animate)(_,{height:0,opacity:0},{duration:100,onComplete:function(){(0,a.re)(_),_&&(_=!1,curFastChat.activeBox&&FastChat.movePointer(curFastChat.activeBox.options.peer,!0));var e=Chat.scrollNode.scrollTop;FastChat.checkChatHeight(),Chat.scrollNode.scrollTop=e}}),i||FastChat.stateChange({op:"closed",peer:e}),Object.keys(Chat.tabs).length||(0,a.removeClass)(Chat.wrap,"chat_expand"),FastChat.itemsOut(),(0,c.cancelEvent)(t)},getPointerShift:function(e,t,i){var _=i-t,o=Chat.maxHeight+32;return e&&_<62?_-62:e&&_>o?_-o:0},setPointer:function(e,t,i){if(!curFastChat.activeBox)return!1;var _=FastChat.getPointerShift(e,t,i),o=(0,a.geByClass1)("fc_tab_pointer",curFastChat.activeBox.wrap);return(0,a.setStyle)(o,{marginTop:t+_}),_},movePointer:function(e,t){if(!curFastChat.activeBox)return!1;var i,_,o=(0,a.geByClass1)("fc_pointer_offset",curFastChat.activeBox.wrap);if(e){var r,n=(0,a.ge)("chat_tab_icon_"+e);if(!n)return!1;r=!Chat.fixH&&n.nextSibling?(0,a.getXY)(n.nextSibling)[1]-50:n.nextSibling||Chat.fixH?(0,a.getXY)(n)[1]+Chat.scrollNode.scrollTop:(0,a.getXY)((0,a.ge)("chat_tab_wrap"))[1]-50,i=23+(0,a.getXY)(Chat.cont)[1]-r,_=-Chat.scrollNode.scrollTop}else i=28,_=0;var s=FastChat.setPointer(e,_,i);if(t){if(curFastChat.prevPointer){var c=FastChat.getPointerShift(!0,_+s,curFastChat.prevPointer);(0,a.setStyle)(o,{bottom:curFastChat.prevPointer-c+s})}(0,l.animate)(o,{bottom:i},{duration:100})}else(0,a.setStyle)(o,{bottom:i});curFastChat.prevPointer=i},setActive:function(e){curFastChat.activeBox=e,e&&FastChat.moveBoxesLeft(e.pos[1])},moveBoxesLeft:function(e,t){e-=8;var i=!1,_=0;for(var o in curFastChat.tabs)if(curFastChat.tabs.hasOwnProperty(o)){var r=curFastChat.tabs[o];if(t||(r.box.movedLeft=!1),!r||r.box.options.fixed||!r.box.toBottom||r.box.movedLeft||r.box.noMove)continue;var a=r.box.pos;a[1]+a[3]>=e&&a[1]>_&&(i=r,_=a[1])}if(i){var n=e-i.box.pos[3],s=i.box.pos[0];n<0&&(n=0),i.box.movedLeft=!0,(0,l.animate)(i.box.wrap,{left:n},200),i.box.pos=[s,n,i.box.pos[2],i.box.pos[3]];var c=getWndInner();FastChat.stateChange({op:"moved",peer:i.box.options.peer,y:s/c[0],x:n/c[1]}),n&&FastChat.moveBoxesLeft(n,!0)}else FastChat.moveLeftY=0},moveBoxAway:function(e,t){for(var i=e.pos[3],_=t-e.pos[3]-20,o=e.pos[0],r=!1;_>0&&!r;)for(var a in r=!0,curFastChat.tabs)if(curFastChat.tabs.hasOwnProperty(a)){var n=curFastChat.tabs[a].box.pos;n[0]+n[2]/2>o&&n[1]+n[3]>_&&n[1]<_+i&&(_-=n[3],r=!1)}_<0&&(_=(0,d.positive)(Math.random()*t)),(0,l.animate)(e.wrap,{left:_},300);var s=getWndInner();FastChat.stateChange({op:"moved",peer:e.options.peer,y:o/s[0],x:_/s[1]})},pinTab:function(e,t,i){var _=-1==e?curFastChat.clistBox:curFastChat.tabs[e].box;_.options.fixed=!1,(0,a.removeClass)(_.wrap,"fc_fixed"),FastChat.hideChatCtrl(),FastChat.setActive(!1);var o=_.wrap.offsetTop,n=_.wrap.offsetLeft-10;(0,a.setStyle)(_.wrap,{left:_.wrap.offsetLeft,top:_.wrap.offsetTop,right:"auto",bottom:"auto"}),i||(0,l.animate)(_.wrap,{left:n,top:o},300),_.pos=[o,n,_.pos[2],_.pos[3]],_.toRight=!1,_.toBottom=!0,(0,a.addClass)(_.wrap,"fc_tobottom");var s=_.resizeableW.clientWidth-(0,r.intval)((0,a.getStyle)(_.resizeableW,"paddingRight"))-(0,r.intval)((0,a.getStyle)(_.resizeableW,"paddingLeft")),c=_.resizeableH.clientHeight-(0,r.intval)((0,a.getStyle)(_.resizeableH,"paddingBottom"))-(0,r.intval)((0,a.getStyle)(_.resizeableH,"paddingTop")),d=getWndInner();-1==e?FastChat.stateChange({op:"clist_toggled",val:1,y:_.toBottom?-1:_.pos[0]/d[0],x:_.toRight?-1:_.pos[1]/d[1]}):FastChat.stateChange({op:"unfixed",peer:e,y:_.toBottom?-1:_.pos[0]/d[0],x:_.toRight?-1:_.pos[1]/d[1],h:c/d[0],w:s/d[1]}),_.noMove=!0,FastChat.moveBoxesLeft(n),_.noMove=!1},addPeer:function(e,t,i,_){_||(_={});var o=curFastChat.friends&&curFastChat.friends[e+"_"],r=0;if(i?FastChat.stateChange({op:"added",peer:e,fixed:_.fixed}):curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&t&&(i=!0),o){var a=H(o,e);FastChat.addTabIcon(e,a,_.noAnim),FastChat.addBox(e,a,_),t?(curFastChat.tabs[e].auto=1,FastChat.imFeed(e,t)):(_&&_.nofocus||FastChat.activateTab(e),curFastChat.onlines[e]||FastChat.tabNotify(e,"unavail"),r|=2)}else r=3;r&&(i?(curFastChat.needPeers[e]=[r,t,!1,_],FastChat.getPeers()):(curFastChat.needPeers[e]=[r,t,setTimeout(FastChat.getPeers,(0,d.irand)(150,200)),_],FastChat.lcSend("needPeer",{id:e,mask:r})))},getPeers(){var e=[],t={};Object.keys(curFastChat.needPeers||{}).forEach((i=>{var _=curFastChat.needPeers[i],o=_[0],r=_[2];e.push(i,o),r&&clearTimeout(r),t[i]=o})),e.length&&(FastChat.lcSend("fetchingPeers",t),FastChat.loadPeers(e.join(","),(function(e){FastChat.gotPeers(e),FastChat.lcSend("gotPeers",e)})))},gotPeers:function(e){q()||(0,r.each)(curFastChat.needPeers,(function(t){if(e[t]){x.Ranges.isUserPeerTransitional(e[t])&&(curFastChat.friends[t+"_"]=[e[t].name,e[t].photo,e[t].fname,e[t].hash,(0,r.intval)(e[t].sex)]);var i=this[1],_=this[3];2&this[0]&&void 0===e[t].history||(clearTimeout(this[2]),delete curFastChat.needPeers[t]),curFastChat.tabs[t]?FastChat.gotHistory(t,e[t].history):_.fixedLoad?FastChat.addTabIcon(t,e[t]):(FastChat.addTabIcon(t,e[t]),FastChat.addBox(t,e[t],_),i?(curFastChat.tabs[t].auto=1,FastChat.imFeed(t,i)):(2&this[0]&&FastChat.gotHistory(t,e[t].history),_&&_.nofocus||FastChat.activateTab(t))),_.onHistoryLoaded&&_.onHistoryLoaded()}}))},gotHistory:function(e,t){if((0,d.isArray)(t)&&t.length&&t[0]){var i=curFastChat.tabs[e],_=t[0],o=t[1];i.offset=t[2],(0,r.extend)(i.msgs,o),(0,r.each)(o,(function(e,t){!t[0]&&t[1]&&i.unread++})),(0,a.val)(i.log,_),i.logWrap.scrollTop=i.logWrap.scrollHeight,setTimeout((function(){i.logWrap.scrollTop=i.logWrap.scrollHeight,i.scroll&&i.scroll.update(!1,!0)}),10)}},decHashCb:function(e){var t;t=e,curFastChat.decodedHashes[t]=function(e){for(var t=a.ge?"":"___",i=0;i<e.length;++i)t+=e.charAt(e.length-i-1);return a.geByClass?t:"___"}(t.substr(t.length-5)+t.substr(4,t.length-12))},decodehash:function(e){return curFastChat.decodedHashes||(curFastChat.decodedHashes={}),curFastChat.decodedHashes[e]||FastChat.decHashCb(e),curFastChat.decodedHashes[e]},loadPeers(e,t){ajax.post("al_im.php",{act:"a_get_fc_peers",peers:e},{onDone:t})},sendTyping:function(e){var t=(0,r.intval)(e),i=this.getTab(t),_=Date.now();!x.Ranges.isEmailPeer(t)&&i&&(curFastChat.myTypingEvents[t]&&_-curFastChat.myTypingEvents[t]<5e3||(curFastChat.myTypingEvents[t]=_,ajax.post("al_im.php",{act:"a_activity",type:"typing",peer:t,hash:i.sendhash,from:"fc"})))},setTyping(e){var t=this.getTab(e.peerId),i=e.type===y.ADD_MESSAGE;if(t&&t.typing&&i){var _=t.typing.userIds.filter(((t,i)=>t!==e.userId));0===_.length?delete t.typing:t.typing=Object.assign(t.typing,{userIds:_})}else t&&!i&&(e.ts=Date.now()/1e3,t.typing=Object.assign(e,{userIds:(e.userIds||[]).filter(((e,t)=>e!==vk.id))}))},waitTyping(e){return(0,k.pause)(F.ACTIVITY_PERIOD+2).then((()=>{var t=this.getTab(e.peerId);t&&t.typing&&(Date.now()-1e3*t.typing.ts>=1e3*F.ACTIVITY_PERIOD&&delete t.typing)}))},updateTypings(){var e=curFastChat.tabs||{};Object.keys(e).forEach((e=>{FastChat.updateTyping(e)}))},updateTyping(e,t){var i=this.getTab(e),_=(0,a.ge)("fc_tab_typing"+e),o=(0,a.geByClass1)("_fc_tab_typing_progress",_),r=(0,a.geByClass1)("_fc_tab_typing_name",_);if(i.typing&&i.typing.userIds.length>0){var n=this.formatTyping(i.typing);(0,a.val)(r,n),(0,a.show)(o)}else(0,a.val)(r,""),(0,a.hide)(o);t?(0,a.setStyle)(_,"opacity",1):(0,l.fadeTo)(_,200,1)},formatTyping(e){var t=e.peerId,i=e.userIds,_=this.getTab(t),o=i[0],r=(0,A.isChatPeer)(t)?_.data.members[o]:_,a=e=>e.fname||e.name||"";if(1===i.length||!(0,A.isChatPeer)(t))return(0,E.langSex)(r.sex,(0,E.getLang)("mail_im_typing")).replace("{user}",a(r));var n=i[i.length-1],s=(0,A.isChatPeer)(t)?_.data.members[n]:_;return(0,E.getLang)("mail_im_multi_typing").replace("{users}",a(r)).replace("{last_user}",a(s))},markMessagesAsRead(e){var t=e.type,i=e.peerId,_=e.upToId,o=e.unread,r=this.getTab(i);r&&(t===y.READ_INBOUND&&(r.inUpTo=_),t===y.READ_OUTBOUND&&(r.outUpTo=_),r.unread=o,this.updateUnreadMessagesInTab(i,_,t===y.READ_OUTBOUND)),this.updateTabUnreadCounterElement(r||{unread:0},i)},updateUnreadMessagesInTab(e,t,i){var _=this.getTab(e),o=i?".fc_msgs_unread.fc_msgs_out":".fc_msgs_unread:not(.fc_msgs_out)";if(_&&_.log){var r=_.log.querySelectorAll(o);Array.prototype.forEach.call(r,(e=>{+e.getAttribute("data-message-id")<=t&&e.classList.remove(W)}))}},readLastMessages(e){var t=FastChat.getTab(e);if(e&&t){if(!t.markingRead&&t.unread){var i=[];for(var _ in t.msgs)!t.msgs[_][0]&&t.msgs[_][1]&&i.push(_);i.length>0&&FastChat.markRead(e,i)}t.unread=0,FastChat.updateTabUnreadCounterElement(t,e)}},markRead:function(e,t){var i=this.getTab(e);i.markingRead=!0,ajax.post("al_im.php",{act:"a_mark_read",peer:e,ids:t,hash:i.sendhash,from:"fc"},{onDone:function(_){for(var o in i.markingRead=!1,t){if(t.hasOwnProperty(o))if("continue"===function(){var e=t[o],_=(0,a.ge)("fc_msg"+e),n=_&&_.parentNode;if(!_)return"continue";i.msgs[e]&&i.msgs[e][1]&&(i.msgs[e][1]=0,i.msgs[e][0]||i.unread--),(0,a.removeClass)(_,"fc_msg_unread"),(0,a.hasClass)(n.parentNode,"fc_msgs_unread")&&(0,r.each)(n.childNodes,(function(){if(!(0,a.hasClass)(this,"fc_msg_unread"))return(0,a.removeClass)(n.parentNode,"fc_msgs_unread"),!1}))}())continue}i.unread=0,FastChat.updateTabUnreadCounterElement(i,e)},onFail:function(){i.markingRead=!1}})},getMessageText(e,t){var i=e||"",_=Math.round(1e9*Math.random()).toString(16),o={},r=0;return i=(i=(0,P.replaceHyperLinks)(i,P.linksReplacer)).replace(/(<a.+?<\/a>)/gi,(e=>{var t=`!link_${r}_${_}!`;return o[t]=e,r++,t})),i=(0,O.replaceMentions)(i),i=(0,T.replaceEmailLinks)(i),i=(0,D.replaceHashtags)(i,(e=>`<a href="/im?sel=${t}&st=${encodeURIComponent(e)}">${e}</a>`)),Object.keys(o).forEach((e=>{i=i.replace(e,o[e])})),i=Emoji.emojiToHTML(i,1)},getEditCont:function(e){return window.stManager.add([window.jsc("web/emoji.js")]),'<div class="emoji_cont _emoji_field_wrap">'+Emoji.tplSmile((0,E.getLang)("mail_emoji_hint"))+'<div class="fc_editable dark" tabindex="0" contenteditable="true" placeholder="'+(0,E.getLang)("mail_chat_placeholder")+'"></div></div>'},getInputValue:function(e){return Emoji?Emoji.editableVal(e):""},onTxtResize:function(e){var t=curFastChat.tabs[e],i=(0,a.geByClass1)("fc_tab_txt",t.wrap),_=(0,a.getSize)(i)[1];if(_>40){var o=(0,d.positive)(_-40),n=(0,r.intval)((0,a.getSize)(t.box.resizeableH)[1]);n+t.hDiff-o<40&&(o=n+t.hDiff-40),(0,a.setStyle)(t.box.resizeableH,{height:n+(t.hDiff||0)-o}),t.hDiff=o,FastChat.fixResized(t,t.wrap.clientWidth,!0)}else if(t.hDiff){var s=(0,r.intval)((0,a.getSize)(t.box.resizeableH)[1]);(0,a.setStyle)(t.box.resizeableH,{height:s+t.hDiff}),t.hDiff=0,FastChat.fixResized(t,t.wrap.clientWidth,!0)}},initTab:function(e,t,i){var _=(0,a.geByClass1)("fc_editable",i),o=curFastChat.tabs[e]={name:t.name,fname:t.fname,photo:t.photo,link:t.alink||"/id"+e,hash:t.hash,sendhash:FastChat.decodehash(t.hash),sex:t.sex||0,data:t.data||{},online:t.online,msgs:{},msgscount:0,unread:0,box:!1,wrap:i,editable:1,txt:_,txtWrap:_.parentNode.parentNode,logWrap:(0,a.geByClass1)("fc_tab_log",i),log:(0,a.geByClass1)("fc_tab_log_msgs",i),notify:(0,a.geByClass1)("fc_tab_notify_wrap",i),title:(0,a.geByClass1)("fc_tab_title",i)},r=30;if(o.addMediaBtn=(0,a.geByClass1)("fc_tab_attach",i),o.editable)cur.t=o,o.emojiId=Emoji.init(o.txt,{controlsCont:(0,a.geByClass1)("fc_tab_txt_wrap",i),ttDiff:-46,ttShift:0,rPointer:!0,global:!0,noRce:!0,peer:e,isChat:!0,noCtrlSend:!0,ref:"fast_chat",onSend:FastChat.send.pbind(e),checkEditable:FastChat.checkEditable,onResize:function(){FastChat.onTxtResize(e)},addMediaBtn:o.addMediaBtn,onShow:function(){(0,b.cssAnim)(o.scroll.scrollbar,{opacity:0},{duration:400})},onHide:function(){(0,b.cssAnim)(o.scroll.scrollbar,{opacity:1},{duration:400})},onEsc:function(e){return o.box.hide(),(0,c.cancelEvent)(e)},onStickerSend:function(t,i){FastChat.send(e,t,i)}});else{(0,g.autosizeSetup)(o.txt,{minHeight:15,maxHeight:42}),o.txt.autosize.options.onResize=function(e){if(!o.box.minimized){var t=42==e?42:15;t!=e&&(0,a.setStyle)(o.txt,"height",t),t!=r&&((0,a.setStyle)(o.logWrap,"height",o.logWrap.clientHeight-t+r),r=t,o.scroll&&o.scroll.update(!1,!0))}}}return o.imPeerMedias={},o.imSortedMedias={},o.previewEl=(0,a.geByClass1)("fc_tab_preview",i),window.stManager.add(["page.js","page.css",window.jsc("web/ui_media_selector.js"),"ui_media_selector.css"],(function(){var t=[["photo",(0,E.getLang)("profile_wall_photo")],["video",(0,E.getLang)("profile_wall_video")],["audio",(0,E.getLang)("profile_wall_audio")],["doc",(0,E.getLang)("profile_wall_doc")],["map",(0,E.getLang)("profile_wall_map")]];o.imMedia=new window.MediaSelector(o.addMediaBtn,o.previewEl,t,{limit:10,hideAfterCount:0,maxShown:0,mail:1,tooltip:1,topOffset:0,forceUp:1,global:1,toId:vk.id,from:"message"}),o.imMedia.onChange=setTimeout.pbind((function(){if(curFastChat.sendOnUpload)FastChat.send(curFastChat.sendOnUpload),curFastChat.sendOnUpload=void 0;else{var t=(0,M.loadDraftForPeer)(curFastChat.ldb,e);t.removeAllAttaches(),o.imMedia.getMedias().forEach((e=>t.addAttach(e[0],e[1]))),t.destroy()}FastChat.onTxtResize(e)}),0)})),o},addBox:function(e,t,i){if(void 0===curFastChat.tabs[e]){var o=FastChat.getEditCont(Emoji.last);i=i||{},curFastChat.tabs[e]={};var d=(0,a.se)((0,a.rs)(FastChat.tplBox,{id:e,name:t.name,myphoto:Notifier.fixPhoto(curFastChat.me.photo,!0),cont:o}));i.fixed&&curFastChat.activeBox&&curFastChat.activeBox.hide(0,!1,{noState:!0});var u=FastChat.initTab(e,t,d),f=getWndInner(),h={id:"fc_peer"+e,marginFixedToLayer:!0,peer:e,movable:(0,a.geByClass1)("fc_tab_head",d),closer:(0,a.geByClass1)("fc_tab_close_wrap",d,"a"),resizeableH:u.logWrap,startHeight:250,startWidth:270,fixed:i.fixed,minH:150,minW:270,nofocus:!0,onFocus:function(t){u.auto&&(FastChat.stateChange({op:"added",peer:e}),delete u.auto),FastChat.restoreDraft(e),u.editable?Emoji.editableFocus(u.txt,!1,!0):(0,a.elfocus)(u.txt),u.wrap.clientWidth&&(0,a.setStyle)(u.title,{maxWidth:u.wrap.clientWidth-71}),u.editable||(0,a.setStyle)(u.txt.autosize.helper,{width:(0,a.getStyle)(u.txt,"width",!1)}),u.scroll&&u.scroll.update(!1,!0),setTimeout(a.elfocus.pbind(u.txt),10)},onHide:function(){i.fixed&&FastChat.hideChatCtrl(),curFastChat.activeBox&&e==curFastChat.activeBox.options.peer&&FastChat.setActive(!1)},onClose:function(t){AudioMessagePlayer.loaded&&AudioMessagePlayer.detachPlayer(),this.onHide(),i&&i.beforeClose&&i.beforeClose();var _=curFastChat.tabs,o=_[e].posSeq;if(delete _[e],curNotifier.isIdle||FastChat.stateChange({op:"hidden",peer:e}),o){var n,c,d,u,f,h={},p=[];for((0,r.each)(_,(function(){this.posSeq>o&&(h[this.posSeq]=this,p.push(this.posSeq))})),p.unshift(o),p.sort(),f=!s.browser.msie&&p.length<10,n=1;n<p.length;n++)c=p[n],d=h[c].box,u=n>1?h[p[n-1]].box.pos:t,f?(0,l.animate)(d.wrap,{left:u[1]},100,function(e){e._update_pos()}.pbind(d)):(0,a.setStyle)(d.wrap,{left:u[1]});if(!f)for(n=1;n<p.length;n++)(d=h[p[n]].box)._update_pos()}},onMinimize:function(t){FastChat.stateChange({op:"minimized",peer:e,val:t}),FastChat.fixResized(u,u.wrap.clientWidth,!0),t||(u.txt.blur(),FastChat.restoreDraft(e))},onResizeEnd:function(t,i){var _=getWndInner(),o=u.box.pos;u.scroll&&u.scroll.show(),FastChat.fixResized(u,i,!0),FastChat.stateChange({op:"resized",peer:e,h:t/_[0],w:i/_[1],y:u.box.toBottom?-1:o[0]/_[0],x:u.box.toRight?-1:o[1]/_[1]})},onResize:function(e,t){FastChat.fixResized(u,t);var i=(0,a.geByClass1)("fc_tab_title",u.box.content);(0,a.setStyle)(i,{width:t-78})},onResizeStart:function(){delete u.posSeq,u.scroll&&u.scroll.hide(),(0,a.val)(u.notify,""),clearTimeout(u.hideNotifyTO)},onDragEnd:function(t,i){delete u.posSeq,FastChat.stateChange({op:"moved",peer:e,y:t,x:i})}};if(i&&(0,r.extend)(h,i),void 0===h.startLeft&&void 0===h.startRight){var p=[],g=f[0]-350,b=curFastChat.clistBox.pos,m=!1;if(window.Call&&(Call.box||Call.invitation)){var v=Call.calcBoxPos();p.push([v.x,v.x+v.w]),m=!0}b[0]+b[2]>g&&(curFastChat.clistBox.visible||!m)&&p.push([b[1],b[1]+b[3]]),(0,r.each)(curFastChat.tabs,(function(t){(b=this.box&&this.box.pos)&&t!=e&&b[0]+b[2]>g&&p.push([b[1],b[1]+b[3]])}));var E,C,w,M=lastWindowWidth-262-(0,_.sbWidth)(),P=!1,T=!1,O=0>M?1:-1;for(E=M;O*E<0*O;E+=135*O){for(C=0,w=0;w<p.length;w++)E>p[w][0]-260&&E<p[w][1]&&C++,E>p[w][0]-10&&E<p[w][0]+10&&(C+=1.1);(!1===P||C<T)&&(P=E,T=C)}m&&T&&(P=M),(0,r.extend)(h,{startBottom:0,startLeft:P})}var D,y=!0;for(D in i||{})if("nofocus"!=D){y=!1;break}y&&(u.posSeq=++curFastChat.posSeq),h.fixed&&(h.startHeight=curFastChat.clistH,h.startWidth=curFastChat.clistW,h.onShow=FastChat.showChatCtrl),u.box=new window.RBox(d,h),u.iman=new n.default({id:"tab"+e,element:u.box.content,onUnIdleCb:function(){FastChat.readLastMessages(e)},parentManager:curNotifier.idle_manager,idleTimeout:1e4}),curFastChat.tabs[e].iman.start(),h.fixed&&FastChat.setActive(u.box),u.scroll=new Scrollbar(u.logWrap,{prefix:"fc_",nomargin:!0,nokeys:!0,global:!0,right:vk.rtl?"auto":1,left:vk.rtl?1:"auto",onScroll:FastChat.onScroll.pbind(u)}),h.minimized||!i||void 0===i.startLeft&&void 0===i.startTop&&void 0===i.startWidth&&void 0===i.startHeight||u.box._wnd_resize(f[0],f[1],!0),u.wrap.clientWidth&&(0,a.setStyle)(u.title,{maxWidth:u.wrap.clientWidth-71}),(0,c.addEvent)(u.txt,"keydown",this.onInputKeydown.bind(this,u)),(0,c.addEvent)(u.txt,"keyup",this.onInputKeyUp.bind(this,u,e)),(0,c.addEvent)(u.txt,"focus",this.onInputFocus.bind(this,e)),(0,c.addEvent)(u.log,"click",(t=>this.onLogClick(t,+e))),FastChat.restoreDraft(e),h.onPeerAdded&&h.onPeerAdded()}},onInputFocus(e){curFastChat.peer=e},onInputKeydown(e,t){if(t.ctrlKey&&t.keyCode===c.KEY.RETURN){var i=t.target,_=i.value;if("number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd){var o=i.selectionStart;i.value=_.slice(0,o)+"\n"+_.slice(i.selectionEnd),i.selectionStart=i.selectionEnd=o+1}else if(document.selection&&document.selection.createRange){i.focus(t);var r=document.selection.createRange();r.text="\r\n",r.collapse(!1),s.browser.opera&&(r.moveEnd("character",0),r.moveStart("character",0)),r.select()}e.editable?this.checkEditable(e.emojiId,e.txt):(e.txt.autosize.update(),setTimeout((()=>e.txt.autosize.update()),0))}},onInputKeyUp(e,t){var i=e.lastValue||"",_=this.getInputValue(e.txt);_.length===i.length&&_===i||(_&&this.sendTyping(t),e.lastValue=_),clearTimeout(e.saveDraftTO),e.saveDraftTO=setTimeout(this.saveDraft.pbind(t),_.length?300:0),this.checkEditable(e.emojiId,e.txt)},onLogClick:function(e,t){if(e.target.classList.contains("_fc_call_link")){var i=this.getTab(t);if((0,A.isChatPeer)(t)){var _={peerId:t,name:i.name,tab:i.name,photo:i.photo};window.Calls.startGroupCall(t,[_],[],!1,N.CallStatSource.FAST_CHAT).then((()=>this.closeTab(t)))}else{var o={peerId:t,id:t,link:i.link,name:i.name,firstName:i.fname,lastName:i.name.split(" ")[1],sex:i.sex,photo:i.photo},r=U({},o,{canAddMembers:!0});window.Calls.call(t,!1,[r,[o]],N.CallStatSource.FAST_CHAT).then((()=>this.closeTab(t)))}}},onScroll:function(e){var t=e.scroll.obj.scrollTop,i=(0,a.geByClass1)("_fc_msgs_more",e.logWrap);t<200&&(0,a.isVisible)(i)&&i.click()},loadMore:function(e,t){var i=curFastChat.tabs[e],o=i.offset;if(i.moreLoading)return!1;i.moreLoading=!0,ajax.post("al_im.php",{act:"a_history",peer:e,offset:o,from:"fc"},{onDone:function(e){e[3]||(0,a.hide)(t);var _=t.parentNode,o=_.clientHeight;_.insertBefore((0,a.cf)(e[0]),t.nextSibling);var r=_.clientHeight-o;r&&(i.logWrap.scrollTop+=r),i.scroll.update(),i.offset=e[2],i.moreLoading=!1,FastChat.onScroll(i)},onFail:function(){i.moreLoading=!1},showProgress:_.lockButton.pbind(t),hideProgress:_.unlockButton.pbind(t)})},sendOnResponse:function(e,t,i){if(e.version&&(0,r.intval)(e.version)>curFastChat.version)FastChat.updateVersion(e.version);else{var _=(0,a.ge)("fc_msg"+t),o=e.msg_id,n=(0,r.indexOf)(t,i.newmsgs);if(_){if(e.media){var s={sticker:(0,r.intval)(e.sticker)};FastChat.lcSend("gotMedia",{msgId:t,peer:i.box.options.peer,text:e.media,msgOpts:s}),FastChat.gotMsgMedia(i.box.options.peer,t,e.media,s)}++i.msgscount,-1!=n&&i.newmsgs.splice(n,1),_.id="fc_msg"+o,i.msgs[o]=[1,1]}}},checkEditable:function(e,t){Emoji.checkEditable(e,t,{height:52})},fixResized:function(e,t,i){e&&(e.logWrap.scrollTop=e.logWrap.scrollHeight,t>0&&(0,a.setStyle)(e.title,{maxWidth:t-71}),i&&(e.editable||(0,a.setStyle)(e.txt.autosize.helper,{width:(0,a.getStyle)(e.txt,"width",!1)}),e.scroll&&e.scroll.update(!1,!0)))},activateTab:function(e){var t=curFastChat.tabs[e].box;curFastChat.activeBox&&curFastChat.activeBox!=t&&curFastChat.activeBox.hide(0,!1,{noState:!0}),t.show(),t.options.fixed&&FastChat.setActive(t)},blinkTab:function(e){var t=this.getTab(e);if(!t.blinking&&curFastChat.peer!=e){t.blinking=!0,clearTimeout(t.blinkingTO);var i=t.box.wrap,_=i.className,o=Math.min(S,(0,r.intval)((0,a.getStyle)(i,"zIndex")));(0,a.setStyle)(i,{zIndex:S}),(0,a.removeClass)(i,"rb_inactive"),t.blinkingTO=setTimeout((function(){delete t.blinking,delete t.blinkingTO,(0,a.getStyle)(i,"zIndex")==S&&((0,a.setStyle)(i,{zIndex:o}),i.className=_)}),2e3)}},createProgress:function(e,t,i){var _=(0,a.ce)("span",{innerHTML:(0,a.rs)(vk.pr_tpl,{id:"",cls:""}),className:"fc_msg_progress",id:"fc_msg_progress"+t});return e.insertBefore(_,i),_},removeProgress:function(e){(0,a.re)("fc_msg_progress"+e)},send:function(e,t,i){var _=curFastChat.tabs[e],o=(0,r.trim)(_.editable?Emoji.editableVal(_.txt):(0,a.val)(_.txt)),n="";t?(n=[["sticker",t]],o=""):n=_.imMedia?_.imMedia.getMedias():[];var s=(0,a.ge)("fc_tab_typing"+e),l=(0,a.geByClass1)("page_progress_preview",_.wrap);if(l&&l.childNodes.length>0){curFastChat.sendOnUpload=e;var c=(0,a.geByClass)("fc_tab_log",_.wrap)[0];return FastChat.createProgress(c,e,c.lastChild),void(s.style.visibility="hidden")}if(curFastChat.sendOnUpload=!1,FastChat.removeProgress(e),s.style.visibility="visible",o||n.length){var u=function(){try{if(window.crypto){var e=new Int32Array(1);return crypto.getRandomValues(e),Math.abs(e.reduce(((e,t)=>e+t)))}}catch(e){}return(0,d.intval)((0,d.rand)(0,2147483647).toFixed(0))}(),f={act:"a_send",to:e,hash:_.sendhash,msg:o,from:"fc",entrypoint:curFastChat.tabs[e].entrypoint||"fastchat_old_default",media:[],random_id:u};i&&(f.sticker_referrer=i);for(var h,p=0,g=n.length;p<g;++p)(h=n[p])&&f.media.push(h[0]+":"+h[1]);f.media=f.media.join(","),_.sending=!0,Emoji.ttHide(_.emojiId),curFastChat.tabs[e].entrypoint=!1,ajax.post("al_im.php",f,{onDone:function(t){clearTimeout(_.saveDraftTO),FastChat.saveDraft(e),FastChat.sendOnResponse(t,u,_)},onFail:function(t){FastChat.error(e,t||(0,E.getLang)("global_unknown_error")),(0,a.elfocus)(_.txt),(0,a.val)(_.txt,(0,r.clean)(o)),_.editable?FastChat.checkEditable(_.emojiId,_.txt):_.txt.autosize.update();var i=(0,a.ge)("fc_msg"+u);if(i)return i.appendChild((0,a.ce)("span",{className:"fc_msg_error",innerHTML:(0,E.getLang)("global_error")})),FastChat.scroll(e),!0},showProgress:function(){_.sending=!0,_.sendProgressTO=setTimeout((function(){var e=(0,a.ge)("fc_msg"+u);e&&FastChat.createProgress(e,u,e.firstChild)}),2e3)},hideProgress:function(){_.sending=!1,clearTimeout(_.sendProgressTO),FastChat.removeProgress(u)}}),(0,a.re)("fc_error"+e),t||((0,a.val)(_.txt,""),_.imMedia&&_.imMedia.unchooseMedia()),FastChat.addMessage(FastChat.prepareMessageData({messageId:u,text:(0,r.clean)(o).replace(/\n/g,"<br>"),peerId:e,flags:3,randomId:f.random_id,attaches:[]})),delete curFastChat.myTypingEvents[e],_.editable?FastChat.checkEditable(_.emojiId,_.txt):_.txt.autosize.update(!1,!0),(0,a.elfocus)(_.txt),FastChat.scroll(e),FastChat.trackActivity("send")}else _.editable?Emoji.editableFocus(_.txt,!1,!0):(0,a.elfocus)(_.txt)},saveDraft:function(e){var t=curFastChat.tabs[e],i=(t||{}).txt;if(i&&t){var _=Emoji.editableVal(i),o=(0,M.loadDraftForPeer)(curFastChat.ldb,e);o.setText((0,r.trim)(_)||""),o.destroy()}},restoreDraft:function(e){var t=curFastChat.tabs[e],i=t.txt,_=(0,M.loadDraftForPeer)(curFastChat.ldb,e);return!(!i||!t||(0,a.val)(i).length>_.dData.txt.length&&!_.hasAttaches())&&(t.editable?i.innerHTML=Emoji.emojiToHTML((0,r.clean)(_.dData.txt),1):(0,a.val)(i,(0,r.clean)(_.dData.txt)),setTimeout((()=>{for(var e=_.dData.attaches,i=0;i<e.length;i++)t.imMedia&&t.imMedia.chooseMedia(e[i].type,e[i].id,e[i].object||{});_.destroy()}),40),FastChat.checkEditable(t.emojiId,i),setTimeout((function(){i.scrollTop=i.scrollHeight}),10),!0)},error:function(e,t){e=e||curFastChat.peer;var i=curFastChat.tabs[e];(0,a.re)("fc_error"+e),i.log.appendChild((0,a.ce)("div",{id:"fc_error"+e,className:"fc_msgs_error",innerHTML:t||(0,E.getLang)("global_error")})),FastChat.scroll(e)},scroll:function(e){e=e||curFastChat.peer;var t=curFastChat.tabs[e];t&&(t.logWrap.scrollTop=t.logWrap.scrollHeight,t.scroll&&t.scroll.update(!1,!0))},mkdate:function(e){var t=new Date(1e3*e),i=new Date,_=function(e){return(e+"").length<2?"0"+e:e};if(t.getDay()==i.getDay())return _(t.getHours())+":"+_(t.getMinutes());var o=_(t.getDate())+"."+_(t.getMonth()+1);return t.getFullYear()!=i.getFullYear()&&(o+="."+(t.getFullYear()+"").substr(2)),o},prepareMessageData(e){var t=e.peerId,i=e.flags,_=e.messageId,o=e.text,r=e.date,a=(0,L.getUserId)(e),n=this.getMessageMedia(e),s=n[0],l=n[1],c="",d=e.randomId;((0,L.isServiceMsg)(e)||(0,L.isCallMessage)(e))&&(c=this.renderServiceMessage(e));var u=(0,L.isServiceMsg)(e)||(0,L.isCallMessage)(e)?c:(0,L.isExpiredCasperMessage)(e)?(0,E.getLang)("mail_expired_message"):this.getMessageText(o,t)+s;return-1!==String(_).indexOf("rid")&&(d=Number(_.slice(3))),Object.assign({id:_,peer:t,from_id:a,text:u,out:(0,L.isOut)(e),unread:Boolean(1&i),date:r,date_str:FastChat.mkdate(r),randomId:d,isServiceMessage:(0,L.isServiceMsg)(e)||(0,L.isCallMessage)(e)},this.getMessageAuthor(e),l)},getMessageAuthor(e){var t=e.peerId,i=(0,L.getUserId)(e),_=this.getTab(e.peerId);if(!_||!i)return{};var o=(0,L.isOut)(e)?curFastChat.me:(0,A.isChatPeer)(t)?_.data.members[i]:_,r=o.name,a=o.link,n=o.photo,s=o.fname,l=o.first_name;return{fname:(0,A.isChatPeer)(t)?s||l:"",from_id:i,name:r,link:a,photo:n}},getMessageMedia(e){var t=e.peerId,i=e.messageId;if((0,L.isServiceMsg)(e)||(0,L.isCallMessage)(e)||!Array.isArray(e.attaches))return["",{}];var _="",o={};return e.attaches.forEach((e=>{switch(e.type){case"sticker":_+=i?this.renderSticker(e.id,e.productId,e.kind,i):this.renderSticker(e.id,e.productId),o.sticker=!0;break;case"mail":var r=e.object?e.object.fwd_count:e.id.split(";").length;_+=(0,a.rs)(curFastChat.tpl.msg_fwd,{msg_id:i,peerId_nice:(0,A.convertPeerToUrl)(t),label:r>1?(0,E.getLang)("mail_im_fwd_msgs"):(0,E.getLang)("mail_im_fwd_msg")});break;default:_+=(0,a.rs)(vk.pr_tpl,{id:"",cls:""}),i>0&&setTimeout(FastChat.needMsgMedia.pbind(t,i),5)}})),_&&(_=`<div class="fc_msg_attachments" id="fc_msg_attachments${i}">${_}</div>`),[_,o]},renderSticker(e,t,i,_){var o,r=window.devicePixelRatio>=2?"256":"128";return"animation"===i?(o=(0,a.rs)(curFastChat.tpl.animatedSticker,{id:e,size:r,productId:t,messageId:_}),Number.isInteger(_)&&this.loadStickersModuleIfNeed().then((()=>{window.StickersSettings.getAutoplay()&&window.StickersAnimation&&window.StickersAnimation.loadAndPlayStickerWithTimer("animatedSticker"+_,10)}))):o=(0,a.rs)(curFastChat.tpl.sticker,{id:e,size:r}),o},loadStickersModuleIfNeed:()=>new Promise((e=>{var t=Boolean(window.StickersSettings&&window.StickersAnimation);curFastChat.stickersLoading||t?e():(curFastChat.stickersLoading=!0,window.stManager.add([window.jsc("web/stickers.js")],(()=>{curFastChat.stickersLoading=!1,e()})))})),renderServiceMessage(e){if((0,L.isCallMessage)(e))return this.renderCallMessage(e);var t=e.kludges,i=e.peerId,_=t.source_act,o=Number(t.source_mid),a=(0,r.intval)((0,A.isChatPeer)(e.peerId)?t.from:e.userId),n=this.getMember(i,a),s="",l=a===o;switch(_){case A.CREATE_CHAT_ACTION:s=(0,E.getLang)("mail_im_chat_created","raw");break;case A.CHAT_TITLE_ACTION:s=t.source_is_channel?(0,E.getLang)("mail_im_title_updated_channel","raw"):(0,E.getLang)("mail_im_title_updated_dot","raw");break;case A.CHAT_INVITE_USER:s=l?(0,E.getLang)("mail_im_returned_to_chat","raw"):(0,E.getLang)("mail_im_invited","raw");break;case A.CHAT_KICK_USER:s=l?(0,E.getLang)("mail_im_left","raw"):(0,E.getLang)("mail_im_kicked_from_chat","raw");break;case A.CHAT_PHOTO_UPDATE:s=(0,E.getLang)("mail_im_photo_set","raw");break;case A.CHAT_PHOTO_REMOVE:s=t.source_is_channel?(0,E.getLang)("mail_im_photo_removed_channel","raw"):(0,E.getLang)("mail_im_photo_removed","raw");break;case A.CHAT_PIN_MESSAGE:s=t.source_message?(0,E.getLang)("mail_im_pin_message","raw"):(0,E.getLang)("mail_im_pin_message_empty2","raw");break;case A.CHAT_UNPIN_MESSAGE:s=t.source_message?(0,E.getLang)("mail_im_unpin_message","raw"):(0,E.getLang)("mail_im_unpin_message_empty2","raw");break;case A.CHAT_INVITE_BY_LINK:s=(0,E.getLang)("mail_im_invite_by_link","raw");break;case A.CHAT_SCREENSHOT:s=vk.id===o?(0,E.getLang)("mail_im_chat_own_screenshot","raw"):(0,E.getLang)("mail_im_chat_screenshot","raw");break;case A.CHAT_GROUP_CALL_STARTED:s=(0,E.getLang)("mail_im_group_call_started","raw");break;case A.CHAT_KICK_USER_CALL_BLOCK:s=(0,E.getLang)("mail_im_kick_user_call_block","raw");break;case A.CHAT_KICK_DON:s=(0,E.getLang)("mail_im_chat_kick_don","raw");break;default:return(0,E.getLang)("mail_no_support","raw")}if(s=(s=(0,E.langSex)(n.sex,s)).replace("{from}",(0,R.getServiceLinkTemplate)(n.link,n.name,!0)),o&&o!==a){var c=t.source_email;if(c)s=s.replace("{user}",(0,R.getServiceLinkTemplate)(`/im?email=${encodeURIComponent(c)}`,"email",!0));else{var u=this.getMember(i,o)||{name_inv_case:"",name_kick_case:"",link:""},f=_===A.CHAT_KICK_USER?u.name_kick_case:u.name_inv_case;s=s.replace("{user}",(0,R.getServiceLinkTemplate)(u.link,f,!0))}}if(t.source_text){var h=t.source_old_text?`«<b class="im_srv_lnk">${t.source_old_text}</b>» &rarr; `:"";s=s.replace("{title}",h+`«<b class="im_srv_lnk">${t.source_text}</b>»`)}if(t.source_act===A.CHAT_PIN_MESSAGE||t.source_act===A.CHAT_UNPIN_MESSAGE)if(t.source_message){var p=(0,A.replaceSpecialSymbols)(Emoji.emojiToHTML((0,d.stripHTML)(t.source_message.replace(/<br\s?\/?>/gi," ")),!0)),g=(0,R.getServiceLinkTemplate)("",p,!1,"im_srv_mess_link");s=s.replace("{msg}",g)}else s=s.replace(/{link}(.+){\/link}/i,((e,t)=>(0,R.getServiceLinkTemplate)("",t,!1,"im_srv_mess_link")));return s},renderCallMessage(e){var t,i=vk.id,_=e.attaches[0],o=_.initiatorId,a=_.state,n=_.receiverId,s=i===o;switch(a){case"reached":var l=(0,A.secondsToHuman)(_.duration);t=(t=s?(0,E.getLang)("mail_call_outgoing"):(0,E.getLang)("mail_call_incoming")).replace("{duration}",l);break;case"canceled_by_initiator":t=s?(0,E.getLang)("mail_call_canceled"):(0,E.getLang)("mail_call_missed");break;case"canceled_by_receiver":if(s){var c=H(curFastChat.friends[n+"_"],n);t=c?(0,E.langSex)(c.sex,(0,E.getLang)("mail_call_declined_by","raw")).replace("{user_name}",c.name):(0,E.getLang)("mail_call_declined")}else t=(0,E.getLang)("mail_call_canceled");break;default:t=(0,E.getLang)("mail_added_call")}return(0,r.getTemplate)("im_calls_link",{text:t,peerId:e.peerId})},getMember(e,t){var i=this.getTab(e);return(0,A.isChatPeer)(e)&&i?i.data.members[t]:i||null},needMsgMedia:function(e,t){t<=0||(FastChat.lcSend("needMedia",{msgId:t}),curFastChat.needMedia[t]=[e,setTimeout(FastChat.loadMsgMedia.pbind(e,t),curNotifier.is_server?0:(0,d.irand)(150,250))])},loadMsgMedia:function(e,t){t<=0||void 0!==curFastChat.gotMedia[t]&&0!==curFastChat.gotMedia[t]||(FastChat.lcSend("fetchingMedia",{msgId:t}),curFastChat.gotMedia[t]=0,ajax.post("al_im.php",{act:"a_get_media",id:t,from:"fc"},{onDone:function(i){i[0];var _=i[1],o=(i[2],i[3]);FastChat.lcSend("gotMedia",{msgId:t,peer:e,text:_,msgOpts:o}),FastChat.gotMsgMedia(e,t,_,o)}}))},gotMsgMedia:function(e,t,i,_){if((0,a.val)("fc_msg_attachments"+t,i),_&&_.sticker){var o=(0,a.ge)("fc_msg"+t),r=o&&o.parentNode;o&&(0,a.addClass)(r.parentNode,"fc_msg_sticker"),window.StickersAnimation&&window.StickersAnimation.checkSettingsAndLoadInWeb(t,!1,!1,!0)}FastChat.scroll(e),curFastChat.gotMedia[t]=[e,i,_],_&&_.stickers&&window.Emoji&&Emoji.updateTabs(_.stickers,_.keywords),void 0!==curFastChat.needMedia[t]&&(clearTimeout(curFastChat.needMedia[t][1]),delete curFastChat.needMedia[t])},replaceSpecialSymbols:function(e){return e.replace(/&lt;&lt;/g,"&laquo;").replace(/&gt;&gt;/g,"&raquo;").replace(/ \-\-/g," &mdash;").replace(/\-\- /g,"&mdash; ").replace(/(^|[\s.,:\'\";>\)\(])(\*|@)([A-Za-z0-9_\.]{2,32})\s*\((.+?)\)/g,"$1$4")},addMessage:function(e){var t,i=e.peer,_=this.getTab(i),o=_.log;if(!_||e.out||!_.box.visible||_.iman.is_idle||curNotifier.idle_manager.is_idle||(e.unread=!1,FastChat.markRead(e.peer,[e.id])),e.randomId&&(0,a.re)(document.querySelector(`[data-random-id="${e.randomId}"]`)),_.msgs[e.id]=[e.out,e.unread],this.isNewStack(e)){(0,a.re)("fc_log_empty"+i);var r=(e.out?"fc_msgs_out ":"")+(e.unread?"fc_msgs_unread":"");e.sticker&&(r+=" fc_msg_sticker");var n=e.isServiceMessage?curFastChat.tpl.msgs_service:e.out?curFastChat.tpl.msgs_out:curFastChat.tpl.msgs;t=(0,a.se)((0,a.rs)(n,{from_id:e.from_id,link:e.link,photo:Notifier.fixPhoto(e.photo),name:e.from_id==curFastChat.me.id?(0,E.getLang)("mail_im_thats_u"):(0,d.stripHTML)(e.name),classname:r,date:e.date,date_str:e.date_str,msgs:"",randomId:e.randomId||0,messageId:e.id})),o.appendChild(t)}else e.unread||(0,a.removeClass)(t,"fc_msgs_unread");var s=(0,a.geByClass1)("fc_msgs_list",t,"div"),l=(0,a.geByClass1)("fc_msgs_date",s),c=(0,a.geByClass1)("fc_msg_last",s);c&&(0,a.removeClass)(c,"fc_msg_last");var u=FastChat.replaceSpecialSymbols(e.text),f=(0,a.se)((0,a.rs)(curFastChat.tpl.msg,{msg_id:e.id,classname:(e.unread?"fc_msg_unread":"")+" fc_msg_last",text:e.isServiceMessage?`<div class="fc_srv_msg">${u}</div>`:u}));(0,a.domFC)(s)&&"BR"===(0,a.domFC)(s).tagName&&(0,a.re)((0,a.domFC)(s)),l?s.insertBefore(f,l):s.appendChild(f),vk.id!=e.from_id&&(delete curFastChat.typingEvents[i],FastChat.updateTyping(i,1)),_.scroll&&_.scroll.update()},getTab:e=>curFastChat.tabs[e],isTabLoaded(e){return Boolean(curFastChat.tabs&&this.getTab(e))},isNewStack(e){var t=this.getTab(e.peer).log.lastChild;return t&&"fc_msgs_error"==t.className&&(t=t.previousSibling),!t||(!(0,a.hasClass)(t,"fc_msgs_wrap")||(!(0,a.hasClass)(t,"fc_msgs_unread")&&!0===e.unread||(t.getAttribute("data-from")!==e.from_id||(e.date-(0,r.intval)(t.getAttribute("data-date"))>=300||!(!e.sticker&&!(0,a.hasClass)(t,"fc_msg_sticker"))))))},editMessage(e){var t=e.id,i=(0,a.ge)("fc_msg"+t);if(i){var _=(0,a.se)((0,a.rs)(curFastChat.tpl.msg,{msg_id:t,classname:i.getAttribute("class"),text:FastChat.replaceSpecialSymbols(e.text)}));i.parentNode.replaceChild(_,i)}},deleteMessage(e){var t=e.id,i=(0,a.ge)("fc_msg"+t);if(i){var _=!(0,a.domNS)(i)&&!(0,a.domPS)(i),o=(0,a.domClosest)("fc_tab_log_msgs",i);for((0,a.re)(_?(0,a.domClosest)("fc_msgs_wrap",i):i);(0,a.hasClass)((0,a.domLC)(o),"fc_msgs_date");)(0,a.re)((0,a.domLC)(o))}},updateTabUnreadCounter(e,t){if(!e){var i=document.querySelector(`#chat_tab_icon_${t.peerId}`),_=i&&i.querySelector(".chat_tab_counter");e={unread:_&&Math.max(+_.innerHTML,0)||0}}(0,L.isOut)(t)?e.unread=0:e.unread++,this.updateTabUnreadCounterElement(e,t.peerId)},updateTabUnreadCounterElement(e,t){if(e){var i=document.querySelector(`#chat_tab_icon_${t}`),_=i&&i.querySelector(".chat_tab_counter");_&&(_.innerHTML=e.unread>0?e.unread:""),e.title&&e.name&&((0,a.val)(e.title,e.name+(e.unread?' <span class="fc_tab_count">('+e.unread+")</span>":"")),(0,a.val)("fc_contact_unread"+t,e.unread?" <b>+"+e.unread+"</b>":""))}},showMsgFwd:function(e){return!(0,f.showBox)("al_im.php",{act:"a_show_forward_box",id:vk.id+"_"+e,from:"mail"},{stat:["im.css"],dark:1,params:{onHide:function(){AudioMessagePlayer.loaded&&AudioMessagePlayer.detachPlayer(!0)}}})},closeTab:function(e){curFastChat.tabs[e].box.close()},trackActivity(e){(0,B.statlogsValueEvent)("im_fastchat_location",e,window.cur.module)},toggleFastChats(e){var t=!e;(0,a.toggleClass)((0,a.ge)("chat_onl_wrap"),"fast_chats_toggle_hide",t),(0,a.toggleClass)((0,a.ge)("rb_box_fc_clist"),"fast_chats_toggle_hide",t),(0,r.each)((0,a.geByClass)("rb_box_wrap"),(()=>(0,a.toggleClass)(this,"fast_chats_toggle_hide",t)))},toggleFullScreenState(e){e?document.body.classList.add(K):document.body.classList.remove(K)},getFullScreenState:()=>document.body.classList.contains(K),tplBox:'<div class="fc_tab_wrap"><div class="fc_tab_head clear_fix"><a class="fc_tab_close_wrap"><div class="chats_sp fc_tab_close"></div></a><a class="fc_tab_max_wrap" href="/im?sel=%id%" onmousedown="event.cancelBubble = true;" onclick="return nav.go(this, event);"><div class="chats_sp fc_tab_max"></div></a><a class="fc_tab_pin_wrap" onmousedown="event.cancelBubble = true;" onclick="return FastChat.pinTab(%id%, event);"><div class="chats_sp fc_tab_pin"></div></a><div class="fc_tab_title noselect">%name%</div></div><div class="fc_tab"><div class="fc_tab_log_wrap"><div class="fc_tab_notify_wrap"></div><div class="fc_tab_log"><div class="fc_tab_log_msgs"></div><div class="fc_tab_typing" id="fc_tab_typing%id%"><div class="pr fc_tab_typing_icon _fc_tab_typing_progress" id=""><div class="pr_bt"></div><div class="pr_bt"></div><div class="pr_bt"></div></div><div class="fc_tab_typing_name _fc_tab_typing_name"></div></div></div></div><div class="fc_tab_txt_wrap"><a class="fc_tab_attach"></a><div class="fc_tab_txt">%cont%<div class="fc_tab_preview"></div></div></div></div><div class="fc_pointer_offset"><div class="fc_tab_pointer fc_tab_pointer_peer"></div></div></div>',tplTab:'<div class="fc_tab_log_wrap"><div class="fc_tab_notify_wrap"></div><div class="fc_tab_log"><div class="fc_tab_log_msgs"></div><div class="fc_tab_typing" id="fc_tab_typing%id%"><div class="pr fc_tab_typing_icon _fc_tab_typing_progress" id=""><div class="pr_bt"></div><div class="pr_bt"></div><div class="pr_bt"></div></div><div class="fc_tab_typing_name _fc_tab_typing_name"></div></div></div></div><div class="fc_tab_txt_wrap"><div class="fc_tab_txt">%cont%</div></div>'};var z=i(12202);window.DesktopNotifications={supported:function(){return!!window.Notification},checkPermissionNeeded:function(){return"granted"===Notification.permission?0:1},requestPermission:function(e){window.Notification.requestPermission(e).finally((function(){}))},createNotification:function(e,t,i){var _;return(_=new Notification(t,{icon:e,body:i})).cancel=function(){this.close()},_.show=function(){},(0,z.statlogsProbValueEvent)(.1,"browser_notification",1),_}};i(69906);window.getWndInner=function(){var e=window.lastWindowWidth,t=window.lastWindowHeight,i=(0,_.sbWidth)();return(!1!==window.lastWndScroll[0]?window.lastWndScroll[0]:window.htmlNode.scrollHeight>window.htmlNode.clientHeight)&&(e-=i+(i?1:0)),[t,e]},window.lastWndScroll=[!1,!1];window.updateWndVScroll=function(){var e=!1;e=window.boxLayerWrap&&(0,a.isVisible)(window.boxLayerWrap)?window.boxLayerWrap.scrollHeight>window.boxLayerWrap.clientHeight?1:0:window.layerWrap&&(0,a.isVisible)(window.layerWrap)?window.layerWrap.scrollHeight>window.layerWrap.clientHeight?1:0:!(!window.mvLayerWrap||!(0,a.isVisible)(window.mvLayerWrap))&&(window.mvLayerWrap.scrollHeight>window.mvLayerWrap.clientHeight?1:0),(0,r.each)(window.curRBox.tabs,(function(){this.options.marginFixedToLayer&&(0,a.setStyle)(this.wrap,{marginRight:(0,a.hasClass)(document.body,"layers_shown")?(0,_.sbWidth)():0})})),e!==window.lastWndScroll[0]&&(window.lastWndScroll[0]=e,(0,r.each)(window.curRBox.tabs,(function(){this.toRight&&!this.options.marginFixedToLayer&&(0,a.setStyle)(this.wrap,{marginRight:e?(0,_.sbWidth)():0})})))};window.defBox=function(e,t){var i,_='<div class="'+(e.subClass||"")+'"><div class="fc_tab_head"><a class="fc_tab_close_wrap fl_r"><div class="chats_sp fc_tab_close"></div></a><div class="fc_tab_title noselect">%title%</div></div><div id="fc_ctabs_cont"><div class="fc_ctab fc_ctab_active">%content%</div></div></div></div>';i=e.content?'<div class="fc_content_wrap"><div class="fc_content">'+e.content+"</div></div>":e.innerHTML;var n=(0,a.se)((0,a.rs)(_,{title:e.title,content:i}));i=(0,a.geByClass1)("fc_content",n,"div");var s,l={movable:(0,a.geByClass1)("fc_tab_head",n),hider:(0,a.geByClass1)("fc_tab_close_wrap",n,"a"),startLeft:e.x,startTop:e.y,startHeight:e.height,startWidth:e.width,resizeableH:i,resize:!1,minH:e.minH,onBeforeHide:e.onBeforeHide||function(){},onHide:e.onHide||function(){},onDragEnd:function(){},onResize:function(){}},c=new window.RBox(n,(0,r.extend)(l,e));return e.content&&(s=new window.Scrollbar(i,{prefix:"fc_",more:o.debugLog,nomargin:!0,global:!0,nokeys:!0,right:window.vk.rtl?"auto":0,left:window.vk.rtl?0:"auto",onHold:e.onHold})),t({id:c.id,cont:i,update:function(){s&&s.update()}}),c};try{window.stManager.done("notifier.js")}catch(e){}},10124:(e,t,i)=>{i.d(t,{createMutations:()=>a,createModule:()=>l,destroyModule:()=>c});var _=i(70655),o=i(67784),r=i(49535);function a(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,(0,_.__spreadArray)([],(0,_.__read)(t),!1))}}}function n(e,t,i,_){(0,r.addEvent)(t,i,_),e._registeredHandlers.push({handlerType:"bind",elem:t,types:i,handler:_})}function s(e,t,i,_,r,a){(0,o.addDelegateEvent)(t,i,_,r,a),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:i,selector:_,handler:r})}function l(e){var t={_registeredHandlers:[]};return e.handlers((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return n.apply(void 0,(0,_.__spreadArray)([t],(0,_.__read)(e),!1))}),(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return s.apply(void 0,(0,_.__spreadArray)([t],(0,_.__read)(e),!1))})),t}function c(e){e._registeredHandlers.forEach((function(e){var t=e.handlerType,i=e.elem,_=e.types,a=e.handler;"delegate"===t?(0,o.removeDelegateEvent)(i,_,e.selector,a):(0,r.removeEvent)(i,_,a)})),e._registeredHandlers=[]}},97332:(e,t,i)=>{i.d(t,{MARKET_NOTIFY_ID__HS_MIGRATION_STATE:()=>a,onHappySantaMarketMigrationStateChanged:()=>s});var _=i(18253),o=i(15544),r=i(54612),a="happy_santa_market_migration_state";function n(){window.wkcur&&window.cur&&window.WkView&&(window.wkcur.onHide=null,window.cur.isMigrateAvailable=!1,window.WkView.hide())}function s(e){if(void 0!==e.add&&void 0!==e.add.state&&void 0!==e.add.group_id){var t=Number(e.add.state),i=Number(e.add.group_id);if(1!==t)switch(t){case 3:var a=_.GROUP_ORDERS_DEFAULT_COLUMNS.map((function(e,t){return{id:e,order:t,isEnabled:"merchantComment"!==e&&"deliveryOption"!==e}})),s=_.GROUP_ORDERS_COLUMNS_STORAGE_KEY+"_"+i;window.ls.set(s,a);var l=document.querySelector("#group_edit_market_settings_link");l&&(0,o.show)(l),n();break;case 2:n();var c=e.add.info_title?String(e.add.info_title):"",d=e.add.info_text?String(e.add.info_text):"";c&&d&&window.cur.isMigrationInProgress&&(0,r.showFastBox)(c,d)}}}},59483:(e,t,i)=>{i.d(t,{lpSingletonGetInstance:()=>q,lpSingletonOnNotifierRecv:()=>j,lpSingletonOnTabInitialLoaded:()=>H,lpSingletonSyncWithNotifier:()=>z});var _=i(70655),o=i(91040),r=i(87294),a=i(63825),n=i(19331),s=(0,n.partConfigEnabled)("me_web_read_by_cmid")?15:14;function l(e,t){e.waitAbortFns.push(t)}function c(e){if(e.isStoppedFn())return Promise.resolve({ts:0,updates:[]});var t=(0,r.plaingetCancelable)(e.url,{act:"a_check",key:e.key,version:e.version,ts:e.ts,wait:25,mode:e.mode}),i=t.request,a=t.cancel;return e.stopFn=a,i.then((function(t){var i=(0,_.__read)(t,2),o=i[0],r=i[1];return e.onData(e,r),e.waitTimeout=2,JSON.parse(o)})).catch((function(t){var i=(0,_.__read)(t,2)[1];return e.onData(e,i),Promise.reject(new Error(""))})).then((function(t){return function(e,t){var i=t.failed?(0,o.abortablePause)(4,null):{abort:function(){},pause:function(){return Promise.resolve()}},r=i.abort,a=i.pause;switch(t.failed){case 1:return l(e,r),e.onHistoryLost(e,t).then((function(){return e.onResult({ts:t.ts,updates:[[-1]]})})).then(a).then((function(){return c(e)}));case 2:return l(e,r),e.onKeyExpired(e,t).then((function(t){var i=(0,_.__read)(t,4),o=i[0],r=i[1],a=i[2],n=i[3];return e.onResult({ts:+n,updates:[[-2,o,r+"/"+a],[-1]]})})).then(a).then((function(){return c(e)}));case 3:return e.onLpBroken(e,t);default:return t.updates.some((function(e){switch(e[0]){case 4:return 4===e.length;case 5:case 18:return 3===e.length;default:return!1}}))?e.onHistoryLost(e,t).then((function(){return e.onResult({ts:t.ts,updates:[[-1]]})})).then(a).then((function(){return c(e)})):Promise.resolve(t)}}(e,t)}))}function d(e){e.isStoppedFn()||c(e).then(e.onResult.bind(e)).then((function(){return e.isReconnecting&&u(e,-5)})).catch((function(t){return function(e,t){if(e.isStoppedFn())return;e.onRequestError(t),e.waitTimeout=Math.min(60,2*e.waitTimeout),u(e,-3);var i=(0,o.abortablePause)(e.waitTimeout,null),_=i.abort,r=i.pause;return l(e,_),r().then((function(){return u(e,-4)}))}(e,t)})).then((function(){return d(e)}))}function u(e,t){e.isReconnecting=-4===t,e.onResult({ts:e.ts,updates:[[t,e.waitTimeout]]})}function f(e){return e||function(){}}function h(e){return e?function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Promise.resolve(e.apply(void 0,(0,_.__spreadArray)([],(0,_.__read)(t),!1)))}:function(){return Promise.reject()}}function p(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(window.vk.lpConfig.debug){var r="background: "+e+"; color: white",a=new Date,n=function(e){return e<10?"0"+e.toString():e.toString()};console.log.apply(console,(0,_.__spreadArray)(["%c "+a.getHours()+":"+n(a.getMinutes())+":"+n(a.getSeconds())+":"+a.getMilliseconds()+" "+t+" ",r],(0,_.__read)(i),!1))}}function g(){return window.lpBufferFc||(window.lpBufferFc=[]),window.lpBufferFc}function b(){return window.lpBufferIm||(window.lpBufferIm=[]),window.lpBufferIm}function m(){return"im"===window.cur.module&&window.store&&window.store.get().longpoll&&!window.store.get().stopped}function v(){var e;m()&&(b().forEach((function(e){!g().find((function(t){return e.ev===t.ev}))&&e.time<Date.now()-1e3&&!e.warned&&(e.warned=!0,p("red","im not fc",e.ev))})),g().forEach((function(e){var t=b().find((function(t){return t.ev===e.ev}));t&&t.warned&&!e.warned&&(e.warned=!0,p("red","now fc like im",e.ev))}))),e=Date.now()-3e4,window.lpBufferFc=g().filter((function(t){return t.time>e})),window.lpBufferIm=b().filter((function(t){return t.time>e}))}window.longpollTestingOnImEvents=function(e){var t;m()&&((t=b()).push.apply(t,(0,_.__spreadArray)([],(0,_.__read)(e.map((function(e){return{time:Date.now(),ev:JSON.stringify(e),warned:!1}}))),!1)),setTimeout(v,1100)),p.apply(void 0,(0,_.__spreadArray)(["blue","im"],(0,_.__read)(e),!1))};var E=i(54593),C=i(60615);function w(e,t){return function(e,t){var i=!!e.stopped,_={id:e.id,key:e.key,ts:e.ts,url:e.url,lpstat:e.lpstat||0,version:e.version||s,mode:1226,waitTimeout:2,waitAbortFns:[],isReconnecting:!1,isStoppedFn:function(){return i},onResult:function(e){e.ts&&r(_.ts,e.ts,e.updates.map(a.constructEvent))},onData:f(t.onData),onRequestError:f(t.onRequestError),onHistoryLost:h(t.onHistoryLost),onKeyExpired:h(t.onKeyExpired),onLpBroken:h(t.onHistoryLost)},o=t.onEvents;function r(e,t,i){_.ts=t;for(var r=0;r<i.length;++r)i[r].type===a.REFRESH_LP_KEY&&(_.key=i[r].key||"",_.url=i[r].url||"");o(e,t,i)}var n={options:_,isStopped:function(){return i},stopConnection:function(){i=!0,_.stopFn&&_.stopFn(),_.stopFn=void 0,document.removeEventListener("resume",l),this.abortWaiting()},reinitConnection:function(){this.stopConnection(),document.addEventListener("resume",l),u(_,-4),i=!1,d(_)},abortWaiting:function(){_.waitAbortFns.forEach((function(e){return e()})),_.waitAbortFns=[],_.waitTimeout=2},onLp:r};function l(){n.abortWaiting()}return document.addEventListener("resume",l),d(_),n}(e,{onEvents:t,onData:T,onRequestError:O,onHistoryLost:D,onKeyExpired:y,onLpBroken:I})}var M={},P=Date.now();function T(e,t){if(t&&t.status&&e.lpstat){var i=t.status.toString();t.status>=500&&t.status<600&&(0,C.statlogsValueEvent)("fc_longpoll",1,i,t.getResponseHeader("x-frontend")||""),M[i]=i in M?M[i]+1:1,Date.now()-P>=3e4&&(Object.keys(M).forEach((function(e){(0,C.statlogsValueEvent)("fc_longpoll",M[e],e,t.getResponseHeader("x-frontend")||"")})),M={},P=Date.now())}}function O(e){p("red","LP error",e.message||"no message (probably browser reset)")}function D(e,t){p("red","LP failed: old timestamp; resync, next ts",t.ts)}function y(e){return p("red","LP failed: key is incorrect; refresh key"),(0,r.post)(E.CONTROLLER,{act:"a_get_key",uid:e.id,gid:e.id<0?-e.id:0},1e3)}function I(){throw window.nav.reload({force:!0}),new Error("ts is very wrong")}function k(e,t,i){var o=0,r=e,a=[],n=!1;function s(){!a.length||o>0||n||(t(a),a=[])}return{pause:function(){o++},resume:function(){o>0&&(o--,s())},onLp:function(e,t,o){n||(r>=e?(r=t,a.push.apply(a,(0,_.__spreadArray)([],(0,_.__read)(o),!1)),s()):i&&(n=!0,i(r).then((function(e){var t=(0,_.__read)(e,3),i=t[1],o=t[2];r=i,n=!1,a.push.apply(a,(0,_.__spreadArray)([],(0,_.__read)(o),!1)),s()}))))}}}var B=i(26271),L=i(95724),A=i(94795),F=i.n(A),N=window.lpConnect,R=window.lpInstance;function x(){return window.vk.id>0}function U(){return Boolean(window.curNotifier&&window.curNotifier.lp_connected)}function S(){return window.curNotifier&&window.curNotifier.is_server||B.browser.safari}function W(e,t,i){R.onLp(e,t,i),U()&&S()&&(e!=t||i.length)&&function(e,t,i){window.Notifier.lcSend("lp_data",{tsOld:e,tsNow:t,evs:i}),p("silver","broadcast to others",e,t,i)}(e,t,i)}function K(){var e=new(F()),t=k(window.vk.lpConfig.ts,(function(t){!function(e){var t;m()&&((t=g()).push.apply(t,(0,_.__spreadArray)([],(0,_.__read)(e.map((function(e){return{time:Date.now(),ev:JSON.stringify(e),warned:!1}}))),!1)),setTimeout(v,0)),p.apply(void 0,(0,_.__spreadArray)(["green","fc"],(0,_.__read)(e),!1))}(t),e.trigger("data",t)}),G);window.lpInstance=R={onData:function(t){e.on("data",t)},offData:function(t){e.off("data",t)},pause:function(){t.pause()},resume:function(){t.resume()},push:function(t){e.trigger("data",t)},abortWaiting:function(){N.abortWaiting()},onLp:function(e,i,_){t.onLp(e,i,_)},isEnabled:function(){return N&&!N.isStopped()}}}function q(){return x()?(R||(window.vk.lpConfig.url&&0!==window.vk.lpConfig.enabled||(window.vk.lpConfig.stopped=!0),window.vk.lpConfig.id=window.vk.id,window.lpConnect=N=w(window.vk.lpConfig,W),K()),R):null}function H(){var e,t;x()&&(p("orange","init longpoll connection on load"),q(),null===(t=null===(e=window.curNotifier)||void 0===e?void 0:e.idle_manager)||void 0===t||t.on("unidle",(function(){N.abortWaiting()})),z())}function z(){x()&&(U()?N.isStopped()&&S()?(p("orange","now master, init connection"),N.reinitConnection()):N.isStopped()||S()||(p("orange","now slave, stop connection"),N.stopConnection()):setTimeout(z,500))}function j(e){U()&&!S()&&x()&&(p("silver","recv from master",e.tsOld,e.tsNow,e.evs),N.onLp(e.tsOld,e.tsNow,e.evs))}function G(e){var t=(0,L.extend)({},window.lpConnect.options,{ts:e});return p("orange","createLongpoll to load from",e),new Promise((function(e){var i=w(t,(function(t,_,o){p("orange","Loaded ["+t+","+_+")"),i.stopConnection(),e([t,_,o])}))}))}},16850:(e,t,i)=>{function _(e){var t,i;if(null!==(i=t=e)&&"object"==typeof i&&("queue"in t||"key"in t&&"string"==typeof t.key))return e.queue||e.key}i.d(t,{subscriptionObjectStableId:()=>_})},74880:(e,t,i)=>{i.d(t,{UserSatisfactionModeration:()=>E});var _=i(70655),o=i(85893),r=i(67294),a=i(88420),n=i(64107),s=i(81117),l=function(e){function t(t){return e.call(this,t)||this}return(0,_.__extends)(t,e),t.prototype.render=function(){return(0,o.jsx)("div",(0,_.__assign)({className:"CloseButton__container",onClick:s.destroyComponentInBox},{children:(0,o.jsx)(n.default,{className:"CloseButton__icon"},void 0)}),void 0)},t}(r.Component);const c=(0,i(63192).makeIcon)("Icon36Favorite","favorite_36","0 0 36 36",'<symbol fill="none" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" id="favorite_36"><path d="m23.015 12.727 6.645.638c2.312.222 3.02 2.48 1.235 3.964l-5.201 4.323 1.93 7.043c.635 2.313-1.333 3.713-3.303 2.321L18 26.551l-6.32 4.465c-1.963 1.386-3.939-.008-3.304-2.321l1.93-7.043-5.201-4.323c-1.793-1.49-1.087-3.741 1.235-3.964l6.643-.638L15.91 5.98c.917-2.113 3.264-2.112 4.18 0z" fill="currentColor" /></symbol>',36,36,!1,void 0);var d=i(59397),u=[1,2,3,4,5],f=function(e){function t(t){var i=e.call(this,t)||this;return i.state={hover:0},i}return(0,_.__extends)(t,e),t.prototype.isSelected=function(e){return this.state.hover?e<=this.state.hover:this.props.selected>=e},t.prototype.render=function(){var e=this;return(0,o.jsxs)("div",(0,_.__assign)({className:this.props.className,onMouseLeave:function(){e.setState({hover:0})}},{children:[(0,o.jsx)("div",(0,_.__assign)({className:"RatingInput__description"},{children:this.props.description}),void 0),(0,o.jsx)("div",(0,_.__assign)({className:"RatingInput__container"},{children:u.map((function(t){return(0,o.jsx)(c,{onMouseEnter:function(){return e.setState({hover:t})},onClick:function(){return e.props.onChange(t)},className:(0,d.classNames)("RatingInput__star",{"RatingInput__star--selected":e.isSelected(t)})},t)}))}),void 0),(0,o.jsxs)("div",(0,_.__assign)({className:"RatingInput__hints"},{children:[(0,o.jsx)("div",{className:"RatingInput__hint--left",dangerouslySetInnerHTML:{__html:this.props.minHint}},void 0),(0,o.jsx)("div",{className:"RatingInput__hint--right",dangerouslySetInnerHTML:{__html:this.props.maxHint}},void 0)]}),void 0)]}),void 0)},t}(r.Component),h=i(56589),p=i(73947),g=i(64891),b=i(71516),m=function(e){function t(t){var i=e.call(this,t)||this;return i.close=i.close.bind(i),i.clickLink=i.clickLink.bind(i),i}return(0,_.__extends)(t,e),t.prototype.componentWillUnmount=function(){null===window||void 0===window||window.nav.reload()},t.prototype.close=function(){if(this.props.giftStatus){var e={act:"status",hash:this.props.hash};window.ajax.post("user_satisfaction_moderation.php",e,{onDone:function(){(0,s.destroyComponentInBox)()}})}else(0,s.destroyComponentInBox)()},t.prototype.clickLink=function(){(0,b.saveStatlogEvents)({name:"user_satisfaction_moderation_click",value:1,keys:["thanks_click_about","web"]})},t.prototype.render=function(){return(0,o.jsxs)("div",(0,_.__assign)({className:"StatusForm__box"},{children:[(0,o.jsx)(l,{},void 0),(0,o.jsx)("div",(0,_.__assign)({className:"StatusForm__imageContainer"},{children:(0,o.jsx)("img",{src:this.props.imageUrl},void 0)}),void 0),(0,o.jsx)("div",{className:"StatusForm__title",dangerouslySetInnerHTML:{__html:this.props.title}},void 0),(0,o.jsx)("div",{className:(0,d.classNames)("StatusForm__description",{"StatusForm__description--short":!this.props.giftStatus}),dangerouslySetInnerHTML:{__html:this.props.description}},void 0),(0,o.jsxs)("div",(0,_.__assign)({className:"StatusForm__actions"},{children:[(0,o.jsx)(a.default,{className:"StatusForm__actions--success",dangerouslySetInnerHTML:{__html:this.props.buttonText},onClick:this.close},void 0),(0,o.jsx)(g.default,(0,_.__assign)({href:this.props.linkUrl,className:"StatusForm__actions--link",onClick:this.clickLink,target:"_blank"},{children:this.props.linkText}),void 0)]}),void 0)]}),void 0)},t}(r.Component),v=function(e){function t(t){var i=e.call(this,t)||this;return i.state={question:0,answers:[]},i.nextQuestion=i.nextQuestion.bind(i),i.ratingChanged=i.ratingChanged.bind(i),i.answerChanged=i.answerChanged.bind(i),i.commentChanged=i.commentChanged.bind(i),i}return(0,_.__extends)(t,e),t.prototype.nextQuestion=function(){if(this.state.question<this.props.questions.length-1)this.setState({question:this.state.question+1});else{var e={act:"send",answers:JSON.stringify(this.state.answers),hash:this.props.hash};(0,s.destroyComponentInBox)(),window.ajax.post("user_satisfaction_moderation.php",e,{onDone:function(e){(0,s.showComponentInBox)((0,o.jsx)(m,{title:e.form.title,imageUrl:e.form.image_url,description:e.form.description,buttonText:e.form.button_text,linkText:e.form.link_text,linkUrl:e.form.link_url,giftStatus:e.gift_status,hash:e.hash},void 0))}})}},t.prototype.ratingChanged=function(e){var t=this.state.answers;t[this.state.question]={rating:e,value:void 0,comment:void 0},this.setState({answers:t})},t.prototype.answerChanged=function(e){var t=this.state.answers;t[this.state.question]={rating:void 0,value:e.selected.value,comment:void 0},this.setState({answers:t})},t.prototype.commentChanged=function(e){var t=this.state.answers,i=t[this.state.question]||{rating:void 0,value:void 0,comment:void 0},_=e.target.value.replace(/[\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF]/g,"");_.length>255||(i.comment=_,t[this.state.question]=i,this.setState({answers:t}))},t.prototype.getSelectedRating=function(){var e=this.state.answers[this.state.question];return e?e.rating:0},t.prototype.renderInput=function(e,t){var i,r;if(e.rating_answer)return(0,o.jsx)(f,{onChange:this.ratingChanged,selected:t,minHint:e.min_hint,maxHint:e.max_hint,description:this.props.choiceRating,className:"QuestionForm__ratingInput"},void 0);var a=this.state.answers[this.state.question],n=(null==a?void 0:a.value)!==(null===(i=e.text_area_on_answer)||void 0===i?void 0:i.toString())?(0,o.jsx)("div",(0,_.__assign)({className:"QuestionForm__dropDownHint"},{children:this.props.dropDownHint}),void 0):(0,o.jsx)(p.default,{grow:!1,placeholder:this.props.textAreaPlaceholder,className:"QuestionForm__comment",style:{height:86},onChange:this.commentChanged,value:(null==a?void 0:a.comment)||""},void 0),s=(null===(r=e.answers)||void 0===r?void 0:r.map((function(e,t){return{label:e,value:t+""}})))||[];return(0,o.jsxs)("div",(0,_.__assign)({className:"QuestionForm__dropDownContainer"},{children:[(0,o.jsx)(h.default,{placeholder:this.props.dropDownPlaceholder,onChange:this.answerChanged,value:null==a?void 0:a.value,appearance:"secondary",options:s,inputOtherProps:{className:"QuestionForm__selectInput"}},void 0),n]}),void 0)},t.prototype.buttonText=function(e){var t=this.state.answers[this.state.question];return t&&void 0!==(null==t?void 0:t.rating)||void 0!==(null==t?void 0:t.value)||void 0!==(null==t?void 0:t.comment)?e.button_text:e.button_text_on_empty||e.button_text},t.prototype.render=function(){if(!this.props.questions.length)return null;var e=this.props.questions[this.state.question],t=this.getSelectedRating(),i=e.is_required&&!t;return(0,o.jsxs)("div",(0,_.__assign)({className:"QuestionForm__box"},{children:[(0,o.jsx)(l,{},void 0),(0,o.jsx)("div",(0,_.__assign)({className:"QuestionForm__imageContainer"},{children:(0,o.jsx)("img",{src:e.icon_url},void 0)}),void 0),(0,o.jsx)("div",(0,_.__assign)({className:"QuestionForm__hint"},{children:e.number}),void 0),(0,o.jsx)("h2",{className:"QuestionForm__description",dangerouslySetInnerHTML:{__html:e.description}},void 0),this.renderInput(e,t),(0,o.jsx)("div",(0,_.__assign)({className:"QuestionForm__actionsRow"},{children:(0,o.jsx)(a.default,(0,_.__assign)({onClick:this.nextQuestion,className:"QuestionForm__button",disabled:i},{children:this.buttonText(e)}),void 0)}),void 0)]}),void 0)},t}(r.Component),E=function(e){function t(t){var i=e.call(this,t)||this;return i.showQuestions=i.showQuestions.bind(i),i}return(0,_.__extends)(t,e),t.prototype.showQuestions=function(){(0,s.destroyComponentInBox)(),(0,s.showComponentInBox)((0,o.jsx)(v,{hash:this.props.hash,questions:this.props.questions,choiceRating:this.props.form.choice_rating,dropDownHint:this.props.form.drop_down_hint,textAreaPlaceholder:this.props.form.text_area_placeholder,dropDownPlaceholder:this.props.form.drop_down_placeholder},void 0))},t.prototype.render=function(){return(0,o.jsxs)("div",(0,_.__assign)({className:"UserSatisfactionModeration__box"},{children:[(0,o.jsx)(l,{},void 0),(0,o.jsx)("div",(0,_.__assign)({className:"UserSatisfactionModeration__image"},{children:(0,o.jsx)("img",{src:this.props.form.image_url},void 0)}),void 0),(0,o.jsx)("h2",{className:"UserSatisfactionModeration__title",dangerouslySetInnerHTML:{__html:this.props.form.title}},void 0),(0,o.jsx)("div",{className:"UserSatisfactionModeration__description",dangerouslySetInnerHTML:{__html:this.props.form.description}},void 0),(0,o.jsx)(a.default,(0,_.__assign)({onClick:this.showQuestions,className:"UserSatisfactionModeration__button"},{children:this.props.form.button_text}),void 0)]}),void 0)},t}(r.Component)}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,i,_)=>{if(!t){var o=1/0;for(s=0;s<deferred.length;s++){for(var[t,i,_]=deferred[s],r=!0,a=0;a<t.length;a++)(!1&_||o>=_)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[a])))?t.splice(a--,1):(r=!1,_<o&&(o=_));if(r){deferred.splice(s--,1);var n=i();void 0!==n&&(e=n)}}return e}_=_||0;for(var s=deferred.length;s>0&&deferred[s-1][2]>_;s--)deferred[s]=deferred[s-1];deferred[s]=[t,i,_]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null);__webpack_require__.r(i);var _={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>_[t]=()=>e[t]));return _.default=()=>e,__webpack_require__.d(i,_),i},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,i)=>(__webpack_require__.f[i](e,t),t)),[])),__webpack_require__.u=e=>57468===e?"SilentModeForms.37121b9f65b293c717c5.js":85780===e?"fastchat_reforged_v150.9c298f9048c9913696a1.js":26156===e?e+".f24734aa586c3996e4f6.js":49685===e?"redux.06b9fecc68f3bfef2ace.js":38288===e?"lottie.bf5091b7f87d69ae48b0.js":85719===e?"4df008ccd3c4020180a8b79870f04e90.3bd43560260bd43c9e7a.js":83040===e?"de7ff8b84642a83ebcb5f52dc4f86ff6.f9c66b7d0de80788ee60.js":49154===e?"e7c3f5121c99841d270d0ef1ee074543.69971b8631e72fa77862.js":97474===e?"ac4c4c217b0f94690b343f2a810e66fc.71126b8741995daa28ec.js":90729===e?"330f10ca7370f1ea8ecfb83c6419d845.97929befa226c3751dea.js":79542===e?"11c7a0efa74f6d488cf4ce0ffbe4d05a.1717a8c6c6b9e723edc3.js":70306===e?"3ae78002d05d100ea57d5ee29ec63b89.0e47ce59c0540aa3e577.js":25077===e?"34070b9b70cb2bcd6cda415005720c20.69f0a9b432e3179b3d52.js":68069===e?"b3c52704711ff506ec36e9c85b864ca9.2c84867fd86485d68783.js":87595===e?"88729b1d8252e9abdf31a8698586f9d6.bb35514ecf69aa89158b.js":23299===e?"3bad6e117063d3681bf4f60574b483cc.d587703ca810e3d205e2.js":99138===e?"2b952f3ea411b7ed56134eb55f574493.0ca8a8982284dba1dd42.js":76597===e?"253ce3e7acf6b5c059e6bf157eaac901.3f7aa7d751341446fbcc.js":93417===e?"758783f2384baa77b901b7efcc9e55b5.3ca812b474740638d292.js":8719===e?"c565bd4c03935309f8a94999b93eb4f2.a674ea250b236bedb9e3.js":35061===e?"6fa1509cdf1b6cd6f8c4ce766b5a0d08.3cf2da56d09f761bfc48.js":5360===e?"3f009728a63528384f06cb38ea4ede79.f4143cc464d628c32ecf.js":void 0,__webpack_require__.miniCssF=e=>8719===e?"c565bd4c03935309f8a94999b93eb4f2.3da7192c827660311fcc.css":e+"."+{57468:"05acafa100686f0ce31e",85780:"aced9b60aec85a3773cb"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,i,_)=>{if(inProgress[e])inProgress[e].push(t);else{var o,r;if(void 0!==i)for(var a=document.getElementsByTagName("script"),n=0;n<a.length;n++){var s=a[n];if(s.getAttribute("src")==e||s.getAttribute("data-webpack")=="vk:"+i){o=s;break}}o||(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack","vk:"+i),o.src=e),inProgress[e]=[t];var l=(t,i)=>{o.onerror=o.onload=null,clearTimeout(c);var _=inProgress[e];if(delete inProgress[e],o.parentNode&&o.parentNode.removeChild(o),_&&_.forEach((e=>e(i))),t)return t(i)},c=setTimeout(l.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=l.bind(null,o.onerror),o.onload=l.bind(null,o.onload),r&&document.head.appendChild(o)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,i)=>{var _=__webpack_require__.miniCssF(e),o=__webpack_require__.p+_;if(((e,t)=>{for(var i=document.getElementsByTagName("link"),_=0;_<i.length;_++){var o=(a=i[_]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var r=document.getElementsByTagName("style");for(_=0;_<r.length;_++){var a;if((o=(a=r[_]).getAttribute("data-href"))===e||o===t)return a}})(_,o))return t();((e,t,i,_)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=r=>{if(o.onerror=o.onload=null,"load"===r.type)i();else{var a=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=a,s.request=n,o.parentNode.removeChild(o),_(s)}},o.href=t,document.head.appendChild(o)})(e,o,t,i)})),installedCssChunks={90675:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{8719:1,57468:1,85780:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={90675:0};__webpack_require__.f.j=(t,i)=>{var _=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==_)if(_)i.push(_[2]);else{var o=new Promise(((i,o)=>_=e[t]=[i,o]));i.push(_[2]=o);var r=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(r,(i=>{if(__webpack_require__.o(e,t)&&(0!==(_=e[t])&&(e[t]=void 0),_)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,_[1](a)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,i)=>{var _,o,[r,a,n]=i,s=0;for(_ in a)__webpack_require__.o(a,_)&&(__webpack_require__.m[_]=a[_]);if(n)var l=n(__webpack_require__);for(t&&t(i);s<r.length;s++)o=r[s],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[r[s]]=0;return __webpack_require__.O(l)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var __webpack_exports__=__webpack_require__.O(void 0,[76429,75514,24509,56990,40885,68592,30892,26001],(()=>__webpack_require__(21880)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();